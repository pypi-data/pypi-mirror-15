

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>3.0 release notes &mdash; django cms 3.3.0.dev4 documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  

  
    <link rel="top" title="django cms 3.3.0.dev4 documentation" href="../index.html"/>
        <link rel="up" title="Release notes &amp; upgrade information" href="index.html"/>
        <link rel="next" title="2.4 release notes" href="2.4.html"/>
        <link rel="prev" title="3.0.3 release notes" href="3.0.3.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> django cms
          

          
          </a>

          
            
            
              <div class="version">
                3.3.0.dev4
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../introduction/index.html">Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../how_to/index.html">How-to guides</a></li>
<li class="toctree-l1"><a class="reference internal" href="../topics/index.html">Key topics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/index.html">Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../contributing/index.html">Development &amp; community</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Release notes &amp; upgrade information</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="3.3.html">3.3 release notes</a></li>
<li class="toctree-l2"><a class="reference internal" href="3.2.3.html">3.2.3 release notes</a></li>
<li class="toctree-l2"><a class="reference internal" href="3.2.2.html">3.2.2 release notes</a></li>
<li class="toctree-l2"><a class="reference internal" href="3.2.1.html">3.2.1 release notes</a></li>
<li class="toctree-l2"><a class="reference internal" href="3.2.html">3.2 release notes</a></li>
<li class="toctree-l2"><a class="reference internal" href="3.1.5.html">3.1.5 release notes</a></li>
<li class="toctree-l2"><a class="reference internal" href="3.1.4.html">3.1.4 release notes - Unreleased - Draft</a></li>
<li class="toctree-l2"><a class="reference internal" href="3.1.3.html">3.1.3 release notes</a></li>
<li class="toctree-l2"><a class="reference internal" href="3.1.2.html">3.1.2 release notes</a></li>
<li class="toctree-l2"><a class="reference internal" href="3.1.1.html">3.1.1 release notes</a></li>
<li class="toctree-l2"><a class="reference internal" href="3.1.html">3.1 release notes</a></li>
<li class="toctree-l2"><a class="reference internal" href="3.0.16.html">3.0.16 release notes</a></li>
<li class="toctree-l2"><a class="reference internal" href="3.0.15.html">3.0.15 release notes</a></li>
<li class="toctree-l2"><a class="reference internal" href="3.0.14.html">3.0.14 release notes</a></li>
<li class="toctree-l2"><a class="reference internal" href="3.0.13.html">3.0.13 release notes</a></li>
<li class="toctree-l2"><a class="reference internal" href="3.0.12.html">3.0.12 release notes</a></li>
<li class="toctree-l2"><a class="reference internal" href="3.0.11.html">3.0.11 release notes</a></li>
<li class="toctree-l2"><a class="reference internal" href="3.0.10.html">3.0.10 release notes</a></li>
<li class="toctree-l2"><a class="reference internal" href="3.0.9.html">3.0.9 release notes</a></li>
<li class="toctree-l2"><a class="reference internal" href="3.0.8.html">3.0.8 release notes</a></li>
<li class="toctree-l2"><a class="reference internal" href="3.0.7.html">3.0.7 release notes</a></li>
<li class="toctree-l2"><a class="reference internal" href="3.0.6.html">3.0.6 release notes</a></li>
<li class="toctree-l2"><a class="reference internal" href="3.0.3.html">3.0.3 release notes</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="">3.0 release notes</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#what-s-new-in-3-0">What&#8217;s new in 3.0</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#new-frontend-editing">New Frontend Editing</a></li>
<li class="toctree-l4"><a class="reference internal" href="#new-toolbar">New Toolbar</a></li>
<li class="toctree-l4"><a class="reference internal" href="#new-page-types">New Page Types</a></li>
<li class="toctree-l4"><a class="reference internal" href="#experimental-python-3-3-support">Experimental Python 3.3 support</a></li>
<li class="toctree-l4"><a class="reference internal" href="#better-multilingual-editing">Better multilingual editing</a></li>
<li class="toctree-l4"><a class="reference internal" href="#cms-seo-fields">CMS_SEO_FIELDS</a></li>
<li class="toctree-l4"><a class="reference internal" href="#cms-menu-title-overwrite">CMS_MENU_TITLE_OVERWRITE</a></li>
<li class="toctree-l4"><a class="reference internal" href="#plugin-fallback-languages">Plugin fallback languages</a></li>
<li class="toctree-l4"><a class="reference internal" href="#language-chooser">language_chooser</a></li>
<li class="toctree-l4"><a class="reference internal" href="#undo-and-redo">Undo and Redo</a></li>
<li class="toctree-l4"><a class="reference internal" href="#plugins-removed">Plugins removed</a></li>
<li class="toctree-l4"><a class="reference internal" href="#plugin-context-processors-take-a-new-argument">Plugin Context Processors take a new argument</a></li>
<li class="toctree-l4"><a class="reference internal" href="#apphooks">Apphooks</a></li>
<li class="toctree-l4"><a class="reference internal" href="#placeholderadmin"><code class="docutils literal"><span class="pre">PlaceholderAdmin</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#placeholder-object-permissions">Placeholder object permissions</a></li>
<li class="toctree-l4"><a class="reference internal" href="#placeholders-are-pre-fillable-with-default-plugins">Placeholders are pre-fillable with default plugins</a></li>
<li class="toctree-l4"><a class="reference internal" href="#custom-modules-and-plugin-labels-in-the-toolbar-ui">Custom modules and plugin labels in the toolbar UI</a></li>
<li class="toctree-l4"><a class="reference internal" href="#new-copy-lang-subcommand">New <code class="docutils literal"><span class="pre">copy-lang</span></code> subcommand</a></li>
<li class="toctree-l4"><a class="reference internal" href="#frontend-editor-for-django-models">Frontend editor for Django models</a></li>
<li class="toctree-l4"><a class="reference internal" href="#new-page-related-name-to-site">New <code class="docutils literal"><span class="pre">Page</span> <span class="pre">related_name</span></code> to <code class="docutils literal"><span class="pre">Site</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#moved-all-template-tags-to-cms-tags">Moved all template tags to <code class="docutils literal"><span class="pre">cms_tags</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#getter-and-setter-for-translatable-plugin-content"><code class="docutils literal"><span class="pre">getter</span></code> and <code class="docutils literal"><span class="pre">setter</span></code> for translatable plugin content</a></li>
<li class="toctree-l4"><a class="reference internal" href="#no-more-db-table-name-magic-for-plugins">No more DB table-name magic for plugins</a></li>
<li class="toctree-l4"><a class="reference internal" href="#added-support-for-custom-user-models">Added support for custom user models</a></li>
<li class="toctree-l4"><a class="reference internal" href="#page-caching">Page caching</a></li>
<li class="toctree-l4"><a class="reference internal" href="#placeholder-caching">Placeholder caching</a></li>
<li class="toctree-l4"><a class="reference internal" href="#plugin-caching">Plugin caching</a></li>
<li class="toctree-l4"><a class="reference internal" href="#per-page-clickjacking-protection">Per-page Clickjacking protection</a></li>
<li class="toctree-l4"><a class="reference internal" href="#cms-template-context-variable">CMS_TEMPLATE context variable</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#upgrading-from-2-4">Upgrading from 2.4</a></li>
<li class="toctree-l3"><a class="reference internal" href="#pending-deprecations">Pending deprecations</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#placeholder-tags">placeholder_tags</a></li>
<li class="toctree-l4"><a class="reference internal" href="#cms-context-processors-media">cms.context_processors.media</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="2.4.html">2.4 release notes</a></li>
<li class="toctree-l2"><a class="reference internal" href="2.3.4.html">2.3.4 release notes</a></li>
<li class="toctree-l2"><a class="reference internal" href="2.3.3.html">2.3.3 release notes</a></li>
<li class="toctree-l2"><a class="reference internal" href="2.3.2.html">2.3.2 release notes</a></li>
<li class="toctree-l2"><a class="reference internal" href="2.3.html">2.3 release notes</a></li>
<li class="toctree-l2"><a class="reference internal" href="2.2.html">2.2 release notes</a></li>
<li class="toctree-l2"><a class="reference internal" href="2.1.html">Upgrading from 2.1.x and Django 1.2.x</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../user/index.html">Using django CMS</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../index.html">django cms</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html">Docs</a> &raquo;</li>
      
          <li><a href="index.html">Release notes &amp; upgrade information</a> &raquo;</li>
      
    <li>3.0 release notes</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../_sources/upgrade/3.0.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="release-notes">
<span id="upgrade-to-3-0"></span><h1>3.0 release notes<a class="headerlink" href="#release-notes" title="Permalink to this headline">¶</a></h1>
<div class="section" id="what-s-new-in-3-0">
<h2>What&#8217;s new in 3.0<a class="headerlink" href="#what-s-new-in-3-0" title="Permalink to this headline">¶</a></h2>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p>Upgrading from previous versions</p>
<p class="last">3.0 introduces some changes that <strong>require</strong> action if you are upgrading
from a previous version.</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last"><a class="reference internal" href="#upgrading-from-2-4"><span>See the quick upgrade guide</span></a></p>
</div>
<div class="section" id="new-frontend-editing">
<h3>New Frontend Editing<a class="headerlink" href="#new-frontend-editing" title="Permalink to this headline">¶</a></h3>
<p>django CMS 3.0 introduces a new frontend editing system as well as a
customisable Django admin skin (<a class="reference external" href="https://github.com/divio/djangocms-admin-style">djangocms_admin_style</a>).</p>
<p>In the new system, <code class="docutils literal"><span class="pre">Placeholders</span></code> and their plugins are no longer managed in
the admin site, but only from the frontend.</p>
<p>In addition, the system now offer two editing views:</p>
<ul class="simple">
<li><strong>content</strong> view, for editing the configuration and content of plugins.</li>
<li><strong>structure</strong> view, in which plugins can be added and rearranged.</li>
</ul>
<p>Page titles can also be modified directly from the frontend.</p>
</div>
<div class="section" id="new-toolbar">
<h3>New Toolbar<a class="headerlink" href="#new-toolbar" title="Permalink to this headline">¶</a></h3>
<p>The toolbar&#8217;s code has been simplified and its appearance refreshed. The
toolbar is now a more consistent management tool for adding and changing
objects. See <a class="reference internal" href="../how_to/toolbar.html"><em>Extending the Toolbar</em></a>.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p>Upgrading from previous versions</p>
<p class="last">3.0 now requires the <code class="docutils literal"><span class="pre">django.contrib.messages</span></code> application for the
toolbar to work. See <a class="reference internal" href="../how_to/install.html#enable-messages"><span>Enable messages</span></a> for how to
enable it.</p>
</div>
</div>
<div class="section" id="new-page-types">
<h3>New Page Types<a class="headerlink" href="#new-page-types" title="Permalink to this headline">¶</a></h3>
<p>You can now save pages as page types. If you then create a new page you may
select a page type and all plugins and contents will be pre-filled.</p>
</div>
<div class="section" id="experimental-python-3-3-support">
<h3>Experimental Python 3.3 support<a class="headerlink" href="#experimental-python-3-3-support" title="Permalink to this headline">¶</a></h3>
<p>We&#8217;ve added experimental support for Python 3.3. Support for Python 2.5 has
been dropped.</p>
</div>
<div class="section" id="better-multilingual-editing">
<h3>Better multilingual editing<a class="headerlink" href="#better-multilingual-editing" title="Permalink to this headline">¶</a></h3>
<p>Improvements in the django CMS environment for managing a multi-lingual site
include:</p>
<ul class="simple">
<li>a built-in language chooser for languages that are not yet public.</li>
<li>configurable behaviour of the admin site&#8217;s language when switching between
languages of edited content.</li>
</ul>
</div>
<div class="section" id="cms-seo-fields">
<h3>CMS_SEO_FIELDS<a class="headerlink" href="#cms-seo-fields" title="Permalink to this headline">¶</a></h3>
<p>The setting has been <strong>removed</strong>, along with the SEO fieldset in admin.</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">meta_description</span></code> field&#8217;s max_length is now 155 for optimal Google
integration.</li>
<li><code class="docutils literal"><span class="pre">page_title</span></code> is default on top.</li>
<li><code class="docutils literal"><span class="pre">meta_keywords</span></code> field has been removed, as it no longer serves any purpose.</li>
</ul>
</div>
<div class="section" id="cms-menu-title-overwrite">
<h3>CMS_MENU_TITLE_OVERWRITE<a class="headerlink" href="#cms-menu-title-overwrite" title="Permalink to this headline">¶</a></h3>
<p>New default for this setting is <code class="docutils literal"><span class="pre">True</span></code>.</p>
</div>
<div class="section" id="plugin-fallback-languages">
<h3>Plugin fallback languages<a class="headerlink" href="#plugin-fallback-languages" title="Permalink to this headline">¶</a></h3>
<p>It&#8217;s now possible to specify fallback languages for a placeholder if the placeholder
is empty for the current language. This must be activated in
<a class="reference internal" href="../reference/configuration.html#std:setting-CMS_PLACEHOLDER_CONF"><code class="xref std std-setting docutils literal"><span class="pre">CMS_PLACEHOLDER_CONF</span></code></a> per placeholder. It defaults to <code class="docutils literal"><span class="pre">False</span></code> to
maintain pre-3.0 behaviour.</p>
</div>
<div class="section" id="language-chooser">
<h3>language_chooser<a class="headerlink" href="#language-chooser" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal"><span class="pre">language_chooser</span></code> template tag now only displays languages that are
public. Use the toolbar language chooser to change the language to non-public
languages.</p>
</div>
<div class="section" id="undo-and-redo">
<h3>Undo and Redo<a class="headerlink" href="#undo-and-redo" title="Permalink to this headline">¶</a></h3>
<p>If you have <code class="docutils literal"><span class="pre">django-reversion</span></code> installed you now have <strong>undo</strong> and <strong>redo</strong>
options available directly in the toolbar. These can now revert <em>plugin</em>
content as well as <em>page</em> content.</p>
</div>
<div class="section" id="plugins-removed">
<span id="ex-core-plugins"></span><h3>Plugins removed<a class="headerlink" href="#plugins-removed" title="Permalink to this headline">¶</a></h3>
<p>We have removed plugins from the core. This is not because you are not
expected to use them, but because django CMS should not impose unnecessary
choices about what to install upon its adopters.</p>
<p>The most significant of these removals is <code class="docutils literal"><span class="pre">cms.plugins.text</span></code>.</p>
<p>We provide <code class="docutils literal"><span class="pre">djangocms-text-ckeditor</span></code>, a CKEditor-based Text Plugin. It&#8217;s
available from <a class="reference external" href="https://github.com/divio/djangocms-text-ckeditor">https://github.com/divio/djangocms-text-ckeditor</a>. You may of
course use your preferred editor; others are available.</p>
<p>Furthermore, we removed the following plugins from the core and moved them into
separate repositories.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">In order to update from the old <code class="docutils literal"><span class="pre">cms.plugins.X</span></code> to the new
<code class="docutils literal"><span class="pre">djangocms_X</span></code> plugins, simply install the new plugin, remove the old
<code class="docutils literal"><span class="pre">cms.plugins.X</span></code> from <code class="docutils literal"><span class="pre">settings.INSTALLED_APPS</span></code> and add the new one
to it. Then run the migrations (<code class="docutils literal"><span class="pre">python</span> <span class="pre">manage.py</span> <span class="pre">migrate</span> <span class="pre">djangocms_X</span></code>).</p>
</div>
<div class="section" id="file-plugin">
<h4>File Plugin<a class="headerlink" href="#file-plugin" title="Permalink to this headline">¶</a></h4>
<p>We removed the file plugin (<code class="docutils literal"><span class="pre">cms.plugins.file</span></code>). Its new location is at:</p>
<ul class="simple">
<li><a class="reference external" href="https://github.com/divio/djangocms-file">https://github.com/divio/djangocms-file</a></li>
</ul>
<p>As an alternative, you could also use the following (yet you will not be able
to keep your existing files from the old <code class="docutils literal"><span class="pre">cms.plugins.file</span></code>!)</p>
<ul class="simple">
<li><a class="reference external" href="https://github.com/stefanfoulis/django-filer">https://github.com/stefanfoulis/django-filer</a></li>
</ul>
</div>
<div class="section" id="flash-plugin">
<h4>Flash Plugin<a class="headerlink" href="#flash-plugin" title="Permalink to this headline">¶</a></h4>
<p>We removed the flash plugin (<code class="docutils literal"><span class="pre">cms.plugins.flash</span></code>). Its new location is at:</p>
<ul class="simple">
<li><a class="reference external" href="https://github.com/divio/djangocms-flash">https://github.com/divio/djangocms-flash</a></li>
</ul>
</div>
<div class="section" id="googlemap-plugin">
<h4>Googlemap Plugin<a class="headerlink" href="#googlemap-plugin" title="Permalink to this headline">¶</a></h4>
<p>We removed the Googlemap plugin (<code class="docutils literal"><span class="pre">cms.plugins.googlemap</span></code>).
Its new location is at:</p>
<ul class="simple">
<li><a class="reference external" href="https://github.com/divio/djangocms-googlemap">https://github.com/divio/djangocms-googlemap</a></li>
</ul>
</div>
<div class="section" id="inherit-plugin">
<h4>Inherit Plugin<a class="headerlink" href="#inherit-plugin" title="Permalink to this headline">¶</a></h4>
<p>We removed the inherit plugin (<code class="docutils literal"><span class="pre">cms.plugins.inherit</span></code>).
Its new location is at:</p>
<ul class="simple">
<li><a class="reference external" href="https://github.com/divio/djangocms-inherit">https://github.com/divio/djangocms-inherit</a></li>
</ul>
</div>
<div class="section" id="picture-plugin">
<h4>Picture Plugin<a class="headerlink" href="#picture-plugin" title="Permalink to this headline">¶</a></h4>
<p>We removed the picture plugin (<code class="docutils literal"><span class="pre">cms.plugins.picture</span></code>).
Its new location is at:</p>
<ul class="simple">
<li><a class="reference external" href="https://github.com/divio/djangocms-picture">https://github.com/divio/djangocms-picture</a></li>
</ul>
</div>
<div class="section" id="teaser-plugin">
<h4>Teaser Plugin<a class="headerlink" href="#teaser-plugin" title="Permalink to this headline">¶</a></h4>
<p>We removed the teaser plugin (<code class="docutils literal"><span class="pre">cms.plugins.teaser</span></code>).
Its new location is at:</p>
<ul class="simple">
<li><a class="reference external" href="https://github.com/divio/djangocms-teaser">https://github.com/divio/djangocms-teaser</a></li>
</ul>
</div>
<div class="section" id="video-plugin">
<h4>Video Plugin<a class="headerlink" href="#video-plugin" title="Permalink to this headline">¶</a></h4>
<p>We removed the video plugin (<code class="docutils literal"><span class="pre">cms.plugins.video</span></code>). Its new location is at:</p>
<ul class="simple">
<li><a class="reference external" href="https://github.com/divio/djangocms-video">https://github.com/divio/djangocms-video</a></li>
</ul>
</div>
<div class="section" id="link-plugin">
<h4>Link Plugin<a class="headerlink" href="#link-plugin" title="Permalink to this headline">¶</a></h4>
<p>We removed the link plugin (<code class="docutils literal"><span class="pre">cms.plugins.link</span></code>). Its new location is at:</p>
<ul class="simple">
<li><a class="reference external" href="https://github.com/divio/djangocms-link">https://github.com/divio/djangocms-link</a></li>
</ul>
</div>
<div class="section" id="snippet-plugin">
<h4>Snippet Plugin<a class="headerlink" href="#snippet-plugin" title="Permalink to this headline">¶</a></h4>
<p>We removed the snippet plugin (<code class="docutils literal"><span class="pre">cms.plugins.snippet</span></code>).
Its new location is at:</p>
<ul class="simple">
<li><a class="reference external" href="https://github.com/divio/djangocms-snippet">https://github.com/divio/djangocms-snippet</a></li>
</ul>
<p>As an alternative, you could also use the following (yet you will not be able
to keep your existing files from the old <code class="docutils literal"><span class="pre">cms.plugins.snippet</span></code>!)</p>
<ul class="simple">
<li><a class="reference external" href="https://github.com/pbs/django-cms-smartsnippets">https://github.com/pbs/django-cms-smartsnippets</a></li>
</ul>
</div>
<div class="section" id="twitter-plugin">
<span id="cmsplugin-twitter-removed"></span><h4>Twitter Plugin<a class="headerlink" href="#twitter-plugin" title="Permalink to this headline">¶</a></h4>
<p>Twitter disabled V1 of their API, thus we&#8217;ve removed the twitter plugin
(<code class="docutils literal"><span class="pre">cms.plugins.twitter</span></code>) completely.</p>
<p>For alternatives have a look at these plugins:</p>
<ul class="simple">
<li><a class="reference external" href="https://github.com/nephila/djangocms_twitter">https://github.com/nephila/djangocms_twitter</a></li>
<li><a class="reference external" href="https://github.com/changer/cmsplugin-twitter">https://github.com/changer/cmsplugin-twitter</a></li>
</ul>
</div>
</div>
<div class="section" id="plugin-context-processors-take-a-new-argument">
<h3>Plugin Context Processors take a new argument<a class="headerlink" href="#plugin-context-processors-take-a-new-argument" title="Permalink to this headline">¶</a></h3>
<p><a class="reference internal" href="../how_to/custom_plugins.html#plugin-context-processors"><span>Plugin Context</span></a> have had an argument added so that the rest
of the context is available to them. If you have existing plugin context
processors you will need to change their function signature to add the extra
argument.</p>
</div>
<div class="section" id="apphooks">
<h3>Apphooks<a class="headerlink" href="#apphooks" title="Permalink to this headline">¶</a></h3>
<p>Apphooks have moved from the title to the page model. This means you can no
longer have separate apphooks for each language. A new <code class="docutils literal"><span class="pre">application</span> <span class="pre">instance</span> <span class="pre">name</span></code>
field has been added.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The reverse id is not used for the namespace any more. If you used
namespaced apphooks before, be sure to update your pages and fill out the
namespace fields.</p>
</div>
<p>If you use apphook apps with <code class="docutils literal"><span class="pre">app_name</span></code> for app namespaces, be sure to fill
out the instance namespace field <code class="docutils literal"><span class="pre">application</span> <span class="pre">instance</span> <span class="pre">name</span></code> as it&#8217;s now
required to have a namespace defined if you use app namespaces.</p>
<p>For further reading about application namespaces, please refer to the Django
documentation on the subject at <a class="reference external" href="https://docs.djangoproject.com/en/dev/topics/http/urls/#url-namespaces">https://docs.djangoproject.com/en/dev/topics/http/urls/#url-namespaces</a></p>
<p><code class="docutils literal"><span class="pre">request.current_app</span></code> has been removed. If you relied on this, use the
following code instead in your views:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">def</span> <span class="nf">my_view</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>
  <span class="n">current_app</span> <span class="o">=</span> <span class="n">resolve</span><span class="p">(</span><span class="n">request</span><span class="o">.</span><span class="n">path_info</span><span class="p">)</span><span class="o">.</span><span class="n">namespace</span>
  <span class="n">context</span> <span class="o">=</span> <span class="n">RequestContext</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">current_app</span><span class="o">=</span><span class="n">current_app</span><span class="p">)</span>
  <span class="k">return</span> <span class="n">render_to_response</span><span class="p">(</span><span class="s">&quot;my_templace.html&quot;</span><span class="p">,</span> <span class="n">context_instance</span><span class="o">=</span><span class="n">context</span><span class="p">)</span>
</pre></div>
</div>
<p>Details can be found in <a class="reference internal" href="../how_to/apphooks.html#multi-apphook"><span>Attaching an application multiple times</span></a>.</p>
</div>
<div class="section" id="placeholderadmin">
<h3><code class="docutils literal"><span class="pre">PlaceholderAdmin</span></code><a class="headerlink" href="#placeholderadmin" title="Permalink to this headline">¶</a></h3>
<p><code class="docutils literal"><span class="pre">PlaceholderAdmin</span></code> now is deprecated. Instead of deriving from
<code class="docutils literal"><span class="pre">admin.ModelAdmin</span></code>, a new mixin class <code class="docutils literal"><span class="pre">PlaceholderAdminMixin</span></code> has been
introduced which shall be used together with <code class="docutils literal"><span class="pre">admin.ModelAdmin</span></code>. Therefore
when defining a model admin class containing a placeholder, now add
<code class="docutils literal"><span class="pre">PlaceholderAdminMixin</span></code> to the list of parent classes, together with
<code class="docutils literal"><span class="pre">admin.ModelAdmin</span></code>.</p>
<p><code class="docutils literal"><span class="pre">PlaceholderAdmin</span></code> doesn&#8217;t have language tabs any more and the plugin editor
is gone. The plugin API has changed and is now more consistent. <code class="docutils literal"><span class="pre">PageAdmin</span></code>
uses the same API as <code class="docutils literal"><span class="pre">PlaceholderAdminMixin</span></code> now. If your app talked with
the Plugin API directly be sure to read the code and the changed parameters.
If you use <code class="docutils literal"><span class="pre">PlaceholderFields</span></code> you should add the mixin
<code class="docutils literal"><span class="pre">PlaceholderAdminMixin</span></code> as it delivers the API for editing the plugins and
the placeholders.</p>
<p>The workflow in the future should look like this:</p>
<ol class="arabic simple">
<li>Create new model instances via a toolbar entry or via the admin.</li>
<li>Go to the view that represents the model instance and add content via
frontend editing.</li>
</ol>
</div>
<div class="section" id="placeholder-object-permissions">
<h3>Placeholder object permissions<a class="headerlink" href="#placeholder-object-permissions" title="Permalink to this headline">¶</a></h3>
<p>In addition to model level permissions, <code class="docutils literal"><span class="pre">Placeholder</span></code> now checks if a user
has permissions on a specific object of that model. Details can be found here
in <a class="reference internal" href="../how_to/placeholders.html#placeholder-object-permissions"><span>Permissions</span></a>.</p>
</div>
<div class="section" id="placeholders-are-pre-fillable-with-default-plugins">
<h3>Placeholders are pre-fillable with default plugins<a class="headerlink" href="#placeholders-are-pre-fillable-with-default-plugins" title="Permalink to this headline">¶</a></h3>
<p>In CMS_PLACEHOLDER_CONF, for each placeholder configuration, you can specify
via &#8216;default_plugins&#8217; a list of plugins to automatically add to the
placeholder if empty. See <a class="reference internal" href="../reference/configuration.html#placeholder-default-plugins"><span>default_plugins in CMS_PLACEHOLDER_CONF</span></a>.</p>
</div>
<div class="section" id="custom-modules-and-plugin-labels-in-the-toolbar-ui">
<h3>Custom modules and plugin labels in the toolbar UI<a class="headerlink" href="#custom-modules-and-plugin-labels-in-the-toolbar-ui" title="Permalink to this headline">¶</a></h3>
<p>It&#8217;s now possible to configure module and plugins labels to show in the toolbar
UI. See <a class="reference internal" href="../reference/configuration.html#std:setting-CMS_PLACEHOLDER_CONF"><code class="xref std std-setting docutils literal"><span class="pre">CMS_PLACEHOLDER_CONF</span></code></a> for details.</p>
</div>
<div class="section" id="new-copy-lang-subcommand">
<h3>New <code class="docutils literal"><span class="pre">copy-lang</span></code> subcommand<a class="headerlink" href="#new-copy-lang-subcommand" title="Permalink to this headline">¶</a></h3>
<p>Added a management command to copy content (titles and plugins) from one
language to another.</p>
<p>The command can be run with:</p>
<div class="highlight-python"><div class="highlight"><pre>manage.py cms copy_lang from_lang to_lang
</pre></div>
</div>
<p>Please read <a class="reference internal" href="../reference/cli.html#cms-copy-lang-command"><span>cms copy lang</span></a> before using.</p>
</div>
<div class="section" id="frontend-editor-for-django-models">
<h3>Frontend editor for Django models<a class="headerlink" href="#frontend-editor-for-django-models" title="Permalink to this headline">¶</a></h3>
<p>Frontend editor is available for any Django model; see
<a class="reference internal" href="../how_to/frontend_models.html#frontend-editable-fields"><span>documentation</span></a> for details.</p>
</div>
<div class="section" id="new-page-related-name-to-site">
<h3>New <code class="docutils literal"><span class="pre">Page</span> <span class="pre">related_name</span></code> to <code class="docutils literal"><span class="pre">Site</span></code><a class="headerlink" href="#new-page-related-name-to-site" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal"><span class="pre">Page</span></code> object used to have the default <code class="docutils literal"><span class="pre">related_name</span></code> (<code class="docutils literal"><span class="pre">page</span></code>) to the
<code class="docutils literal"><span class="pre">Site</span></code> model which may cause clashing with other Django apps; the
<code class="docutils literal"><span class="pre">related_name</span></code> is now <code class="docutils literal"><span class="pre">djangocms_pages</span></code>.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p>Potential backward incompatibility</p>
<p class="last">This change may cause you code to break, if you relied on <code class="docutils literal"><span class="pre">Site.page_set</span></code>
to access cms pages from a <code class="docutils literal"><span class="pre">Site</span></code> model instance: update it to use
<code class="docutils literal"><span class="pre">Site.djangocms_pages</span></code></p>
</div>
</div>
<div class="section" id="moved-all-template-tags-to-cms-tags">
<h3>Moved all template tags to <code class="docutils literal"><span class="pre">cms_tags</span></code><a class="headerlink" href="#moved-all-template-tags-to-cms-tags" title="Permalink to this headline">¶</a></h3>
<p>All template tags are now in the <code class="docutils literal"><span class="pre">cms_tags</span></code> namespace so to use any cms
template tags you can just do:</p>
<div class="highlight-html+django"><div class="highlight"><pre><span class="cp">{%</span> <span class="k">load</span> <span class="nv">cms_tags</span> <span class="cp">%}</span>
</pre></div>
</div>
</div>
<div class="section" id="getter-and-setter-for-translatable-plugin-content">
<h3><code class="docutils literal"><span class="pre">getter</span></code> and <code class="docutils literal"><span class="pre">setter</span></code> for translatable plugin content<a class="headerlink" href="#getter-and-setter-for-translatable-plugin-content" title="Permalink to this headline">¶</a></h3>
<p>A plugin&#8217;s translatable content can now be read and set through <code class="xref py py-meth docutils literal"><span class="pre">get_translatable_content()</span></code>
and <code class="xref py py-meth docutils literal"><span class="pre">set_translatable_content()</span></code>. See <a class="reference internal" href="../how_to/custom_plugins.html#custom-plugins"><span>Custom Plugins</span></a> for more info.</p>
</div>
<div class="section" id="no-more-db-table-name-magic-for-plugins">
<h3>No more DB table-name magic for plugins<a class="headerlink" href="#no-more-db-table-name-magic-for-plugins" title="Permalink to this headline">¶</a></h3>
<p>Since django CMS 2.0 plugins had their table names start with <cite>cmsplugin_</cite>. We removed this behaviour
in 3.0 and will display a deprecation warning with the old and new table name. If your plugin uses
south for migrations create a new empty schema migration and rename the table by hand.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p>When working in the django shell or coding at low level, you <strong>must</strong>
trigger the backward compatible behaviour (a.k.a. magical rename
checking), otherwise non migrated plugins will fail.
To do this execute the following code:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">cms.plugin_pool</span> <span class="kn">import</span> <span class="n">plugin_pool</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plugin_pool</span><span class="o">.</span><span class="n">set_plugin_meta</span><span class="p">()</span>
</pre></div>
</div>
<p class="last">This code can be executed both in the shell or in your python
modules.</p>
</div>
</div>
<div class="section" id="added-support-for-custom-user-models">
<h3>Added support for custom user models<a class="headerlink" href="#added-support-for-custom-user-models" title="Permalink to this headline">¶</a></h3>
<p>Since Django 1.5 it has been possible to swap out the default User model for a custom user model.
This is now fully supported by DjangoCMS, and in addition a new option has been added to the test
runner to allow specifying the user model to use for tests (e.g. <code class="docutils literal"><span class="pre">--user=customuserapp.User</span></code>)</p>
</div>
<div class="section" id="page-caching">
<h3>Page caching<a class="headerlink" href="#page-caching" title="Permalink to this headline">¶</a></h3>
<p>Pages are now cached by default.
You can disable this behaviour with <a class="reference internal" href="../reference/configuration.html#std:setting-CMS_PAGE_CACHE"><code class="xref std std-setting docutils literal"><span class="pre">CMS_PAGE_CACHE</span></code></a></p>
</div>
<div class="section" id="placeholder-caching">
<h3>Placeholder caching<a class="headerlink" href="#placeholder-caching" title="Permalink to this headline">¶</a></h3>
<p>Plugins have a new default property: <cite>cache=True</cite>. If all plugins in a placeholder have set this to
<code class="docutils literal"><span class="pre">True</span></code> the whole placeholder will be cached if the toolbar is not in edit mode.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">If your plugin is dynamic and processes current user or request data be sure to set <code class="docutils literal"><span class="pre">cache=False</span></code></p>
</div>
</div>
<div class="section" id="plugin-caching">
<h3>Plugin caching<a class="headerlink" href="#plugin-caching" title="Permalink to this headline">¶</a></h3>
<p>Plugins have a new attribute: <code class="docutils literal"><span class="pre">cache=True</span></code>. Its default value can be configured with <a class="reference internal" href="../reference/configuration.html#std:setting-CMS_PLUGIN_CACHE"><code class="xref std std-setting docutils literal"><span class="pre">CMS_PLUGIN_CACHE</span></code></a>.</p>
</div>
<div class="section" id="per-page-clickjacking-protection">
<h3>Per-page Clickjacking protection<a class="headerlink" href="#per-page-clickjacking-protection" title="Permalink to this headline">¶</a></h3>
<p>An advanced option has been added which controls, on a per-page basis, the
<code class="docutils literal"><span class="pre">X-Frame-Options</span></code> header. The default setting is to inherit from the parent
page. If no ancestor specifies a value, no header will be set, allowing Django&#8217;s
own middleware to handle it (if enabled).</p>
</div>
<div class="section" id="cms-template-context-variable">
<h3>CMS_TEMPLATE context variable<a class="headerlink" href="#cms-template-context-variable" title="Permalink to this headline">¶</a></h3>
<p>A new <code class="docutils literal"><span class="pre">CMS_TEMPLATE</span></code> variable is now available in the context: it contains the path to the
current page template.
See <a class="reference internal" href="../how_to/templates.html#page-template"><span>CMS_TEMPLATE reference</span></a> for details.</p>
</div>
</div>
<div class="section" id="upgrading-from-2-4">
<span id="id1"></span><h2>Upgrading from 2.4<a class="headerlink" href="#upgrading-from-2-4" title="Permalink to this headline">¶</a></h2>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">There are reports that upgrading the CMS from 2.4 to 3.0 may fail if
Django Debug Toolbar is installed. Please remove/disable Django Debug
Toolbar and other non-essential apps before attempting to upgrade, then
once complete, re-enable them following the <a class="reference external" href="http://django-debug-toolbar.readthedocs.org/en/1.0/installation.html#explicit-setup">&#8220;Explicit setup&#8221;</a>
instructions.</p>
</div>
<p>If you want to upgrade from version 2.4 to 3.0, there&#8217;s a few things you need to do.
Start of by updating the cms&#8217; package:</p>
<div class="highlight-python"><div class="highlight"><pre>pip install django-cms==3.0
</pre></div>
</div>
<p>Next, you need to make the following changes in your <code class="docutils literal"><span class="pre">settings.py</span></code></p>
<ul>
<li><p class="first"><code class="docutils literal"><span class="pre">settings.INSTALLED_APPS</span></code></p>
<blockquote>
<div><ul class="simple">
<li>Remove <code class="docutils literal"><span class="pre">cms.plugin.twitter</span></code>. This package has been deprecated, see <a class="reference internal" href="#cmsplugin-twitter-removed"><span>Twitter Plugin</span></a>.</li>
<li>Rename all the other <code class="docutils literal"><span class="pre">cms.plugins.X</span></code> to <code class="docutils literal"><span class="pre">djangocms_X</span></code>, see <a class="reference internal" href="#ex-core-plugins"><span>Plugins removed</span></a>.</li>
</ul>
</div></blockquote>
</li>
<li><p class="first">settings.CONTEXT_PROCESSORS</p>
<blockquote>
<div><ul class="simple">
<li>Replace <code class="docutils literal"><span class="pre">cms.context_processors.media</span></code> with <code class="docutils literal"><span class="pre">cms.context_processors.cms_settings</span></code></li>
</ul>
</div></blockquote>
</li>
</ul>
<p>Afterwards, install all your previously renamed ex-core plugins (<code class="docutils literal"><span class="pre">djangocms-whatever</span></code>). Here&#8217;s a
full list, but you probably don&#8217;t need all of them:</p>
<div class="highlight-python"><div class="highlight"><pre>pip install djangocms-file
pip install djangocms-flash
pip install djangocms-googlemap
pip install djangocms-inherit
pip install djangocms-picture
pip install djangocms-teaser
pip install djangocms-video
pip install djangocms-link
pip install djangocms-snippet
</pre></div>
</div>
<p>Also, please check your templates to make sure that you haven&#8217;t put the <code class="docutils literal"><span class="pre">{%</span> <span class="pre">cms_toolbar</span> <span class="pre">%}</span></code> tag into a <code class="docutils literal"><span class="pre">{%</span> <span class="pre">block</span> <span class="pre">%}</span></code>
tag. This is not allowed in 3.0 any more.</p>
<p>To finish up, please update your database:</p>
<div class="highlight-python"><div class="highlight"><pre>python manage.py syncdb
python manage.py migrate  (answer yes if your prompted to delete stale content types)
</pre></div>
</div>
<p>Finally, your existing pages will be unpublished, so publish them with the <code class="docutils literal"><span class="pre">publisher</span></code> command:</p>
<div class="highlight-python"><div class="highlight"><pre>python manage.py cms publisher_publish
</pre></div>
</div>
<p>That&#8217;s it!</p>
</div>
<div class="section" id="pending-deprecations">
<h2>Pending deprecations<a class="headerlink" href="#pending-deprecations" title="Permalink to this headline">¶</a></h2>
<div class="section" id="placeholder-tags">
<h3>placeholder_tags<a class="headerlink" href="#placeholder-tags" title="Permalink to this headline">¶</a></h3>
<p><code class="docutils literal"><span class="pre">placeholder_tags</span></code> is now deprecated, the <code class="docutils literal"><span class="pre">render_placeholder</span></code> template
tag can now be loaded from the <code class="docutils literal"><span class="pre">cms_tags</span></code> template tag library.</p>
<p>Using <code class="docutils literal"><span class="pre">placeholder_tags</span></code> will cause a <code class="docutils literal"><span class="pre">DeprecationWarning</span></code> to occur.</p>
<p><code class="docutils literal"><span class="pre">placeholder_tags</span></code> will be removed in version 3.1.</p>
</div>
<div class="section" id="cms-context-processors-media">
<h3>cms.context_processors.media<a class="headerlink" href="#cms-context-processors-media" title="Permalink to this headline">¶</a></h3>
<p><code class="docutils literal"><span class="pre">cms.context_processors.media</span></code> is now deprecated, please use
<code class="docutils literal"><span class="pre">cms.context_processors.cms_settings</span></code> by updating <code class="docutils literal"><span class="pre">TEMPLATE_CONTEXT_PROCESSORS</span></code>
in the settings</p>
<p>Using <code class="docutils literal"><span class="pre">cms.context_processors.media</span></code> will cause a <code class="docutils literal"><span class="pre">DeprecationWarning</span></code> to occur.</p>
<p><code class="docutils literal"><span class="pre">cms.context_processors.media</span></code> will be removed in version 3.1.</p>
</div>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="2.4.html" class="btn btn-neutral float-right" title="2.4 release notes" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="3.0.3.html" class="btn btn-neutral" title="3.0.3 release notes" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2009-2015, Patrick Lauber.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'3.3.0.dev4',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>