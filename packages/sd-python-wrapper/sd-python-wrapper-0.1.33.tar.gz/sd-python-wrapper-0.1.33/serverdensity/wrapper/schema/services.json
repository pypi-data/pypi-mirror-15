{
    "$schema": "http://json-schema.org/draft-04/schema#",
    "title": "Services",
    "type": "object",
    "definitions": {
        "locations": {
            "type": "array",
            "items": {
                "type": "string",
                "enum": [
                    "syd-vul",
                    "syd",
                    "spa",
                    "vdl-edi",
                    "sha-cvh",
                    "fra-amz",
                    "fra-edi",
                    "sjc-pla",
                    "hkg-edi",
                    "ice-edi",
                    "dub",
                    "mil-edi",
                    "osa-azr",
                    "tyo",
                    "tyo-vul",
                    "par-edi",
                    "ams-pla",
                    "ams-edi",
                    "akl-zap",
                    "sng",
                    "jhb-elh",
                    "mad-edi",
                    "sto-edi",
                    "msk-edi",
                    "man-34s",
                    "lon",
                    "lon-vul",
                    "chi",
                    "dal-srv",
                    "lax-vul",
                    "nyc-ovi",
                    "nca",
                    "sea-vul",
                    "vir"
                ]
            }
        },
        "name": {
            "type": "string"
        },
        "checkType": {
            "type": "string",
            "enum": ["http", "tcp"]
        },
        "timeout": {
            "type": "number"
        },
        "slowThreshold": {
            "type": "number"
        },
        "tags": {
            "type": ["array", "null"],
            "items": {
                "type": "string",
                "format": "mongoId"
            }
        },
        "group": {
            "type": ["string", "null"]
        },
        "auth": {
            "type": ["object", "null"],
            "properties": {
                "username": {
                    "type": "string"
                },
                "password": {
                    "type": "string"
                }
            }
        },
        "tcp": {
            "type": "object",
            "properties": {
                "name": { "$ref": "#/definitions/name" },
                "checkType": { "$ref": "#/definitions/checkType" },
                "timeout": { "$ref": "#/definitions/timeout" },
                "checkLocations": { "$ref": "#/definitions/locations" },
                "slowThreshold": { "$ref": "#/definitions/slowThreshold" },
                "tags": { "$ref": "#/definitions/tags" },
                "group": { "$ref": "#/definitions/group" },
                "auth": { "$ref": "#/definitions/auth" },
                "host": {
                    "type": "string"
                },
                "port": {
                    "type": "string"
                },
                "data": {
                    "type": "string"
                }
            },
            "required": [
                "name", "checkType", "timeout", "checkLocations",
                "host", "port", "data"
            ]
        },
        "http": {
            "type": "object",
            "properties": {
                "name": { "$ref": "#/definitions/name" },
                "checkType": { "$ref": "#/definitions/checkType" },
                "timeout": { "$ref": "#/definitions/timeout" },
                "checkLocations": { "$ref": "#/definitions/locations" },
                "slowThreshold": { "$ref": "#/definitions/slowThreshold" },
                "tags": { "$ref": "#/definitions/tags" },
                "group": { "$ref": "#/definitions/group" },
                "auth": { "$ref": "#/definitions/auth" },
                "checkMethod": {
                    "type": "string",
                    "enum": ["GET", "POST", "PUT", "DELETE"]
                },
                "checkUrl": {
                    "type": "string"
                },
                "body": {
                    "type": "string"
                },
                "validateCert": {
                    "type": "boolean"
                },
                "headers": {
                  "type": ["array", "null"]
                }
            },
            "required": [
                "name", "checkType", "timeout", "checkUrl", "checkLocations",
                "checkMethod", "slowThreshold"
            ]
        }
    },
    "oneOf": [
        {"$ref": "#/definitions/http"},
        {"$ref": "#/definitions/tcp"}
    ]
}
