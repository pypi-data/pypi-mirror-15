
from matplotlib.colors import LinearSegmentedColormap
from numpy import nan, inf

# Used to reconstruct the colormap in pycam02ucs.cm.viscm
parameters = {'xp': [-10.759647508678512, -7.7450049591522259, -35.630448542270216, -36.384109179651801, -12.643799102132419, 0.16843173335422534],
              'yp': [4.4358311800172601, -7.2459086993970345, 11.972437553832947, 38.350559862187794, 28.929801894918199, -0.086132644272140624],
              'min_Jp': 15.0,
              'max_Jp': 95.0}

cm_data = [[ 0.06465487,  0.13942542,  0.09733674],
       [ 0.06800991,  0.1422532 ,  0.10174323],
       [ 0.07126164,  0.14508592,  0.10614131],
       [ 0.07439727,  0.14792833,  0.11052665],
       [ 0.07740001,  0.1507855 ,  0.11490182],
       [ 0.08024483,  0.15366453,  0.11926611],
       [ 0.08289753,  0.15657543,  0.12360787],
       [ 0.08531266,  0.15953083,  0.12791351],
       [ 0.08742931,  0.16254708,  0.13216343],
       [ 0.0891794 ,  0.16564346,  0.1363167 ],
       [ 0.09051082,  0.16883656,  0.14031223],
       [ 0.09142027,  0.17213148,  0.14408525],
       [ 0.09198268,  0.17551374,  0.14759155],
       [ 0.09231201,  0.17895687,  0.15083239],
       [ 0.09250359,  0.18243654,  0.15384151],
       [ 0.09261671,  0.1859363 ,  0.15665997],
       [ 0.09268586,  0.18944591,  0.15932347],
       [ 0.09272669,  0.19296   ,  0.1618596 ],
       [ 0.09274415,  0.19647609,  0.16428844],
       [ 0.09275279,  0.19999027,  0.16662694],
       [ 0.09274201,  0.20350402,  0.16888481],
       [ 0.09271437,  0.20701637,  0.17107107],
       [ 0.09267128,  0.21052677,  0.17319286],
       [ 0.09261146,  0.21403526,  0.1752554 ],
       [ 0.09252588,  0.21754346,  0.17726085],
       [ 0.09243137,  0.22104808,  0.17921715],
       [ 0.09231159,  0.22455219,  0.1811231 ],
       [ 0.09216685,  0.2280557 ,  0.18298117],
       [ 0.09200078,  0.23155793,  0.18479449],
       [ 0.09181595,  0.23505844,  0.1865657 ],
       [ 0.09160536,  0.23855854,  0.18829422],
       [ 0.09136902,  0.24205824,  0.18998136],
       [ 0.09110688,  0.24555759,  0.19162819],
       [ 0.09081887,  0.24905664,  0.19323565],
       [ 0.09050485,  0.25255545,  0.19480453],
       [ 0.09016673,  0.25605376,  0.1963362 ],
       [ 0.08980302,  0.25955188,  0.19783079],
       [ 0.0894123 ,  0.2630501 ,  0.19928831],
       [ 0.08899454,  0.26654846,  0.20070919],
       [ 0.08854972,  0.27004703,  0.20209376],
       [ 0.08807786,  0.27354587,  0.20344233],
       [ 0.08757904,  0.27704501,  0.20475512],
       [ 0.08705334,  0.2805445 ,  0.20603233],
       [ 0.08650093,  0.28404439,  0.20727412],
       [ 0.08592203,  0.2875447 ,  0.20848059],
       [ 0.08531691,  0.29104546,  0.20965184],
       [ 0.08468592,  0.2945467 ,  0.21078792],
       [ 0.08402949,  0.29804844,  0.21188885],
       [ 0.08334814,  0.30155068,  0.21295465],
       [ 0.08264246,  0.30505343,  0.21398529],
       [ 0.08191318,  0.30855668,  0.21498073],
       [ 0.08116109,  0.31206043,  0.21594092],
       [ 0.08038716,  0.31556467,  0.21686579],
       [ 0.07959245,  0.31906936,  0.21775523],
       [ 0.07877817,  0.32257449,  0.21860914],
       [ 0.07794571,  0.32608002,  0.2194274 ],
       [ 0.0770966 ,  0.32958591,  0.22020987],
       [ 0.07623276,  0.3330921 ,  0.22095645],
       [ 0.07535586,  0.33659856,  0.22166689],
       [ 0.07446799,  0.34010523,  0.22234094],
       [ 0.07357152,  0.34361207,  0.22297843],
       [ 0.07266914,  0.34711898,  0.22357912],
       [ 0.0717638 ,  0.35062589,  0.22414279],
       [ 0.07085876,  0.35413271,  0.2246692 ],
       [ 0.06995764,  0.35763935,  0.2251581 ],
       [ 0.06906442,  0.36114569,  0.22560922],
       [ 0.06818346,  0.36465162,  0.22602227],
       [ 0.06731954,  0.36815702,  0.22639697],
       [ 0.06647789,  0.37166176,  0.22673301],
       [ 0.06566422,  0.37516569,  0.22703007],
       [ 0.0648847 ,  0.37866867,  0.2272878 ],
       [ 0.06414603,  0.38217053,  0.22750587],
       [ 0.06345543,  0.3856711 ,  0.22768391],
       [ 0.06282064,  0.38917018,  0.22782155],
       [ 0.06224993,  0.39266759,  0.22791841],
       [ 0.06175208,  0.3961631 ,  0.22797408],
       [ 0.06133635,  0.39965648,  0.22798815],
       [ 0.06101247,  0.4031475 ,  0.22796021],
       [ 0.06079055,  0.40663588,  0.22788983],
       [ 0.06068103,  0.41012134,  0.22777658],
       [ 0.06069458,  0.41360359,  0.22762002],
       [ 0.06084201,  0.41708229,  0.22741971],
       [ 0.06113417,  0.4205571 ,  0.2271752 ],
       [ 0.06158177,  0.42402764,  0.22688608],
       [ 0.0621953 ,  0.4274935 ,  0.22655192],
       [ 0.06298489,  0.43095426,  0.22617231],
       [ 0.06396014,  0.43440943,  0.22574688],
       [ 0.06513005,  0.43785852,  0.22527528],
       [ 0.06650289,  0.44130098,  0.22475721],
       [ 0.06808613,  0.44473621,  0.22419243],
       [ 0.06988641,  0.44816359,  0.22358074],
       [ 0.07190606,  0.45158279,  0.2229184 ],
       [ 0.07415314,  0.45499276,  0.22220791],
       [ 0.07663236,  0.45839264,  0.2214498 ],
       [ 0.07934719,  0.46178153,  0.22064431],
       [ 0.08230042,  0.46515848,  0.2197919 ],
       [ 0.08549425,  0.46852244,  0.21889323],
       [ 0.08892766,  0.47187284,  0.21794076],
       [ 0.092606  ,  0.47520786,  0.21694275],
       [ 0.09653071,  0.4785261 ,  0.21590121],
       [ 0.10070281,  0.48182617,  0.21481686],
       [ 0.10512423,  0.48510684,  0.21368175],
       [ 0.10979746,  0.48836575,  0.21251   ],
       [ 0.1147243 ,  0.49160107,  0.21130261],
       [ 0.1199102 ,  0.49481083,  0.21005363],
       [ 0.12535429,  0.49799231,  0.20878246],
       [ 0.13106582,  0.50114305,  0.20748019],
       [ 0.13704257,  0.50426008,  0.20616813],
       [ 0.14329549,  0.50734017,  0.20484317],
       [ 0.14981933,  0.51038017,  0.20353109],
       [ 0.15662908,  0.51337596,  0.20223038],
       [ 0.16371617,  0.51632419,  0.20097231],
       [ 0.17108016,  0.51922107,  0.19977736],
       [ 0.17872541,  0.52206225,  0.19866384],
       [ 0.1866351 ,  0.52484485,  0.19766987],
       [ 0.19479344,  0.52756617,  0.19683031],
       [ 0.20317748,  0.53022449,  0.19618311],
       [ 0.21175544,  0.53281952,  0.19576836],
       [ 0.22048692,  0.53535271,  0.19562556],
       [ 0.22932431,  0.53782741,  0.19579045],
       [ 0.23821477,  0.54024896,  0.19629203],
       [ 0.24710649,  0.54262398,  0.19714901],
       [ 0.25595176,  0.54495989,  0.19836912],
       [ 0.26471017,  0.54726427,  0.1999496 ],
       [ 0.27335064,  0.54954426,  0.20187885],
       [ 0.28184489,  0.55180732,  0.20413927],
       [ 0.29017305,  0.55406011,  0.20670803],
       [ 0.29833961,  0.55630524,  0.20956019],
       [ 0.3063275 ,  0.55854926,  0.21267025],
       [ 0.31414624,  0.56079378,  0.21601403],
       [ 0.32179497,  0.56304223,  0.2195678 ],
       [ 0.32928616,  0.56529517,  0.22331154],
       [ 0.33661242,  0.56755713,  0.22722237],
       [ 0.34379973,  0.56982523,  0.23128776],
       [ 0.35084451,  0.57210278,  0.23548908],
       [ 0.35775027,  0.57439144,  0.23981051],
       [ 0.36453547,  0.57668912,  0.24424403],
       [ 0.37120567,  0.57899646,  0.24877859],
       [ 0.37776644,  0.58131397,  0.2534043 ],
       [ 0.38421878,  0.58364321,  0.25810981],
       [ 0.39057035,  0.5859839 ,  0.26288819],
       [ 0.39683057,  0.58833512,  0.26773504],
       [ 0.40300431,  0.59069697,  0.27264441],
       [ 0.40909626,  0.59306952,  0.27761105],
       [ 0.41511088,  0.59545276,  0.28263036],
       [ 0.42105242,  0.59784666,  0.28769828],
       [ 0.42692491,  0.60025116,  0.29281125],
       [ 0.43273214,  0.60266617,  0.29796616],
       [ 0.43847772,  0.6050916 ,  0.30316027],
       [ 0.44416502,  0.60752734,  0.3083912 ],
       [ 0.44979606,  0.60997363,  0.31365573],
       [ 0.45536991,  0.61243164,  0.31894807],
       [ 0.460894  ,  0.61489981,  0.32427081],
       [ 0.46637105,  0.617378  ,  0.32962258],
       [ 0.4718036 ,  0.61986606,  0.33500219],
       [ 0.47719404,  0.62236387,  0.3404086 ],
       [ 0.4825446 ,  0.62487129,  0.3458409 ],
       [ 0.48785181,  0.62739018,  0.35129179],
       [ 0.4931193 ,  0.6299199 ,  0.3567621 ],
       [ 0.49835277,  0.632459  ,  0.36225559],
       [ 0.50355399,  0.63500738,  0.36777178],
       [ 0.50872458,  0.63756493,  0.37331022],
       [ 0.5138555 ,  0.64013557,  0.37885659],
       [ 0.51895887,  0.64271528,  0.38442399],
       [ 0.52403609,  0.64530397,  0.39001222],
       [ 0.52908703,  0.64790212,  0.39561906],
       [ 0.53410455,  0.65051302,  0.40123216],
       [ 0.53909978,  0.65313272,  0.40686518],
       [ 0.54407376,  0.65576118,  0.41251796],
       [ 0.54901984,  0.65840151,  0.41817865],
       [ 0.55394301,  0.66105212,  0.4238528 ],
       [ 0.55884805,  0.66371137,  0.42954617],
       [ 0.56373022,  0.66638162,  0.4352497 ],
       [ 0.56859003,  0.66906306,  0.44096232],
       [ 0.57343436,  0.67175308,  0.44669382],
       [ 0.57825827,  0.67445417,  0.45243448],
       [ 0.58306231,  0.67716645,  0.45818362],
       [ 0.58785317,  0.67988728,  0.46395142],
       [ 0.59262398,  0.68262007,  0.46972443],
       [ 0.59737893,  0.68536326,  0.47550863],
       [ 0.60212264,  0.68811502,  0.48131131],
       [ 0.60684513,  0.6908803 ,  0.4871126 ],
       [ 0.61155682,  0.69365456,  0.49293073],
       [ 0.61625552,  0.69643909,  0.49876049],
       [ 0.62093751,  0.69923598,  0.5045933 ],
       [ 0.62561106,  0.70204153,  0.51044444],
       [ 0.63026811,  0.70485996,  0.51629654],
       [ 0.63491519,  0.70768834,  0.52216171],
       [ 0.63955187,  0.71052715,  0.52803814],
       [ 0.64417442,  0.71337854,  0.5339168 ],
       [ 0.64879075,  0.71623877,  0.53981363],
       [ 0.65339171,  0.71911279,  0.54570767],
       [ 0.6579862 ,  0.72199628,  0.5516175 ],
       [ 0.66256985,  0.72489176,  0.55753242],
       [ 0.66714416,  0.72779872,  0.56345482],
       [ 0.6717115 ,  0.73071613,  0.56938928],
       [ 0.6762672 ,  0.73364677,  0.57532385],
       [ 0.68081906,  0.73658663,  0.58127629],
       [ 0.68535775,  0.73954111,  0.58722297],
       [ 0.6898931 ,  0.742505  ,  0.59318716],
       [ 0.69441814,  0.74548244,  0.59915061],
       [ 0.69893832,  0.7484706 ,  0.6051262 ],
       [ 0.70345058,  0.75147145,  0.61110529],
       [ 0.70795684,  0.75448414,  0.61709193],
       [ 0.71245719,  0.75750886,  0.62308558],
       [ 0.71695072,  0.76054636,  0.62908292],
       [ 0.72143998,  0.76359538,  0.63509007],
       [ 0.72592191,  0.76665798,  0.64109775],
       [ 0.73040087,  0.76973176,  0.64711741],
       [ 0.73487225,  0.77281976,  0.65313506],
       [ 0.7393417 ,  0.77591873,  0.65916622],
       [ 0.74380355,  0.77903245,  0.66519346],
       [ 0.74826423,  0.78215708,  0.67123516],
       [ 0.75271748,  0.78529684,  0.67727157],
       [ 0.75717013,  0.78844758,  0.68332283],
       [ 0.76161569,  0.79161374,  0.68936796],
       [ 0.766061  ,  0.79479104,  0.69542782],
       [ 0.77049972,  0.79798395,  0.70148119],
       [ 0.77493838,  0.80118829,  0.70754867],
       [ 0.77937104,  0.80440834,  0.71360973],
       [ 0.78380373,  0.80764019,  0.71968383],
       [ 0.78823109,  0.81088776,  0.72575197],
       [ 0.79265842,  0.81414761,  0.73183168],
       [ 0.79708119,  0.81742314,  0.73790621],
       [ 0.80150378,  0.82071148,  0.74399044],
       [ 0.80592262,  0.82401542,  0.75007058],
       [ 0.81034106,  0.82733276,  0.75615819],
       [ 0.81475658,  0.83066557,  0.76224306],
       [ 0.81917142,  0.83401245,  0.76833281],
       [ 0.8235842 ,  0.83737465,  0.77442137],
       [ 0.82799596,  0.84075162,  0.78051193],
       [ 0.83240652,  0.84414374,  0.78660298],
       [ 0.83681567,  0.8475514 ,  0.79269283],
       [ 0.84122447,  0.85097403,  0.79878496],
       [ 0.84563146,  0.85441301,  0.8048724 ],
       [ 0.85003889,  0.85786678,  0.81096392],
       [ 0.85444409,  0.86133777,  0.81704697],
       [ 0.85885047,  0.8648234 ,  0.82313578],
       [ 0.86325419,  0.86832714,  0.82921213],
       [ 0.86765905,  0.87184603,  0.83529254],
       [ 0.87206215,  0.87538279,  0.84136252],
       [ 0.87646563,  0.87893584,  0.84743132],
       [ 0.8808681 ,  0.88250664,  0.85349135],
       [ 0.88527013,  0.88609495,  0.85954445],
       [ 0.88967173,  0.88970101,  0.86558981],
       [ 0.89407195,  0.89332593,  0.87162174],
       [ 0.89847203,  0.89696882,  0.87764591],
       [ 0.90286959,  0.90063216,  0.88364893],
       [ 0.90726648,  0.90431439,  0.88964052],
       [ 0.91165987,  0.90801845,  0.89560458],
       [ 0.91605058,  0.91174368,  0.90154632],
       [ 0.92043613,  0.9154926 ,  0.90745239],
       [ 0.92481471,  0.91926695,  0.91331461],
       [ 0.92918328,  0.92306986,  0.91911664],
       [ 0.93353368,  0.92690716,  0.92483528],
       [ 0.93769837,  0.93086176,  0.9303162 ]]

test_cm = LinearSegmentedColormap.from_list(__file__, cm_data)


if __name__ == "__main__":
    import matplotlib.pyplot as plt
    import numpy as np

    try:
        from pycam02ucs.cm.viscm import viscm
        viscm(test_cm)
    except ImportError:
        print("pycam02ucs not found, falling back on simple display")
        plt.imshow(np.linspace(0, 100, 256)[None, :], aspect='auto',
                   cmap=test_cm)
    plt.show()
