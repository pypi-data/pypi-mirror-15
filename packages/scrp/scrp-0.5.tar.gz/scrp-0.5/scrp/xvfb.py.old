from subprocess import call, CalledProcessError, check_output, Popen
from time import sleep

def start():
    #Popen("Xvfb :1 -screen 0 1024x768x16 -extension RANDR", shell=True)
    Popen(["Xvfb", ":1.0", "-screen", "0" ,"1024x768x16", "+extension", "RANDR"])
    Popen("export DISPLAY=:1.0", shell=True)
    sleep(1)

def stop():
    call(["pkill", "-9", "Xvfb"])

def restart():
    stop()
    start()

def isRunning():
    try:
        check_output(["pidof","Xvfb"])
        return True
    except CalledProcessError as e:
        return False

