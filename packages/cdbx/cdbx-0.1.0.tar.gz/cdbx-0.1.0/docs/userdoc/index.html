<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>CDBx - CDB Reimplementation for Python &mdash; cdbx 0.1.0 documentation</title>
    
    <link rel="stylesheet" href="_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="_static/cdbx.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '0.1.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="cdbx 0.1.0 documentation" href="#" /> 
  </head>
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="nav-item nav-item-0"><a href="#">cdbx 0.1.0 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="cdbx-cdb-reimplementation-for-python">
<h1>CDBx - CDB Reimplementation for Python<a class="headerlink" href="#cdbx-cdb-reimplementation-for-python" title="Permalink to this headline">¶</a></h1>
<p><strong class="cdbx">cdbx</strong> is a <a class="reference external" href="https://cr.yp.to/cdb.html">CDB</a> reimplementation for
Python.</p>
<p>Supported python versions are Python 2.7 and Python 3.3 and above.</p>
<div class="section" id="documentation">
<h2>Documentation<a class="headerlink" href="#documentation" title="Permalink to this headline">¶</a></h2>
<div class="toctree-wrapper compound">
</div>
<ul class="simple">
<li><a class="reference external" href="../apidoc/index.html">API Documentation</a> (generated)</li>
</ul>
</div>
<div class="section" id="examples">
<h2>Examples<a class="headerlink" href="#examples" title="Permalink to this headline">¶</a></h2>
<p>Note that everything going in and out of the CDB is bytes. This is
more relevant for Python 3. Keys and values which are passed as
(unicode) strings, are converted to bytes using the ASCII codec.
However, keys and values retrieved from the CDB are always bytes.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="c1"># simple file write</span>
<span class="kn">import</span> <span class="nn">cdbx</span>

<span class="n">cdb</span> <span class="o">=</span> <span class="n">cdbx</span><span class="o">.</span><span class="n">CDB</span><span class="o">.</span><span class="n">make</span><span class="p">(</span><span class="s1">&#39;somefile&#39;</span><span class="p">)</span>
<span class="n">cdb</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s1">&#39;key&#39;</span><span class="p">,</span> <span class="s1">&#39;value&#39;</span><span class="p">)</span>
<span class="c1"># ...</span>
<span class="n">cdb</span> <span class="o">=</span> <span class="n">cdb</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
<span class="k">print</span><span class="p">(</span><span class="n">cdb</span><span class="p">[</span><span class="s1">&#39;key&#39;</span><span class="p">])</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="c1"># atomic file write (original cdbmake behaviour)</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">cdbx</span>

<span class="n">cdb</span> <span class="o">=</span> <span class="n">cdbx</span><span class="o">.</span><span class="n">CDB</span><span class="o">.</span><span class="n">make</span><span class="p">(</span><span class="s1">&#39;somefile.tmp&#39;</span><span class="p">)</span>
<span class="n">cdb</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s1">&#39;key&#39;</span><span class="p">,</span> <span class="s1">&#39;value&#39;</span><span class="p">)</span>
<span class="c1"># ...</span>
<span class="n">cdb</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
<span class="n">os</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="s1">&#39;somefile.tmp&#39;</span><span class="p">,</span> <span class="s1">&#39;somefile&#39;</span><span class="p">)</span>
<span class="n">cdb</span> <span class="o">=</span> <span class="n">cdbx</span><span class="o">.</span><span class="n">CDB</span><span class="p">(</span><span class="s1">&#39;somefile&#39;</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">cdb</span><span class="p">[</span><span class="s1">&#39;key&#39;</span><span class="p">])</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="c1"># CDB within tempfile</span>
<span class="kn">import</span> <span class="nn">tempfile</span>
<span class="kn">import</span> <span class="nn">cdbx</span>

<span class="n">cdb</span> <span class="o">=</span> <span class="n">cdbx</span><span class="o">.</span><span class="n">CDB</span><span class="o">.</span><span class="n">make</span><span class="p">(</span><span class="n">tempfile</span><span class="o">.</span><span class="n">TemporaryFile</span><span class="p">())</span>
<span class="n">cdb</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s1">&#39;key&#39;</span><span class="p">,</span> <span class="s1">&#39;value&#39;</span><span class="p">)</span>
<span class="c1"># ...</span>
<span class="n">cdb</span> <span class="o">=</span> <span class="n">cdb</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
<span class="k">print</span><span class="p">(</span><span class="n">cdb</span><span class="p">[</span><span class="s1">&#39;key&#39;</span><span class="p">])</span>

<span class="n">cdb</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>  <span class="c1"># or going out-of-scope, or del cdb</span>

<span class="c1"># now it&#39;s gone</span>
<span class="k">print</span><span class="p">(</span><span class="n">cdb</span><span class="p">[</span><span class="s1">&#39;key&#39;</span><span class="p">])</span>
<span class="ne">IOError</span><span class="p">:</span> <span class="n">I</span><span class="o">/</span><span class="n">O</span> <span class="n">operation</span> <span class="n">on</span> <span class="n">a</span> <span class="n">closed</span> <span class="nb">file</span>
</pre></div>
</div>
</div>
<div class="section" id="rationale-advocacy-key-features">
<h2>Rationale, Advocacy, Key Features<a class="headerlink" href="#rationale-advocacy-key-features" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="https://cr.yp.to/cdb.html">CDB</a> as a concept is a great idea for
various reasons. It&#8217;s fast, it&#8217;s a simple, portable file format and all
operations can be done using one open file descriptor.</p>
<p>There are, of course, other interfaces to CDB (most notably <a class="reference external" href="https://pypi.python.org/pypi/python-cdb">python-cdb</a>, which I have been using for
a long time).</p>
<p><em class="cdbx">cdbx</em> tries to solve a few problems with those for me:</p>
<ul class="simple">
<li>support for Python 3</li>
<li>better interface for CDB creation - you only need a file descriptor if
you want to. This is important if you want to create a CDB within a
single temporary file.</li>
<li>all operations are independent from each other (multiple accesses at
the same time are possible). Thanks to the GIL it should be even
thread safe. This has not been tested yet, though.</li>
<li>more natural interface for the main CDB class in general</li>
<li>better error handling (especially with regard to python) in some
places</li>
<li>Since it&#8217;s a complete reimplementation, the licensing issue (people
claim to have with public domain software [cdb]) does not apply.</li>
</ul>
</div>
<div class="section" id="development-status">
<h2>Development Status<a class="headerlink" href="#development-status" title="Permalink to this headline">¶</a></h2>
<p>Beta.</p>
<p>There are some features to add and some cleanups to do before a stable
release.</p>
</div>
<div class="section" id="license">
<h2>License<a class="headerlink" href="#license" title="Permalink to this headline">¶</a></h2>
<p><em class="cdbx">cdbx</em> is available under the terms and conditions of the &#8220;Apache
License, Version 2.0.&#8221; You&#8217;ll find the detailed licensing terms in the
root directory of the source distribution package or online at
<a class="reference external" href="http://www.apache.org/licenses/LICENSE-2.0">http://www.apache.org/licenses/LICENSE-2.0</a>.</p>
</div>
<div class="section" id="bugs">
<h2>Bugs<a class="headerlink" href="#bugs" title="Permalink to this headline">¶</a></h2>
<p>No bugs, of course. ;-)
But if you&#8217;ve found one or have an idea how to improve <em class="cdbx">cdbx</em>,
feel free to send a pull request on <a class="reference external" href="https://github.com/ndparker/cdbx">github</a> or send a mail to
&lt;<a class="reference external" href="mailto:cdbx-bugs&#37;&#52;&#48;perlig&#46;de">cdbx-bugs<span>&#64;</span>perlig<span>&#46;</span>de</a>&gt;.</p>
</div>
<div class="section" id="author-information">
<h2>Author Information<a class="headerlink" href="#author-information" title="Permalink to this headline">¶</a></h2>
<p><em class="cdbx">cdbx</em> was written and is maintained by André Malo.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="#">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">CDBx - CDB Reimplementation for Python</a><ul>
<li><a class="reference internal" href="#documentation">Documentation</a></li>
<li><a class="reference internal" href="#examples">Examples</a></li>
<li><a class="reference internal" href="#rationale-advocacy-key-features">Rationale, Advocacy, Key Features</a></li>
<li><a class="reference internal" href="#development-status">Development Status</a></li>
<li><a class="reference internal" href="#license">License</a></li>
<li><a class="reference internal" href="#bugs">Bugs</a></li>
<li><a class="reference internal" href="#author-information">Author Information</a></li>
</ul>
</li>
</ul>

<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="nav-item nav-item-0"><a href="#">cdbx 0.1.0 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &copy; Copyright 2016 André Malo.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.3.1.
    </div>
  </body>
</html>