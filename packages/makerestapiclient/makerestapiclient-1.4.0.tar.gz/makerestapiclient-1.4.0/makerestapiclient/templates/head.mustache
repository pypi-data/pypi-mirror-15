{{#imports}}
{{.}}
{{/imports}}

class {{classname}}(object):
	_NO_VALUE = object()

	def __init__(self, scheme, host, port, username, password, httpclass{{#httpclass}} = {{.}}{{/httpclass}}):
		self.connection = httpclass(
			scheme=scheme,
			host=host,
			port=port,
			username=username,
			password=password,
			)
		self.urlquote = httpclass.urlquote
		self.queryencode = httpclass.queryencode

{{#context}}
	def __enter__(self):
		self._old_connection = self.connection
		self.connection = self.connection.__enter__()
		return self

	def __exit__(self, type, value, traceback):
		self._old_connection.__exit__(type, value, traceback)
		self.connection = self._old_connection
		del self._old_connection
{{/context}}
