webpackJsonp([8],{0:function(t,e,i){t.exports=i(207)},10:function(t,e,i){"use strict";var n=i(3);i(26);var s=/<[^<]*?>|\r\n|[\r\n\t&<>]/gm,o=/^ +| +$|[\r\n\t] +| {2,}/gm,r=function(t){return(t||window).location.toString().split("#",2)[1]||""},a=function(t){return decodeURIComponent(t.replace(/\+/g," "))},l=function(t){var e,i={},n=/([^&;=]+)=?([^&;]*)/g;for(void 0===t&&(t=this.getHash());e=n.exec(t);)i[a(e[1])]=a(e[2]);return i},c=function(t,e,i){for(var s,o,l,c=/([^&;=]+)=?([^&;]*)/g,u=[],h=r();s=c.exec(h);)l=a(s[1]),l===t?(u.push([s[1],encodeURIComponent(e)].join("=")),o=!0):n.inArray(l,i)===-1&&u.push([s[1],s[2]].join("="));return o||u.push([encodeURIComponent(t),encodeURIComponent(e)].join("=")),u.join("&")},u=function(t,e){return t===e?0:t<e?-1:1},h=function(t){return t.replace(/\\t/g,"\t").replace(/\\n/g,"")},d=function w(t){function e(t){var e,i='<span class="highlight-escape">%s</span>',n='<span class="highlight-html">&lt;%s&gt;</span>',s={"\r\n":i.replace(/%s/,"\\r\\n")+"<br/>\n","\r":i.replace(/%s/,"\\r")+"<br/>\n","\n":i.replace(/%s/,"\\n")+"<br/>\n","\t":i.replace(/%s/,"\\t"),"&":"&amp;","<":"&lt;",">":"&gt;"};return e=s[t],void 0===e&&(e=n.replace(/%s/,w(t.slice(1,t.length-1)))),e}return t.replace(s,e)},f=function(t){function e(t){var e='<span class="translation-space"> </span>';return Array(t.length+1).join(e)}return t.replace(o,e)},p=function(t){return f(d(t))},g=function(t){var e,i,n=Date.now()-t,s=Math.round(Math.abs(n)/1e3),o=Math.round(s/60),r=Math.round(o/60),a=Math.round(r/24),l=Math.round(a/7),c=Math.round(a/365);return c>0?(e=ngettext("A year ago","%s years ago",c),i=[c]):l>0?(e=ngettext("A week ago","%s weeks ago",l),i=[l]):a>0?(e=ngettext("Yesterday","%s days ago",a),i=[a]):r>0?(e=ngettext("An hour ago","%s hours ago",r),i=[r]):o>0&&(e=ngettext("A minute ago","%s minutes ago",o),i=[o]),e?interpolate(e,i):gettext("A few seconds ago")},m=function(t,e,i){var s=n(t);s.length&&(s.select2(e),s.on("change",i))},v=function(t,e){for(var i=Array.prototype.slice.call(arguments).splice(2),n=t.split("."),s=n.pop(),o=0;o<n.length;o++)e=e[n[o]];return e[s].apply(this,i)},y=function b(t,e,i,n){t.toggleClass(e),i>1&&setTimeout(function(){return b(t,e,i-1,n)},n)};t.exports={getHash:r,getParsedHash:l,updateHashPart:c,strCmp:u,cleanEscape:h,fancyEscape:d,fancyHl:p,relativeDate:g,makeSelectableInput:m,executeFunctionByName:v,blinkClass:y}},13:function(t,e){"use strict";function i(t){if(null==t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}t.exports=Object.assign||function(t,e){for(var n,s,o=i(t),r=1;r<arguments.length;r++){n=arguments[r],s=Object.keys(Object(n));for(var a=0;a<s.length;a++)o[s[a]]=n[s[a]]}return o}},21:function(t,e,i){/*!
	  Copyright (c) 2015 Jed Watson.
	  Licensed under the MIT License (MIT), see
	  http://jedwatson.github.io/classnames
	*/
function n(){for(var t,e="",i=0;i<arguments.length;i++)if(t=arguments[i])if("string"==typeof t||"number"==typeof t)e+=" "+t;else if("[object Array]"===Object.prototype.toString.call(t))e+=" "+n.apply(null,t);else if("object"==typeof t)for(var s in t)t.hasOwnProperty(s)&&t[s]&&(e+=" "+s);return e.substr(1)}var s,o;"undefined"!=typeof t&&t.exports&&(t.exports=n),s=[],o=function(){return n}.apply(e,s),!(void 0!==o&&(t.exports=o))},26:function(t,e){!function(t){"undefined"==typeof t.fn.each2&&t.fn.extend({each2:function(e){for(var i=t([0]),n=-1,s=this.length;++n<s&&(i.context=i[0]=this[n])&&e.call(i[0],n,i)!==!1;);return this}})}(jQuery),function(t,e){"use strict";function i(t,e){for(var i=0,n=e.length;i<n;i+=1)if(s(t,e[i]))return i;return-1}function n(){var e=t(N);e.appendTo("body");var i={width:e.width()-e[0].clientWidth,height:e.height()-e[0].clientHeight};return e.remove(),i}function s(t,i){return t===i||t!==e&&i!==e&&(null!==t&&null!==i&&(t.constructor===String?t+""==i+"":i.constructor===String&&i+""==t+""))}function o(e,i){var n,s,o;if(null===e||e.length<1)return[];for(n=e.split(i),s=0,o=n.length;s<o;s+=1)n[s]=t.trim(n[s]);return n}function r(t){return t.outerWidth(!1)-t.width()}function a(i){var n="keyup-change-value";i.on("keydown",function(){t.data(i,n)===e&&t.data(i,n,i.val())}),i.on("keyup",function(){var s=t.data(i,n);s!==e&&i.val()!==s&&(t.removeData(i,n),i.trigger("keyup-change"))})}function l(i){i.on("mousemove",function(i){var n=z;n!==e&&n.x===i.pageX&&n.y===i.pageY||t(i.target).trigger("mousemove-filtered",i)})}function c(t,i,n){n=n||e;var s;return function(){var e=arguments;window.clearTimeout(s),s=window.setTimeout(function(){i.apply(n,e)},t)}}function u(t){var e,i=!1;return function(){return i===!1&&(e=t(),i=!0),e}}function h(t,e){var n=c(t,function(t){e.trigger("scroll-debounced",t)});e.on("scroll",function(t){i(t.target,e.get())>=0&&n(t)})}function d(t){t[0]!==document.activeElement&&window.setTimeout(function(){var e,i=t[0],n=t.val().length;t.focus(),t.is(":visible")&&i===document.activeElement&&(i.setSelectionRange?i.setSelectionRange(n,n):i.createTextRange&&(e=i.createTextRange(),e.collapse(!1),e.select()))},0)}function f(e){e=t(e)[0];var i=0,n=0;if("selectionStart"in e)i=e.selectionStart,n=e.selectionEnd-i;else if("selection"in document){e.focus();var s=document.selection.createRange();n=document.selection.createRange().text.length,s.moveStart("character",-e.value.length),i=s.text.length-n}return{offset:i,length:n}}function p(t){t.preventDefault(),t.stopPropagation()}function g(t){t.preventDefault(),t.stopImmediatePropagation()}function m(e){if(!j){var i=e[0].currentStyle||window.getComputedStyle(e[0],null);j=t(document.createElement("div")).css({position:"absolute",left:"-10000px",top:"-10000px",display:"none",fontSize:i.fontSize,fontFamily:i.fontFamily,fontStyle:i.fontStyle,fontWeight:i.fontWeight,letterSpacing:i.letterSpacing,textTransform:i.textTransform,whiteSpace:"nowrap"}),j.attr("class","select2-sizer"),t("body").append(j)}return j.text(e.val()),j.width()}function v(e,i,n){var s,o,r=[];s=e.attr("class"),s&&(s=""+s,t(s.split(" ")).each2(function(){0===this.indexOf("select2-")&&r.push(this)})),s=i.attr("class"),s&&(s=""+s,t(s.split(" ")).each2(function(){0!==this.indexOf("select2-")&&(o=n(this),o&&r.push(this))})),e.attr("class",r.join(" "))}function y(t,e,i,n){var s=t.toUpperCase().indexOf(e.toUpperCase()),o=e.length;return s<0?void i.push(n(t)):(i.push(n(t.substring(0,s))),i.push("<span class='select2-match'>"),i.push(n(t.substring(s,s+o))),i.push("</span>"),void i.push(n(t.substring(s+o,t.length))))}function w(i){var n,s=0,o=null,r=i.quietMillis||100,a=i.url,l=this;return function(c){window.clearTimeout(n),n=window.setTimeout(function(){s+=1;var n=s,r=i.data,u=a,h=i.transport||t.fn.select2.ajaxDefaults.transport,d={type:i.type||"GET",cache:i.cache||!1,jsonpCallback:i.jsonpCallback||e,dataType:i.dataType||"json"},f=t.extend({},t.fn.select2.ajaxDefaults.params,d);r=r?r.call(l,c.term,c.page,c.context):null,u="function"==typeof u?u.call(l,c.term,c.page,c.context):u,null!==o&&o.abort(),i.params&&(t.isFunction(i.params)?t.extend(f,i.params.call(l)):t.extend(f,i.params)),t.extend(f,{url:u,dataType:i.dataType,data:r,success:function(t){if(!(n<s)){var e=i.results(t,c.page);c.callback(e)}}}),o=h.call(l,f)},r)}}function b(e){var i,n,s=e,o=function(t){return""+t.text};t.isArray(s)&&(n=s,s={results:n}),t.isFunction(s)===!1&&(n=s,s=function(){return n});var r=s();return r.text&&(o=r.text,t.isFunction(o)||(i=r.text,o=function(t){return t[i]})),function(e){var i,n=e.term,r={results:[]};return""===n?void e.callback(s()):(i=function(s,r){var a,l;if(s=s[0],s.children){a={};for(l in s)s.hasOwnProperty(l)&&(a[l]=s[l]);a.children=[],t(s.children).each2(function(t,e){i(e,a.children)}),(a.children.length||e.matcher(n,o(a),s))&&r.push(a)}else e.matcher(n,o(s),s)&&r.push(s)},t(s().results).each2(function(t,e){i(e,r.results)}),void e.callback(r))}}function C(i){var n=t.isFunction(i);return function(s){var o=s.term,r={results:[]};t(n?i():i).each(function(){var t=this.text!==e,i=t?this.text:this;(""===o||s.matcher(o,i))&&r.results.push(t?this:{id:this,text:this})}),s.callback(r)}}function x(e,i){if(t.isFunction(e))return!0;if(!e)return!1;throw new Error("formatterName must be a function or a falsy value")}function k(e){return t.isFunction(e)?e():e}function S(e){var i=0;return t.each(e,function(t,e){e.children?i+=S(e.children):i++}),i}function M(t,i,n,o){var r,a,l,c,u,h=t,d=!1;if(!o.createSearchChoice||!o.tokenSeparators||o.tokenSeparators.length<1)return e;for(;;){for(a=-1,l=0,c=o.tokenSeparators.length;l<c&&(u=o.tokenSeparators[l],a=t.indexOf(u),!(a>=0));l++);if(a<0)break;if(r=t.substring(0,a),t=t.substring(a+u.length),r.length>0&&(r=o.createSearchChoice(r,i),r!==e&&null!==r&&o.id(r)!==e&&null!==o.id(r))){for(d=!1,l=0,c=i.length;l<c;l++)if(s(o.id(r),o.id(i[l]))){d=!0;break}d||n(r)}}return h!==t?t:void 0}function T(e,i){var n=function(){};return n.prototype=new e,n.prototype.constructor=n,n.prototype.parent=e.prototype,n.prototype=t.extend(n.prototype,i),n}if(window.Select2===e){var R,I,E,_,O,j,z,P,A,R={TAB:9,ENTER:13,ESC:27,SPACE:32,LEFT:37,UP:38,RIGHT:39,DOWN:40,SHIFT:16,CTRL:17,ALT:18,PAGE_UP:33,PAGE_DOWN:34,HOME:36,END:35,BACKSPACE:8,DELETE:46,isArrow:function(t){switch(t=t.which?t.which:t){case R.LEFT:case R.RIGHT:case R.UP:case R.DOWN:return!0}return!1},isControl:function(t){var e=t.which;switch(e){case R.SHIFT:case R.CTRL:case R.ALT:return!0}return!!t.metaKey},isFunctionKey:function(t){return t=t.which?t.which:t,t>=112&&t<=123}},N="<div class='select2-measure-scrollbar'></div>";P=t(document),O=function(){var t=1;return function(){return t++}}(),P.on("mousemove",function(t){z={x:t.pageX,y:t.pageY}}),I=T(Object,{bind:function(t){var e=this;return function(){t.apply(e,arguments)}},init:function(i){var s,o,r,c,d=".select2-results";this.opts=i=this.prepareOpts(i),this.id=i.id,i.element.data("select2")!==e&&null!==i.element.data("select2")&&this.destroy(),this.container=this.createContainer(),this.containerId="s2id_"+(i.element.attr("id")||"autogen"+O()),this.containerSelector="#"+this.containerId.replace(/([;&,\.\+\*\~':"\!\^#$%@\[\]\(\)=>\|])/g,"\\$1"),this.container.attr("id",this.containerId),this.body=u(function(){return i.element.closest("body")}),v(this.container,this.opts.element,this.opts.adaptContainerCssClass),this.container.css(k(i.containerCss)),this.container.addClass(k(i.containerCssClass)),this.elementTabIndex=this.opts.element.attr("tabindex"),this.opts.element.data("select2",this).attr("tabindex","-1").before(this.container),this.container.data("select2",this),this.dropdown=this.container.find(".select2-drop"),this.dropdown.addClass(k(i.dropdownCssClass)),this.dropdown.data("select2",this),this.results=s=this.container.find(d),this.search=o=this.container.find("input.select2-input"),this.resultsPage=0,this.context=null,this.initContainer(),l(this.results),this.dropdown.on("mousemove-filtered touchstart touchmove touchend",d,this.bind(this.highlightUnderEvent)),h(80,this.results),this.dropdown.on("scroll-debounced",d,this.bind(this.loadMoreIfNeeded)),t(this.container).on("change",".select2-input",function(t){t.stopPropagation()}),t(this.dropdown).on("change",".select2-input",function(t){t.stopPropagation()}),t.fn.mousewheel&&s.mousewheel(function(t,e,i,n){var o=s.scrollTop();n>0&&o-n<=0?(s.scrollTop(0),p(t)):n<0&&s.get(0).scrollHeight-s.scrollTop()+n<=s.height()&&(s.scrollTop(s.get(0).scrollHeight-s.height()),p(t))}),a(o),o.on("keyup-change input paste",this.bind(this.updateResults)),o.on("focus",function(){o.addClass("select2-focused")}),o.on("blur",function(){o.removeClass("select2-focused")}),this.dropdown.on("mouseup",d,this.bind(function(e){t(e.target).closest(".select2-result-selectable").length>0&&(this.highlightUnderEvent(e),this.selectHighlighted(e))})),this.dropdown.on("click mouseup mousedown",function(t){t.stopPropagation()}),t.isFunction(this.opts.initSelection)&&(this.initSelection(),this.monitorSource()),null!==i.maximumInputLength&&this.search.attr("maxlength",i.maximumInputLength);var r=i.element.prop("disabled");r===e&&(r=!1),this.enable(!r);var c=i.element.prop("readonly");c===e&&(c=!1),this.readonly(c),A=A||n(),this.autofocus=i.element.prop("autofocus"),i.element.prop("autofocus",!1),this.autofocus&&this.focus()},destroy:function(){var t=this.opts.element.data("select2");this.propertyObserver&&(delete this.propertyObserver,this.propertyObserver=null),t!==e&&(t.container.remove(),t.dropdown.remove(),t.opts.element.removeClass("select2-offscreen").removeData("select2").off(".select2").attr({tabindex:this.elementTabIndex}).prop("autofocus",this.autofocus||!1).show())},optionToData:function(t){return t.is("option")?{id:t.prop("value"),text:t.text(),element:t.get(),css:t.attr("class"),disabled:t.prop("disabled"),locked:s(t.attr("locked"),"locked")}:t.is("optgroup")?{text:t.attr("label"),children:[],element:t.get(),css:t.attr("class")}:void 0},prepareOpts:function(i){var n,r,a,l,c=this;if(n=i.element,"select"===n.get(0).tagName.toLowerCase()&&(this.select=r=i.element),r&&t.each(["id","multiple","ajax","query","createSearchChoice","initSelection","data","tags"],function(){if(this in i)throw new Error("Option '"+this+"' is not allowed for Select2 when attached to a <select> element.")}),i=t.extend({},{populateResults:function(n,s,o){var r,a=this.opts.id;(r=function(n,s,l){var u,h,d,f,p,g,m,v,y,w;for(n=i.sortResults(n,s,o),u=0,h=n.length;u<h;u+=1)d=n[u],p=d.disabled===!0,f=!p&&a(d)!==e,g=d.children&&d.children.length>0,m=t("<li></li>"),m.addClass("select2-results-dept-"+l),m.addClass("select2-result"),m.addClass(f?"select2-result-selectable":"select2-result-unselectable"),p&&m.addClass("select2-disabled"),g&&m.addClass("select2-result-with-children"),m.addClass(c.opts.formatResultCssClass(d)),v=t(document.createElement("div")),v.addClass("select2-result-label"),w=i.formatResult(d,v,o,c.opts.escapeMarkup),w!==e&&v.html(w),m.append(v),g&&(y=t("<ul></ul>"),y.addClass("select2-result-sub"),r(d.children,y,l+1),m.append(y)),m.data("select2-data",d),s.append(m)})(s,n,0)}},t.fn.select2.defaults,i),"function"!=typeof i.id&&(a=i.id,i.id=function(t){return t[a]}),t.isArray(i.element.data("select2Tags"))){if("tags"in i)throw"tags specified as both an attribute 'data-select2-tags' and in options of Select2 "+i.element.attr("id");i.tags=i.element.data("select2Tags")}if(r?(i.query=this.bind(function(i){var s,o,r,a={results:[],more:!1},l=i.term;r=function(t,e){var n;t.is("option")?i.matcher(l,t.text(),t)&&e.push(c.optionToData(t)):t.is("optgroup")&&(n=c.optionToData(t),t.children().each2(function(t,e){r(e,n.children)}),n.children.length>0&&e.push(n))},s=n.children(),this.getPlaceholder()!==e&&s.length>0&&(o=s[0],""===t(o).text()&&(s=s.not(o))),s.each2(function(t,e){r(e,a.results)}),i.callback(a)}),i.id=function(t){return t.id},i.formatResultCssClass=function(t){return t.css}):"query"in i||("ajax"in i?(l=i.element.data("ajax-url"),l&&l.length>0&&(i.ajax.url=l),i.query=w.call(i.element,i.ajax)):"data"in i?i.query=b(i.data):"tags"in i&&(i.query=C(i.tags),i.createSearchChoice===e&&(i.createSearchChoice=function(t){return{id:t,text:t}}),i.initSelection===e&&(i.initSelection=function(e,n){var r=[];t(o(e.val(),i.separator)).each(function(){var e=this,n=this,o=i.tags;t.isFunction(o)&&(o=o()),t(o).each(function(){if(s(this.id,e))return n=this.text,!1}),r.push({id:e,text:n})}),n(r)}))),"function"!=typeof i.query)throw"query function not defined for Select2 "+i.element.attr("id");return i},monitorSource:function(){var t,i=this.opts.element;i.on("change.select2",this.bind(function(t){this.opts.element.data("select2-change-triggered")!==!0&&this.initSelection()})),t=this.bind(function(){var t,n=i.prop("disabled");n===e&&(n=!1),this.enable(!n);var t=i.prop("readonly");t===e&&(t=!1),this.readonly(t),v(this.container,this.opts.element,this.opts.adaptContainerCssClass),this.container.addClass(k(this.opts.containerCssClass)),v(this.dropdown,this.opts.element,this.opts.adaptDropdownCssClass),this.dropdown.addClass(k(this.opts.dropdownCssClass))}),i.on("propertychange.select2 DOMAttrModified.select2",t),this.mutationCallback===e&&(this.mutationCallback=function(e){e.forEach(t)}),"undefined"!=typeof WebKitMutationObserver&&(this.propertyObserver&&(delete this.propertyObserver,this.propertyObserver=null),this.propertyObserver=new WebKitMutationObserver(this.mutationCallback),this.propertyObserver.observe(i.get(0),{attributes:!0,subtree:!1}))},triggerSelect:function(e){var i=t.Event("select2-selecting",{val:this.id(e),object:e});return this.opts.element.trigger(i),!i.isDefaultPrevented()},triggerChange:function(e){e=e||{},e=t.extend({},e,{type:"change",val:this.val()}),this.opts.element.data("select2-change-triggered",!0),this.opts.element.trigger(e),this.opts.element.data("select2-change-triggered",!1),this.opts.element.click(),this.opts.blurOnChange&&this.opts.element.blur()},isInterfaceEnabled:function(){return this.enabledInterface===!0},enableInterface:function(){var t=this._enabled&&!this._readonly,e=!t;return t!==this.enabledInterface&&(this.container.toggleClass("select2-container-disabled",e),this.close(),this.enabledInterface=t,!0)},enable:function(t){return t===e&&(t=!0),this._enabled!==t&&(this._enabled=t,this.opts.element.prop("disabled",!t),this.enableInterface(),!0)},readonly:function(t){return t===e&&(t=!1),this._readonly!==t&&(this._readonly=t,this.opts.element.prop("readonly",t),this.enableInterface(),!0)},opened:function(){return this.container.hasClass("select2-dropdown-open")},positionDropdown:function(){var e,i,n,s,o=this.dropdown,r=this.container.offset(),a=this.container.outerHeight(!1),l=this.container.outerWidth(!1),c=o.outerHeight(!1),u=t(window).scrollLeft()+t(window).width(),h=t(window).scrollTop()+t(window).height(),d=r.top+a,f=r.left,p=d+c<=h,g=r.top-c>=this.body().scrollTop(),m=o.outerWidth(!1),v=f+m<=u,y=o.hasClass("select2-drop-above");this.opts.dropdownAutoWidth?(s=t(".select2-results",o)[0],o.addClass("select2-drop-auto-width"),o.css("width",""),m=o.outerWidth(!1)+(s.scrollHeight===s.clientHeight?0:A.width),m>l?l=m:m=l,v=f+m<=u):this.container.removeClass("select2-drop-auto-width"),"static"!==this.body().css("position")&&(e=this.body().offset(),d-=e.top,f-=e.left),y?(i=!0,!g&&p&&(i=!1)):(i=!1,!p&&g&&(i=!0)),v||(f=r.left+l-m),i?(d=r.top-c,this.container.addClass("select2-drop-above"),o.addClass("select2-drop-above")):(this.container.removeClass("select2-drop-above"),o.removeClass("select2-drop-above")),n=t.extend({top:d,left:f,width:l},k(this.opts.dropdownCss)),o.css(n)},shouldOpen:function(){var e;return!this.opened()&&(this._enabled!==!1&&this._readonly!==!0&&(e=t.Event("select2-opening"),this.opts.element.trigger(e),!e.isDefaultPrevented()))},clearDropdownAlignmentPreference:function(){this.container.removeClass("select2-drop-above"),this.dropdown.removeClass("select2-drop-above")},open:function(){return!!this.shouldOpen()&&(this.opening(),!0)},opening:function(){function e(){return{width:Math.max(document.documentElement.scrollWidth,t(window).width()),height:Math.max(document.documentElement.scrollHeight,t(window).height())}}var i,n=this.containerId,s="scroll."+n,o="resize."+n,r="orientationchange."+n;this.container.addClass("select2-dropdown-open").addClass("select2-container-active"),this.clearDropdownAlignmentPreference(),this.dropdown[0]!==this.body().children().last()[0]&&this.dropdown.detach().appendTo(this.body()),i=t("#select2-drop-mask"),0==i.length&&(i=t(document.createElement("div")),i.attr("id","select2-drop-mask").attr("class","select2-drop-mask"),i.hide(),i.appendTo(this.body()),i.on("mousedown touchstart",function(e){var i,n=t("#select2-drop");n.length>0&&(i=n.data("select2"),i.opts.selectOnBlur&&i.selectHighlighted({noFocus:!0}),i.close(),e.preventDefault(),e.stopPropagation())})),this.dropdown.prev()[0]!==i[0]&&this.dropdown.before(i),t("#select2-drop").removeAttr("id"),this.dropdown.attr("id","select2-drop"),i.css(e()),i.show(),this.dropdown.show(),this.positionDropdown(),this.dropdown.addClass("select2-drop-active"),this.ensureHighlightVisible();var a=this;this.container.parents().add(window).each(function(){t(this).on(o+" "+s+" "+r,function(i){t("#select2-drop-mask").css(e()),a.positionDropdown()})})},close:function(){if(this.opened()){var e=this.containerId,i="scroll."+e,n="resize."+e,s="orientationchange."+e;this.container.parents().add(window).each(function(){t(this).off(i).off(n).off(s)}),this.clearDropdownAlignmentPreference(),t("#select2-drop-mask").hide(),this.dropdown.removeAttr("id"),this.dropdown.hide(),this.container.removeClass("select2-dropdown-open"),this.results.empty(),this.clearSearch(),this.search.removeClass("select2-active"),this.opts.element.trigger(t.Event("select2-close"))}},clearSearch:function(){},getMaximumSelectionSize:function(){return k(this.opts.maximumSelectionSize)},ensureHighlightVisible:function(){var e,i,n,s,o,r,a,l=this.results;if(i=this.highlight(),!(i<0)){if(0==i)return void l.scrollTop(0);e=this.findHighlightableChoices().find(".select2-result-label"),n=t(e[i]),s=n.offset().top+n.outerHeight(!0),i===e.length-1&&(a=l.find("li.select2-more-results"),a.length>0&&(s=a.offset().top+a.outerHeight(!0))),o=l.offset().top+l.outerHeight(!0),s>o&&l.scrollTop(l.scrollTop()+(s-o)),r=n.offset().top-l.offset().top,r<0&&"none"!=n.css("display")&&l.scrollTop(l.scrollTop()+r)}},findHighlightableChoices:function(){return this.results.find(".select2-result-selectable:not(.select2-selected):not(.select2-disabled)")},moveHighlight:function(e){for(var i=this.findHighlightableChoices(),n=this.highlight();n>-1&&n<i.length;){n+=e;var s=t(i[n]);if(s.hasClass("select2-result-selectable")&&!s.hasClass("select2-disabled")&&!s.hasClass("select2-selected")){this.highlight(n);break}}},highlight:function(e){var n,s,o=this.findHighlightableChoices();return 0===arguments.length?i(o.filter(".select2-highlighted")[0],o.get()):(e>=o.length&&(e=o.length-1),e<0&&(e=0),this.results.find(".select2-highlighted").removeClass("select2-highlighted"),n=t(o[e]),n.addClass("select2-highlighted"),this.ensureHighlightVisible(),s=n.data("select2-data"),void(s&&this.opts.element.trigger({type:"select2-highlight",val:this.id(s),choice:s})))},countSelectableResults:function(){return this.findHighlightableChoices().length},highlightUnderEvent:function(e){var i=t(e.target).closest(".select2-result-selectable");if(i.length>0&&!i.is(".select2-highlighted")){var n=this.findHighlightableChoices();this.highlight(n.index(i))}else 0==i.length&&this.results.find(".select2-highlighted").removeClass("select2-highlighted")},loadMoreIfNeeded:function(){var t,e=this.results,i=e.find("li.select2-more-results"),n=this.resultsPage+1,s=this,o=this.search.val(),r=this.context;0!==i.length&&(t=i.offset().top-e.offset().top-e.height(),t<=this.opts.loadMorePadding&&(i.addClass("select2-active"),this.opts.query({element:this.opts.element,term:o,page:n,context:r,matcher:this.opts.matcher,callback:this.bind(function(t){s.opened()&&(s.opts.populateResults.call(this,e,t.results,{term:o,page:n,context:r}),s.postprocessResults(t,!1,!1),t.more===!0?(i.detach().appendTo(e).text(s.opts.formatLoadMore(n+1)),window.setTimeout(function(){s.loadMoreIfNeeded()},10)):i.remove(),s.positionDropdown(),s.resultsPage=n,s.context=t.context)})})))},tokenize:function(){},updateResults:function(i){function n(){c.scrollTop(0),l.removeClass("select2-active"),h.positionDropdown()}function o(t){c.html(t),n()}var r,a,l=this.search,c=this.results,u=this.opts,h=this,d=l.val(),f=t.data(this.container,"select2-last-term");if((i===!0||!f||!s(d,f))&&(t.data(this.container,"select2-last-term",d),i===!0||this.showSearchInput!==!1&&this.opened())){var p=this.getMaximumSelectionSize();if(p>=1&&(r=this.data(),t.isArray(r)&&r.length>=p&&x(u.formatSelectionTooBig,"formatSelectionTooBig")))return void o("<li class='select2-selection-limit'>"+u.formatSelectionTooBig(p)+"</li>");if(l.val().length<u.minimumInputLength)return o(x(u.formatInputTooShort,"formatInputTooShort")?"<li class='select2-no-results'>"+u.formatInputTooShort(l.val(),u.minimumInputLength)+"</li>":""),void(i&&this.showSearch(!0));if(u.maximumInputLength&&l.val().length>u.maximumInputLength)return void o(x(u.formatInputTooLong,"formatInputTooLong")?"<li class='select2-no-results'>"+u.formatInputTooLong(l.val(),u.maximumInputLength)+"</li>":"");u.formatSearching&&0===this.findHighlightableChoices().length&&o("<li class='select2-searching'>"+u.formatSearching()+"</li>"),l.addClass("select2-active"),a=this.tokenize(),a!=e&&null!=a&&l.val(a),this.resultsPage=1,u.query({element:u.element,term:l.val(),page:this.resultsPage,context:null,matcher:u.matcher,callback:this.bind(function(r){var a;return this.opened()?(this.context=r.context===e?null:r.context,this.opts.createSearchChoice&&""!==l.val()&&(a=this.opts.createSearchChoice.call(null,l.val(),r.results),a!==e&&null!==a&&h.id(a)!==e&&null!==h.id(a)&&0===t(r.results).filter(function(){return s(h.id(this),h.id(a))}).length&&r.results.unshift(a)),0===r.results.length&&x(u.formatNoMatches,"formatNoMatches")?void o("<li class='select2-no-results'>"+u.formatNoMatches(l.val())+"</li>"):(c.empty(),h.opts.populateResults.call(this,c,r.results,{term:l.val(),page:this.resultsPage,context:null}),r.more===!0&&x(u.formatLoadMore,"formatLoadMore")&&(c.append("<li class='select2-more-results'>"+h.opts.escapeMarkup(u.formatLoadMore(this.resultsPage))+"</li>"),window.setTimeout(function(){h.loadMoreIfNeeded()},10)),this.postprocessResults(r,i),n(),void this.opts.element.trigger({type:"select2-loaded",data:r}))):void this.search.removeClass("select2-active")})})}},cancel:function(){this.close()},blur:function(){this.opts.selectOnBlur&&this.selectHighlighted({noFocus:!0}),this.close(),this.container.removeClass("select2-container-active"),this.search[0]===document.activeElement&&this.search.blur(),this.clearSearch(),this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus")},focusSearch:function(){d(this.search)},selectHighlighted:function(t){var e=this.highlight(),i=this.results.find(".select2-highlighted"),n=i.closest(".select2-result").data("select2-data");n&&(this.highlight(e),this.onSelect(n,t))},getPlaceholder:function(){return this.opts.element.attr("placeholder")||this.opts.element.attr("data-placeholder")||this.opts.element.data("placeholder")||this.opts.placeholder},initContainerWidth:function(){function i(){var i,n,s,o,r;if("off"===this.opts.width)return null;if("element"===this.opts.width)return 0===this.opts.element.outerWidth(!1)?"auto":this.opts.element.outerWidth(!1)+"px";if("copy"===this.opts.width||"resolve"===this.opts.width){if(i=this.opts.element.attr("style"),i!==e)for(n=i.split(";"),o=0,r=n.length;o<r;o+=1)if(s=n[o].replace(/\s/g,"").match(/width:(([-+]?([0-9]*\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/i),null!==s&&s.length>=1)return s[1];return i=this.opts.element.css("width"),i&&i.length>0?i:"resolve"===this.opts.width?0===this.opts.element.outerWidth(!1)?"auto":this.opts.element.outerWidth(!1)+"px":null}return t.isFunction(this.opts.width)?this.opts.width():this.opts.width}var n=i.call(this);null!==n&&this.container.css("width",n)}}),E=T(I,{createContainer:function(){var e=t(document.createElement("div")).attr({"class":"select2-container"}).html(["<a href='javascript:void(0)' onclick='return false;' class='select2-choice' tabindex='-1'>","   <span>&nbsp;</span><abbr class='select2-search-choice-close'></abbr>","   <div><b></b></div>","</a>","<input class='select2-focusser select2-offscreen' type='text'/>","<div class='select2-drop select2-display-none'>","   <div class='select2-search'>","       <input type='text' autocomplete='off' autocorrect='off' autocapitilize='off' spellcheck='false' class='select2-input'/>","   </div>","   <ul class='select2-results'>","   </ul>","</div>"].join(""));return e},enableInterface:function(){this.parent.enableInterface.apply(this,arguments)&&this.focusser.prop("disabled",!this.isInterfaceEnabled())},opening:function(){var e,i;this.parent.opening.apply(this,arguments),this.showSearchInput!==!1&&this.search.val(this.focusser.val()),this.search.focus(),e=this.search.get(0),e.createTextRange&&(i=e.createTextRange(),i.collapse(!1),i.select()),this.focusser.prop("disabled",!0).val(""),this.updateResults(!0),this.opts.element.trigger(t.Event("select2-open"))},close:function(){this.opened()&&(this.parent.close.apply(this,arguments),this.focusser.removeAttr("disabled"),this.focusser.focus())},focus:function(){this.opened()?this.close():(this.focusser.removeAttr("disabled"),this.focusser.focus())},isFocused:function(){return this.container.hasClass("select2-container-active")},cancel:function(){this.parent.cancel.apply(this,arguments),this.focusser.removeAttr("disabled"),this.focusser.focus()},initContainer:function(){var e,i=this.container,n=this.dropdown;this.showSearch(!1),this.selection=e=i.find(".select2-choice"),this.focusser=i.find(".select2-focusser"),this.focusser.attr("id","s2id_autogen"+O()),t("label[for='"+this.opts.element.attr("id")+"']").attr("for",this.focusser.attr("id")),this.focusser.attr("tabindex",this.elementTabIndex),this.search.on("keydown",this.bind(function(t){if(this.isInterfaceEnabled()){if(t.which===R.PAGE_UP||t.which===R.PAGE_DOWN)return void p(t);switch(t.which){case R.UP:case R.DOWN:return this.moveHighlight(t.which===R.UP?-1:1),void p(t);case R.ENTER:return this.selectHighlighted(),void p(t);case R.TAB:return void this.selectHighlighted({noFocus:!0});case R.ESC:return this.cancel(t),void p(t)}}})),this.search.on("blur",this.bind(function(t){document.activeElement===this.body().get(0)&&window.setTimeout(this.bind(function(){this.search.focus()}),0)})),this.focusser.on("keydown",this.bind(function(t){if(this.isInterfaceEnabled()&&t.which!==R.TAB&&!R.isControl(t)&&!R.isFunctionKey(t)&&t.which!==R.ESC)return this.opts.openOnEnter===!1&&t.which===R.ENTER?void p(t):t.which==R.DOWN||t.which==R.UP||t.which==R.ENTER&&this.opts.openOnEnter?(this.open(),void p(t)):t.which==R.DELETE||t.which==R.BACKSPACE?(this.opts.allowClear&&this.clear(),void p(t)):void 0})),a(this.focusser),this.focusser.on("keyup-change input",this.bind(function(t){t.stopPropagation(),this.opened()||this.open()})),e.on("mousedown","abbr",this.bind(function(t){this.isInterfaceEnabled()&&(this.clear(),g(t),this.close(),this.selection.focus())})),e.on("mousedown",this.bind(function(e){this.container.hasClass("select2-container-active")||this.opts.element.trigger(t.Event("select2-focus")),this.opened()?this.close():this.isInterfaceEnabled()&&this.open(),p(e)})),n.on("mousedown",this.bind(function(){this.search.focus()})),e.on("focus",this.bind(function(t){p(t)})),this.focusser.on("focus",this.bind(function(){this.container.hasClass("select2-container-active")||this.opts.element.trigger(t.Event("select2-focus")),this.container.addClass("select2-container-active")})).on("blur",this.bind(function(){this.opened()||(this.container.removeClass("select2-container-active"),this.opts.element.trigger(t.Event("select2-blur")))})),this.search.on("focus",this.bind(function(){this.container.hasClass("select2-container-active")||this.opts.element.trigger(t.Event("select2-focus")),this.container.addClass("select2-container-active")})),this.initContainerWidth(),this.opts.element.addClass("select2-offscreen"),this.setPlaceholder()},clear:function(t){var e=this.selection.data("select2-data");e&&(this.opts.element.val(""),this.selection.find("span").empty(),this.selection.removeData("select2-data"),this.setPlaceholder(),t!==!1&&(this.opts.element.trigger({type:"select2-removed",val:this.id(e),choice:e}),this.triggerChange({removed:e})))},initSelection:function(){if(""===this.opts.element.val()&&""===this.opts.element.text())this.updateSelection([]),this.close(),this.setPlaceholder();else{var t=this;this.opts.initSelection.call(null,this.opts.element,function(i){i!==e&&null!==i&&(t.updateSelection(i),t.close(),t.setPlaceholder())})}},prepareOpts:function(){var e=this.parent.prepareOpts.apply(this,arguments),i=this;return"select"===e.element.get(0).tagName.toLowerCase()?e.initSelection=function(t,e){var n=t.find(":selected");e(i.optionToData(n))}:"data"in e&&(e.initSelection=e.initSelection||function(i,n){var o=i.val(),r=null;e.query({matcher:function(t,i,n){var a=s(o,e.id(n));return a&&(r=n),a},callback:t.isFunction(n)?function(){n(r)}:t.noop})}),e},getPlaceholder:function(){return this.select&&""!==this.select.find("option").first().text()?e:this.parent.getPlaceholder.apply(this,arguments)},setPlaceholder:function(){var t=this.getPlaceholder();if(""===this.opts.element.val()&&t!==e){if(this.select&&""!==this.select.find("option:first").text())return;this.selection.find("span").html(this.opts.escapeMarkup(t)),this.selection.addClass("select2-default"),this.container.removeClass("select2-allowclear")}},postprocessResults:function(t,e,i){var n=0,o=this;if(this.findHighlightableChoices().each2(function(t,e){if(s(o.id(e.data("select2-data")),o.opts.element.val()))return n=t,!1}),i!==!1&&this.highlight(n),e===!0&&this.showSearchInput===!1){var r=this.opts.minimumResultsForSearch;r>=0&&this.showSearch(S(t.results)>=r)}},showSearch:function(e){this.showSearchInput=e,this.dropdown.find(".select2-search").toggleClass("select2-search-hidden",!e),this.dropdown.find(".select2-search").toggleClass("select2-offscreen",!e),t(this.dropdown,this.container).toggleClass("select2-with-searchbox",e)},onSelect:function(t,e){if(this.triggerSelect(t)){var i=this.opts.element.val(),n=this.data();this.opts.element.val(this.id(t)),this.updateSelection(t),this.opts.element.trigger({type:"select2-selected",val:this.id(t),choice:t}),this.close(),e&&e.noFocus||this.selection.focus(),s(i,this.id(t))||this.triggerChange({added:t,removed:n})}},updateSelection:function(t){var i,n=this.selection.find("span");this.selection.data("select2-data",t),n.empty(),i=this.opts.formatSelection(t,n),i!==e&&n.append(this.opts.escapeMarkup(i)),this.selection.removeClass("select2-default"),this.opts.allowClear&&this.getPlaceholder()!==e&&this.container.addClass("select2-allowclear")},val:function(){var t,i=!1,n=null,s=this,o=this.data();if(0===arguments.length)return this.opts.element.val();if(t=arguments[0],arguments.length>1&&(i=arguments[1]),this.select)this.select.val(t).find(":selected").each2(function(t,e){return n=s.optionToData(e),!1}),this.updateSelection(n),this.setPlaceholder(),i&&this.triggerChange({added:n,removed:o});else{if(this.opts.initSelection===e)throw new Error("cannot call val() if initSelection() is not defined");if(!t&&0!==t)return void this.clear(i);this.opts.element.val(t),this.opts.initSelection(this.opts.element,function(t){s.opts.element.val(t?s.id(t):""),s.updateSelection(t),s.setPlaceholder(),i&&s.triggerChange({added:t,removed:o})})}},clearSearch:function(){this.search.val(""),this.focusser.val("")},data:function(t,i){var n;return 0===arguments.length?(n=this.selection.data("select2-data"),n==e&&(n=null),
n):void(t&&""!==t?(n=this.data(),this.opts.element.val(t?this.id(t):""),this.updateSelection(t),i&&this.triggerChange({added:t,removed:n})):this.clear(i))}}),_=T(I,{createContainer:function(){var e=t(document.createElement("div")).attr({"class":"select2-container select2-container-multi"}).html(["    <ul class='select2-choices'>","  <li class='select2-search-field'>","    <input type='text' autocomplete='off' autocorrect='off' autocapitilize='off' spellcheck='false' class='select2-input'>","  </li>","</ul>","<div class='select2-drop select2-drop-multi select2-display-none'>","   <ul class='select2-results'>","   </ul>","</div>"].join(""));return e},prepareOpts:function(){var e=this.parent.prepareOpts.apply(this,arguments),i=this;return"select"===e.element.get(0).tagName.toLowerCase()?e.initSelection=function(t,e){var n=[];t.find(":selected").each2(function(t,e){n.push(i.optionToData(e))}),e(n)}:"data"in e&&(e.initSelection=e.initSelection||function(i,n){var r=o(i.val(),e.separator),a=[];e.query({matcher:function(i,n,o){var l=t.grep(r,function(t){return s(t,e.id(o))}).length;return l&&a.push(o),l},callback:t.isFunction(n)?function(){for(var t=[],i=0;i<r.length;i++)for(var o=r[i],l=0;l<a.length;l++){var c=a[l];if(s(o,e.id(c))){t.push(c),a.splice(l,1);break}}n(t)}:t.noop})}),e},selectChoice:function(t){var e=this.container.find(".select2-search-choice-focus");e.length&&t&&t[0]==e[0]||(e.length&&this.opts.element.trigger("choice-deselected",e),e.removeClass("select2-search-choice-focus"),t&&t.length&&(this.close(),t.addClass("select2-search-choice-focus"),this.opts.element.trigger("choice-selected",t)))},initContainer:function(){var e,i=".select2-choices";this.searchContainer=this.container.find(".select2-search-field"),this.selection=e=this.container.find(i);var n=this;this.selection.on("mousedown",".select2-search-choice",function(e){n.search[0].focus(),n.selectChoice(t(this))}),this.search.attr("id","s2id_autogen"+O()),t("label[for='"+this.opts.element.attr("id")+"']").attr("for",this.search.attr("id")),this.search.on("input paste",this.bind(function(){this.isInterfaceEnabled()&&(this.opened()||this.open())})),this.search.attr("tabindex",this.elementTabIndex),this.keydowns=0,this.search.on("keydown",this.bind(function(t){if(this.isInterfaceEnabled()){++this.keydowns;var i=e.find(".select2-search-choice-focus"),n=i.prev(".select2-search-choice:not(.select2-locked)"),s=i.next(".select2-search-choice:not(.select2-locked)"),o=f(this.search);if(i.length&&(t.which==R.LEFT||t.which==R.RIGHT||t.which==R.BACKSPACE||t.which==R.DELETE||t.which==R.ENTER)){var r=i;return t.which==R.LEFT&&n.length?r=n:t.which==R.RIGHT?r=s.length?s:null:t.which===R.BACKSPACE?(this.unselect(i.first()),this.search.width(10),r=n.length?n:s):t.which==R.DELETE?(this.unselect(i.first()),this.search.width(10),r=s.length?s:null):t.which==R.ENTER&&(r=null),this.selectChoice(r),p(t),void(r&&r.length||this.open())}if((t.which===R.BACKSPACE&&1==this.keydowns||t.which==R.LEFT)&&0==o.offset&&!o.length)return this.selectChoice(e.find(".select2-search-choice:not(.select2-locked)").last()),void p(t);if(this.selectChoice(null),this.opened())switch(t.which){case R.UP:case R.DOWN:return this.moveHighlight(t.which===R.UP?-1:1),void p(t);case R.ENTER:return this.selectHighlighted(),void p(t);case R.TAB:return void this.selectHighlighted({noFocus:!0});case R.ESC:return this.cancel(t),void p(t)}if(t.which!==R.TAB&&!R.isControl(t)&&!R.isFunctionKey(t)&&t.which!==R.BACKSPACE&&t.which!==R.ESC){if(t.which===R.ENTER){if(this.opts.openOnEnter===!1)return;if(t.altKey||t.ctrlKey||t.shiftKey||t.metaKey)return}this.open(),t.which!==R.PAGE_UP&&t.which!==R.PAGE_DOWN||p(t),t.which===R.ENTER&&p(t)}}})),this.search.on("keyup",this.bind(function(t){this.keydowns=0,this.resizeSearch()})),this.search.on("blur",this.bind(function(e){this.container.removeClass("select2-container-active"),this.search.removeClass("select2-focused"),this.selectChoice(null),this.opened()||this.clearSearch(),e.stopImmediatePropagation(),this.opts.element.trigger(t.Event("select2-blur"))})),this.container.on("mousedown",i,this.bind(function(e){this.isInterfaceEnabled()&&(t(e.target).closest(".select2-search-choice").length>0||(this.selectChoice(null),this.clearPlaceholder(),this.container.hasClass("select2-container-active")||this.opts.element.trigger(t.Event("select2-focus")),this.open(),this.focusSearch(),e.preventDefault()))})),this.container.on("focus",i,this.bind(function(){this.isInterfaceEnabled()&&(this.container.hasClass("select2-container-active")||this.opts.element.trigger(t.Event("select2-focus")),this.container.addClass("select2-container-active"),this.dropdown.addClass("select2-drop-active"),this.clearPlaceholder())})),this.initContainerWidth(),this.opts.element.addClass("select2-offscreen"),this.clearSearch()},enableInterface:function(){this.parent.enableInterface.apply(this,arguments)&&this.search.prop("disabled",!this.isInterfaceEnabled())},initSelection:function(){if(""===this.opts.element.val()&&""===this.opts.element.text()&&(this.updateSelection([]),this.close(),this.clearSearch()),this.select||""!==this.opts.element.val()){var t=this;this.opts.initSelection.call(null,this.opts.element,function(i){i!==e&&null!==i&&(t.updateSelection(i),t.close(),t.clearSearch())})}},clearSearch:function(){var t=this.getPlaceholder(),i=this.getMaxSearchWidth();t!==e&&0===this.getVal().length&&this.search.hasClass("select2-focused")===!1?(this.search.val(t).addClass("select2-default"),this.search.width(i>0?i:this.container.css("width"))):this.search.val("").width(10)},clearPlaceholder:function(){this.search.hasClass("select2-default")&&this.search.val("").removeClass("select2-default")},opening:function(){this.clearPlaceholder(),this.resizeSearch(),this.parent.opening.apply(this,arguments),this.focusSearch(),this.updateResults(!0),this.search.focus(),this.opts.element.trigger(t.Event("select2-open"))},close:function(){this.opened()&&this.parent.close.apply(this,arguments)},focus:function(){this.close(),this.search.focus()},isFocused:function(){return this.search.hasClass("select2-focused")},updateSelection:function(e){var n=[],s=[],o=this;t(e).each(function(){i(o.id(this),n)<0&&(n.push(o.id(this)),s.push(this))}),e=s,this.selection.find(".select2-search-choice").remove(),t(e).each(function(){o.addSelectedChoice(this)}),o.postprocessResults()},tokenize:function(){var t=this.search.val();t=this.opts.tokenizer(t,this.data(),this.bind(this.onSelect),this.opts),null!=t&&t!=e&&(this.search.val(t),t.length>0&&this.open())},onSelect:function(t,e){this.triggerSelect(t)&&(this.addSelectedChoice(t),this.opts.element.trigger({type:"selected",val:this.id(t),choice:t}),!this.select&&this.opts.closeOnSelect||this.postprocessResults(),this.opts.closeOnSelect?(this.close(),this.search.width(10)):this.countSelectableResults()>0?(this.search.width(10),this.resizeSearch(),this.getMaximumSelectionSize()>0&&this.val().length>=this.getMaximumSelectionSize()&&this.updateResults(!0),this.positionDropdown()):(this.close(),this.search.width(10)),this.triggerChange({added:t}),e&&e.noFocus||this.focusSearch())},cancel:function(){this.close(),this.focusSearch()},addSelectedChoice:function(i){var n,s=!i.locked,o=t("<li class='select2-search-choice'>    <div></div>    <a href='#' onclick='return false;' class='select2-search-choice-close' tabindex='-1'></a></li>"),r=t("<li class='select2-search-choice select2-locked'><div></div></li>"),a=s?o:r,l=this.id(i),c=this.getVal();n=this.opts.formatSelection(i,a.find("div")),n!=e&&a.find("div").replaceWith("<div title='"+this.opts.escapeMarkup(n)+"'>"+this.opts.escapeMarkup(n)+"</div>"),s&&a.find(".select2-search-choice-close").on("mousedown",p).on("click dblclick",this.bind(function(e){this.isInterfaceEnabled()&&(t(e.target).closest(".select2-search-choice").fadeOut("fast",this.bind(function(){this.unselect(t(e.target)),this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus"),this.close(),this.focusSearch()})).dequeue(),p(e))})).on("focus",this.bind(function(){this.isInterfaceEnabled()&&(this.container.addClass("select2-container-active"),this.dropdown.addClass("select2-drop-active"))})),a.data("select2-data",i),a.insertBefore(this.searchContainer),c.push(l),this.setVal(c)},unselect:function(t){var e,n,s=this.getVal();if(t=t.closest(".select2-search-choice"),0===t.length)throw"Invalid argument: "+t+". Must be .select2-search-choice";e=t.data("select2-data"),e&&(n=i(this.id(e),s),n>=0&&(s.splice(n,1),this.setVal(s),this.select&&this.postprocessResults()),t.remove(),this.opts.element.trigger({type:"removed",val:this.id(e),choice:e}),this.triggerChange({removed:e}))},postprocessResults:function(t,e,n){var s=this.getVal(),o=this.results.find(".select2-result"),r=this.results.find(".select2-result-with-children"),a=this;o.each2(function(t,e){var n=a.id(e.data("select2-data"));i(n,s)>=0&&(e.addClass("select2-selected"),e.find(".select2-result-selectable").addClass("select2-selected"))}),r.each2(function(t,e){e.is(".select2-result-selectable")||0!==e.find(".select2-result-selectable:not(.select2-selected)").length||e.addClass("select2-selected")}),this.highlight()==-1&&n!==!1&&a.highlight(0),!this.opts.createSearchChoice&&!o.filter(".select2-result:not(.select2-selected)").length>0&&this.results.append("<li class='select2-no-results'>"+a.opts.formatNoMatches(a.search.val())+"</li>")},getMaxSearchWidth:function(){return this.selection.width()-r(this.search)},resizeSearch:function(){var t,e,i,n,s,o=r(this.search);t=m(this.search)+10,e=this.search.offset().left,i=this.selection.width(),n=this.selection.offset().left,s=i-(e-n)-o,s<t&&(s=i-o),s<40&&(s=i-o),s<=0&&(s=t),this.search.width(s)},getVal:function(){var t;return this.select?(t=this.select.val(),null===t?[]:t):(t=this.opts.element.val(),o(t,this.opts.separator))},setVal:function(e){var n;this.select?this.select.val(e):(n=[],t(e).each(function(){i(this,n)<0&&n.push(this)}),this.opts.element.val(0===n.length?"":n.join(this.opts.separator)))},buildChangeDetails:function(t,e){for(var e=e.slice(0),t=t.slice(0),i=0;i<e.length;i++)for(var n=0;n<t.length;n++)s(this.opts.id(e[i]),this.opts.id(t[n]))&&(e.splice(i,1),i--,t.splice(n,1),n--);return{added:e,removed:t}},val:function(i,n){var s,o=this;if(0===arguments.length)return this.getVal();if(s=this.data(),s.length||(s=[]),!i&&0!==i)return this.opts.element.val(""),this.updateSelection([]),this.clearSearch(),void(n&&this.triggerChange({added:this.data(),removed:s}));if(this.setVal(i),this.select)this.opts.initSelection(this.select,this.bind(this.updateSelection)),n&&this.triggerChange(this.buildChangeDetails(s,this.data()));else{if(this.opts.initSelection===e)throw new Error("val() cannot be called if initSelection() is not defined");this.opts.initSelection(this.opts.element,function(e){var i=t(e).map(o.id);o.setVal(i),o.updateSelection(e),o.clearSearch(),n&&o.triggerChange(this.buildChangeDetails(s,this.data()))})}this.clearSearch()},onSortStart:function(){if(this.select)throw new Error("Sorting of elements is not supported when attached to <select>. Attach to <input type='hidden'/> instead.");this.search.width(0),this.searchContainer.hide()},onSortEnd:function(){var e=[],i=this;this.searchContainer.show(),this.searchContainer.appendTo(this.searchContainer.parent()),this.resizeSearch(),this.selection.find(".select2-search-choice").each(function(){e.push(i.opts.id(t(this).data("select2-data")))}),this.setVal(e),this.triggerChange()},data:function(e,i){var n,s,o=this;return 0===arguments.length?this.selection.find(".select2-search-choice").map(function(){return t(this).data("select2-data")}).get():(s=this.data(),e||(e=[]),n=t.map(e,function(t){return o.opts.id(t)}),this.setVal(n),this.updateSelection(e),this.clearSearch(),i&&this.triggerChange(this.buildChangeDetails(s,this.data())),void 0)}}),t.fn.select2=function(){var n,s,o,r,a=Array.prototype.slice.call(arguments,0),l=["val","destroy","opened","open","close","focus","isFocused","container","onSortStart","onSortEnd","enable","readonly","positionDropdown","data"],c=["val","opened","isFocused","container","data"];return this.each(function(){if(0===a.length||"object"==typeof a[0])n=0===a.length?{}:t.extend({},a[0]),n.element=t(this),"select"===n.element.get(0).tagName.toLowerCase()?r=n.element.prop("multiple"):(r=n.multiple||!1,"tags"in n&&(n.multiple=r=!0)),s=r?new _:new E,s.init(n);else{if("string"!=typeof a[0])throw"Invalid arguments to select2 plugin: "+a;if(i(a[0],l)<0)throw"Unknown method: "+a[0];if(o=e,s=t(this).data("select2"),s===e)return;if(o="container"===a[0]?s.container:s[a[0]].apply(s,a.slice(1)),i(a[0],c)>=0)return!1}}),o===e?this:o},t.fn.select2.defaults={width:"copy",loadMorePadding:0,closeOnSelect:!0,openOnEnter:!0,containerCss:{},dropdownCss:{},containerCssClass:"",dropdownCssClass:"",formatResult:function(t,e,i,n){var s=[];return y(t.text,i.term,s,n),s.join("")},formatSelection:function(t,i){return t?t.text:e},sortResults:function(t,e,i){return t},formatResultCssClass:function(t){return e},formatNoMatches:function(){return"No matches found"},formatInputTooShort:function(t,e){var i=e-t.length;return"Please enter "+i+" more character"+(1==i?"":"s")},formatInputTooLong:function(t,e){var i=t.length-e;return"Please delete "+i+" character"+(1==i?"":"s")},formatSelectionTooBig:function(t){return"You can only select "+t+" item"+(1==t?"":"s")},formatLoadMore:function(t){return"Loading more results..."},formatSearching:function(){return"Searching..."},minimumResultsForSearch:0,minimumInputLength:0,maximumInputLength:null,maximumSelectionSize:0,id:function(t){return t.id},matcher:function(t,e){return(""+e).toUpperCase().indexOf((""+t).toUpperCase())>=0},separator:",",tokenSeparators:[],tokenizer:M,escapeMarkup:function(t){var e={"\\":"&#92;","&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#47;"};return String(t).replace(/[&<>"'\/\\]/g,function(t){return e[t]})},blurOnChange:!1,selectOnBlur:!1,adaptContainerCssClass:function(t){return t},adaptDropdownCssClass:function(t){return null}},t.fn.select2.ajaxDefaults={transport:t.ajax,params:{type:"GET",cache:!1,dataType:"json"}},window.Select2={query:{ajax:w,local:b,tags:C},util:{debounce:c,markMatch:y},"class":{"abstract":I,single:E,multi:_}}}}(jQuery)},29:function(t,e){"use strict";function i(t){var e=null;if(document.cookie&&""!==document.cookie)for(var i=document.cookie.split(";"),n=0;n<i.length;n++){var s=i[n].trim();if(s.substring(0,t.length+1)===t+"="){e=decodeURIComponent(s.substring(t.length+1));break}}return e}function n(t,e){var i=arguments.length<=2||void 0===arguments[2]?{}:arguments[2];null===e&&(e="",i.expires=-1);var n="";if(i.expires&&("number"==typeof i.expires||i.expires.toUTCString)){var s=void 0;"number"==typeof i.expires?(s=new Date,s.setTime(s.getTime()+24*i.expires*60*60*1e3)):s=i.expires,n="; expires="+s.toUTCString()}var o=i.path?"; path="+i.path:"",r=i.domain?"; domain="+i.domain:"",a=i.secure?"; secure":"";document.cookie=t+"="+encodeURIComponent(e)+(""+n+o+r+a)}function s(t,e,s){return void 0===e?i(t):void n(t,e,s)}Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=s},30:function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function s(t){var e=t.url,i=t.body,n=t.method,s=void 0===n?"GET":n,o=t.dataType,c=void 0===o?"json":o,u=t.queue,h=void 0===u?null:u,d=t.crossDomain,f=void 0!==d&&d;return h=h||e,a[h]&&a[h].abort(),a[h]=r["default"].ajax({crossDomain:f,method:s,url:l(e),data:i,dataType:c}),a[h]}Object.defineProperty(e,"__esModule",{value:!0});var o=i(3),r=n(o),a={};e["default"]=s},31:function(t,e){/*!
	 * jQuery serializeObject - v0.2 - 1/20/2010
	 * http://benalman.com/projects/jquery-misc-plugins/
	 * 
	 * Copyright (c) 2010 "Cowboy" Ben Alman
	 * Dual licensed under the MIT and GPL licenses.
	 * http://benalman.com/about/license/
	 */
!function(t,e){"$:nomunge";t.fn.serializeObject=function(){var i={};return t.each(this.serializeArray(),function(n,s){var o=s.name,r=s.value;i[o]=i[o]===e?r:t.isArray(i[o])?i[o].concat(r):[i[o],r]}),i}}(jQuery)},32:function(t,e,i){"use strict";var n,s=i(4),o=i(8),r=o.Model.extend({defaults:{text:"",level:"info",language:"en"}}),a=o.Collection.extend({model:r}),l=o.View.extend({className:"alert alert-block",render:function(){return this.$el.addClass(["alert",this.model.get("level")].join("-")),this.$el.attr("lang",this.model.get("language")),this.$el.html(this.model.get("text")).hide().fadeIn(300),this}}),c=o.View.extend({el:".js-alerts",initialize:function(){this.subViews=[],this.listenTo(this.collection,"add",this.add),this.listenTo(this.collection,"remove",this.remove)},add:function(t){var e=new l({model:t});this.subViews.push(e),this.$el.prepend(e.render().el)},remove:function(t){var e=s.find(this.subViews,function(e){return e.model===t});this.subViews=s(this.subViews).without(e),e.$el.fadeOut(3500,function(){e.remove()})}}),u=new a,h={show:function(t){n||(n=new c({collection:u}));var e=new r(t);u.add(e),window.setTimeout(function(){u.remove(e)},2e3)}};t.exports=h},44:function(t,e){!function(t){var e,i,n,s,o,r,a,l="Close",c="BeforeClose",u="AfterClose",h="BeforeAppend",d="MarkupParse",f="Open",p="Change",g="mfp",m="."+g,v="mfp-ready",y="mfp-removing",w="mfp-prevent-close",b=function(){},C=!!window.jQuery,x=t(window),k=function(t,i){e.ev.on(g+t+m,i)},S=function(e,i,n,s){var o=document.createElement("div");return o.className="mfp-"+e,n&&(o.innerHTML=n),s?i&&i.appendChild(o):(o=t(o),i&&o.appendTo(i)),o},M=function(i,n){e.ev.triggerHandler(g+i,n),e.st.callbacks&&(i=i.charAt(0).toLowerCase()+i.slice(1),e.st.callbacks[i]&&e.st.callbacks[i].apply(e,t.isArray(n)?n:[n]))},T=function(i){return i===a&&e.currTemplate.closeBtn||(e.currTemplate.closeBtn=t(e.st.closeMarkup.replace("%title%",e.st.tClose)),a=i),e.currTemplate.closeBtn},R=function(){t.magnificPopup.instance||(e=new b,e.init(),t.magnificPopup.instance=e)},I=function(){var t=document.createElement("p").style,e=["ms","O","Moz","Webkit"];if(void 0!==t.transition)return!0;for(;e.length;)if(e.pop()+"Transition"in t)return!0;return!1};b.prototype={constructor:b,init:function(){var i=navigator.appVersion;e.isIE7=i.indexOf("MSIE 7.")!==-1,e.isIE8=i.indexOf("MSIE 8.")!==-1,e.isLowIE=e.isIE7||e.isIE8,e.isAndroid=/android/gi.test(i),e.isIOS=/iphone|ipad|ipod/gi.test(i),e.supportsTransition=I(),e.probablyMobile=e.isAndroid||e.isIOS||/(Opera Mini)|Kindle|webOS|BlackBerry|(Opera Mobi)|(Windows Phone)|IEMobile/i.test(navigator.userAgent),s=t(document),e.popupsCache={}},open:function(i){n||(n=t(document.body));var o;if(i.isObj===!1){e.items=i.items.toArray(),e.index=0;var a,l=i.items;for(o=0;o<l.length;o++)if(a=l[o],a.parsed&&(a=a.el[0]),a===i.el[0]){e.index=o;break}}else e.items=t.isArray(i.items)?i.items:[i.items],e.index=i.index||0;if(e.isOpen)return void e.updateItemHTML();e.types=[],r="",i.mainEl&&i.mainEl.length?e.ev=i.mainEl.eq(0):e.ev=s,i.key?(e.popupsCache[i.key]||(e.popupsCache[i.key]={}),e.currTemplate=e.popupsCache[i.key]):e.currTemplate={},e.st=t.extend(!0,{},t.magnificPopup.defaults,i),e.fixedContentPos="auto"===e.st.fixedContentPos?!e.probablyMobile:e.st.fixedContentPos,e.st.modal&&(e.st.closeOnContentClick=!1,e.st.closeOnBgClick=!1,e.st.showCloseBtn=!1,e.st.enableEscapeKey=!1),e.bgOverlay||(e.bgOverlay=S("bg").on("click"+m,function(){e.close()}),e.wrap=S("wrap").attr("tabindex",-1).on("click"+m,function(t){e._checkIfClose(t.target)&&e.close()}),e.container=S("container",e.wrap)),e.contentContainer=S("content"),e.st.preloader&&(e.preloader=S("preloader",e.container,e.st.tLoading));var c=t.magnificPopup.modules;for(o=0;o<c.length;o++){var u=c[o];u=u.charAt(0).toUpperCase()+u.slice(1),e["init"+u].call(e)}M("BeforeOpen"),e.st.showCloseBtn&&(e.st.closeBtnInside?(k(d,function(t,e,i,n){i.close_replaceWith=T(n.type)}),r+=" mfp-close-btn-in"):e.wrap.append(T())),e.st.alignTop&&(r+=" mfp-align-top"),e.fixedContentPos?e.wrap.css({overflow:e.st.overflowY,overflowX:"hidden",overflowY:e.st.overflowY}):e.wrap.css({top:x.scrollTop(),position:"absolute"}),(e.st.fixedBgPos===!1||"auto"===e.st.fixedBgPos&&!e.fixedContentPos)&&e.bgOverlay.css({height:s.height(),position:"absolute"}),e.st.enableEscapeKey&&s.on("keyup"+m,function(t){27===t.keyCode&&e.close()}),x.on("resize"+m,function(){e.updateSize()}),e.st.closeOnContentClick||(r+=" mfp-auto-cursor"),r&&e.wrap.addClass(r);var h=e.wH=x.height(),p={};if(e.fixedContentPos&&e._hasScrollBar(h)){var g=e._getScrollbarSize();g&&(p.marginRight=g)}e.fixedContentPos&&(e.isIE7?t("body, html").css("overflow","hidden"):p.overflow="hidden");var y=e.st.mainClass;return e.isIE7&&(y+=" mfp-ie7"),y&&e._addClassToMFP(y),e.updateItemHTML(),M("BuildControls"),t("html").css(p),e.bgOverlay.add(e.wrap).prependTo(e.st.prependTo||n),e._lastFocusedEl=document.activeElement,setTimeout(function(){e.content?(e._addClassToMFP(v),e._setFocus()):e.bgOverlay.addClass(v),s.on("focusin"+m,e._onFocusIn)},16),e.isOpen=!0,e.updateSize(h),M(f),i},close:function(){e.isOpen&&(M(c),e.isOpen=!1,e.st.removalDelay&&!e.isLowIE&&e.supportsTransition?(e._addClassToMFP(y),setTimeout(function(){e._close()},e.st.removalDelay)):e._close())},_close:function(){M(l);var i=y+" "+v+" ";if(e.bgOverlay.detach(),e.wrap.detach(),e.container.empty(),e.st.mainClass&&(i+=e.st.mainClass+" "),e._removeClassFromMFP(i),e.fixedContentPos){var n={marginRight:""};e.isIE7?t("body, html").css("overflow",""):n.overflow="",t("html").css(n)}s.off("keyup"+m+" focusin"+m),e.ev.off(m),e.wrap.attr("class","mfp-wrap").removeAttr("style"),e.bgOverlay.attr("class","mfp-bg"),e.container.attr("class","mfp-container"),!e.st.showCloseBtn||e.st.closeBtnInside&&e.currTemplate[e.currItem.type]!==!0||e.currTemplate.closeBtn&&e.currTemplate.closeBtn.detach(),e._lastFocusedEl&&t(e._lastFocusedEl).focus(),e.currItem=null,e.content=null,e.currTemplate=null,e.prevHeight=0,M(u)},updateSize:function(t){if(e.isIOS){var i=document.documentElement.clientWidth/window.innerWidth,n=window.innerHeight*i;e.wrap.css("height",n),e.wH=n}else e.wH=t||x.height();e.fixedContentPos||e.wrap.css("height",e.wH),M("Resize")},updateItemHTML:function(){var i=e.items[e.index];e.contentContainer.detach(),e.content&&e.content.detach(),i.parsed||(i=e.parseEl(e.index));var n=i.type;if(M("BeforeChange",[e.currItem?e.currItem.type:"",n]),e.currItem=i,!e.currTemplate[n]){var s=!!e.st[n]&&e.st[n].markup;M("FirstMarkupParse",s),s?e.currTemplate[n]=t(s):e.currTemplate[n]=!0}o&&o!==i.type&&e.container.removeClass("mfp-"+o+"-holder");var r=e["get"+n.charAt(0).toUpperCase()+n.slice(1)](i,e.currTemplate[n]);e.appendContent(r,n),i.preloaded=!0,M(p,i),o=i.type,e.container.prepend(e.contentContainer),M("AfterChange")},appendContent:function(t,i){e.content=t,t?e.st.showCloseBtn&&e.st.closeBtnInside&&e.currTemplate[i]===!0?e.content.find(".mfp-close").length||e.content.append(T()):e.content=t:e.content="",M(h),e.container.addClass("mfp-"+i+"-holder"),e.contentContainer.append(e.content)},parseEl:function(i){var n,s=e.items[i];if(s.tagName?s={el:t(s)}:(n=s.type,s={data:s,src:s.src}),s.el){for(var o=e.types,r=0;r<o.length;r++)if(s.el.hasClass("mfp-"+o[r])){n=o[r];break}s.src=s.el.attr("data-mfp-src"),s.src||(s.src=s.el.attr("href"))}return s.type=n||e.st.type||"inline",s.index=i,s.parsed=!0,e.items[i]=s,M("ElementParse",s),e.items[i]},addGroup:function(t,i){var n=function(n){n.mfpEl=this,e._openClick(n,t,i)};i||(i={});var s="click.magnificPopup";i.mainEl=t,i.items?(i.isObj=!0,t.off(s).on(s,n)):(i.isObj=!1,i.delegate?t.off(s).on(s,i.delegate,n):(i.items=t,t.off(s).on(s,n)))},_openClick:function(i,n,s){var o=void 0!==s.midClick?s.midClick:t.magnificPopup.defaults.midClick;if(o||2!==i.which&&!i.ctrlKey&&!i.metaKey){var r=void 0!==s.disableOn?s.disableOn:t.magnificPopup.defaults.disableOn;if(r)if(t.isFunction(r)){if(!r.call(e))return!0}else if(x.width()<r)return!0;i.type&&(i.preventDefault(),e.isOpen&&i.stopPropagation()),s.el=t(i.mfpEl),s.delegate&&(s.items=n.find(s.delegate)),e.open(s)}},updateStatus:function(t,n){if(e.preloader){i!==t&&e.container.removeClass("mfp-s-"+i),n||"loading"!==t||(n=e.st.tLoading);var s={status:t,text:n};M("UpdateStatus",s),t=s.status,n=s.text,e.preloader.html(n),e.preloader.find("a").on("click",function(t){t.stopImmediatePropagation()}),e.container.addClass("mfp-s-"+t),i=t}},_checkIfClose:function(i){if(!t(i).hasClass(w)){var n=e.st.closeOnContentClick,s=e.st.closeOnBgClick;if(n&&s)return!0;if(!e.content||t(i).hasClass("mfp-close")||e.preloader&&i===e.preloader[0])return!0;if(i===e.content[0]||t.contains(e.content[0],i)){if(n)return!0}else if(s&&t.contains(document,i))return!0;return!1}},_addClassToMFP:function(t){e.bgOverlay.addClass(t),e.wrap.addClass(t)},_removeClassFromMFP:function(t){this.bgOverlay.removeClass(t),e.wrap.removeClass(t)},_hasScrollBar:function(t){return(e.isIE7?s.height():document.body.scrollHeight)>(t||x.height())},_setFocus:function(){(e.st.focus?e.content.find(e.st.focus).eq(0):e.wrap).focus()},_onFocusIn:function(i){if(i.target!==e.wrap[0]&&!t.contains(e.wrap[0],i.target))return e._setFocus(),!1},_parseMarkup:function(e,i,n){var s;n.data&&(i=t.extend(n.data,i)),M(d,[e,i,n]),t.each(i,function(t,i){if(void 0===i||i===!1)return!0;if(s=t.split("_"),s.length>1){var n=e.find(m+"-"+s[0]);if(n.length>0){var o=s[1];"replaceWith"===o?n[0]!==i[0]&&n.replaceWith(i):"img"===o?n.is("img")?n.attr("src",i):n.replaceWith('<img src="'+i+'" class="'+n.attr("class")+'" />'):n.attr(s[1],i)}}else e.find(m+"-"+t).html(i)})},_getScrollbarSize:function(){if(void 0===e.scrollbarSize){var t=document.createElement("div");t.id="mfp-sbm",t.style.cssText="width: 99px; height: 99px; overflow: scroll; position: absolute; top: -9999px;",document.body.appendChild(t),e.scrollbarSize=t.offsetWidth-t.clientWidth,document.body.removeChild(t)}return e.scrollbarSize}},t.magnificPopup={instance:null,proto:b.prototype,modules:[],open:function(e,i){return R(),e=e?t.extend(!0,{},e):{},e.isObj=!0,e.index=i||0,this.instance.open(e)},close:function(){return t.magnificPopup.instance&&t.magnificPopup.instance.close()},registerModule:function(e,i){i.options&&(t.magnificPopup.defaults[e]=i.options),t.extend(this.proto,i.proto),this.modules.push(e)},defaults:{disableOn:0,key:null,midClick:!1,mainClass:"",preloader:!0,focus:"",closeOnContentClick:!1,closeOnBgClick:!0,closeBtnInside:!0,showCloseBtn:!0,enableEscapeKey:!0,modal:!1,alignTop:!1,removalDelay:0,prependTo:null,fixedContentPos:"auto",fixedBgPos:"auto",overflowY:"auto",closeMarkup:'<button title="%title%" type="button" class="mfp-close">&times;</button>',tClose:"Close (Esc)",tLoading:"Loading..."}},t.fn.magnificPopup=function(i){R();var n=t(this);if("string"==typeof i)if("open"===i){var s,o=C?n.data("magnificPopup"):n[0].magnificPopup,r=parseInt(arguments[1],10)||0;o.items?s=o.items[r]:(s=n,o.delegate&&(s=s.find(o.delegate)),s=s.eq(r)),e._openClick({mfpEl:s},n,o)}else e.isOpen&&e[i].apply(e,Array.prototype.slice.call(arguments,1));else i=t.extend(!0,{},i),C?n.data("magnificPopup",i):n[0].magnificPopup=i,e.addGroup(n,i);return n};var E,_,O,j="inline",z=function(){O&&(_.after(O.addClass(E)).detach(),O=null)};t.magnificPopup.registerModule(j,{options:{hiddenClass:"hide",markup:"",tNotFound:"Content not found"},proto:{initInline:function(){e.types.push(j),k(l+"."+j,function(){z()})},getInline:function(i,n){if(z(),i.src){var s=e.st.inline,o=t(i.src);if(o.length){var r=o[0].parentNode;r&&r.tagName&&(_||(E=s.hiddenClass,_=S(E),E="mfp-"+E),O=o.after(_).detach().removeClass(E)),e.updateStatus("ready")}else e.updateStatus("error",s.tNotFound),o=t("<div>");return i.inlineElement=o,o}return e.updateStatus("ready"),e._parseMarkup(n,{},i),n}}});var P,A="ajax",N=function(){P&&n.removeClass(P)},L=function(){N(),e.req&&e.req.abort()};t.magnificPopup.registerModule(A,{options:{settings:null,cursor:"mfp-ajax-cur",tError:'<a href="%url%">The content</a> could not be loaded.'},proto:{initAjax:function(){e.types.push(A),P=e.st.ajax.cursor,k(l+"."+A,L),k("BeforeChange."+A,L)},getAjax:function(i){P&&n.addClass(P),e.updateStatus("loading");var s=t.extend({url:i.src,success:function(n,s,o){var r={data:n,xhr:o};M("ParseAjax",r),e.appendContent(t(r.data),A),i.finished=!0,N(),e._setFocus(),setTimeout(function(){e.wrap.addClass(v)},16),e.updateStatus("ready"),M("AjaxContentAdded")},error:function(){N(),i.finished=i.loadError=!0,e.updateStatus("error",e.st.ajax.tError.replace("%url%",i.src))}},e.st.ajax.settings);return e.req=t.ajax(s),""}}});var D,F=function(i){if(i.data&&void 0!==i.data.title)return i.data.title;var n=e.st.image.titleSrc;if(n){if(t.isFunction(n))return n.call(e,i);if(i.el)return i.el.attr(n)||""}return""};t.magnificPopup.registerModule("image",{options:{markup:'<div class="mfp-figure"><div class="mfp-close"></div><figure><div class="mfp-img"></div><figcaption><div class="mfp-bottom-bar"><div class="mfp-title"></div><div class="mfp-counter"></div></div></figcaption></figure></div>',cursor:"mfp-zoom-out-cur",titleSrc:"title",verticalFit:!0,tError:'<a href="%url%">The image</a> could not be loaded.'},proto:{initImage:function(){var t=e.st.image,i=".image";e.types.push("image"),k(f+i,function(){"image"===e.currItem.type&&t.cursor&&n.addClass(t.cursor)}),k(l+i,function(){t.cursor&&n.removeClass(t.cursor),x.off("resize"+m)}),k("Resize"+i,e.resizeImage),e.isLowIE&&k("AfterChange",e.resizeImage)},resizeImage:function(){var t=e.currItem;if(t&&t.img&&e.st.image.verticalFit){var i=0;e.isLowIE&&(i=parseInt(t.img.css("padding-top"),10)+parseInt(t.img.css("padding-bottom"),10)),t.img.css("max-height",e.wH-i)}},_onImageHasSize:function(t){t.img&&(t.hasSize=!0,D&&clearInterval(D),t.isCheckingImgSize=!1,M("ImageHasSize",t),t.imgHidden&&(e.content&&e.content.removeClass("mfp-loading"),t.imgHidden=!1))},findImageSize:function(t){var i=0,n=t.img[0],s=function(o){D&&clearInterval(D),D=setInterval(function(){return n.naturalWidth>0?void e._onImageHasSize(t):(i>200&&clearInterval(D),i++,void(3===i?s(10):40===i?s(50):100===i&&s(500)))},o)};s(1)},getImage:function(i,n){var s=0,o=function(){i&&(i.img[0].complete?(i.img.off(".mfploader"),i===e.currItem&&(e._onImageHasSize(i),e.updateStatus("ready")),i.hasSize=!0,i.loaded=!0,M("ImageLoadComplete")):(s++,s<200?setTimeout(o,100):r()))},r=function(){i&&(i.img.off(".mfploader"),i===e.currItem&&(e._onImageHasSize(i),e.updateStatus("error",a.tError.replace("%url%",i.src))),i.hasSize=!0,i.loaded=!0,i.loadError=!0)},a=e.st.image,l=n.find(".mfp-img");if(l.length){var c=document.createElement("img");c.className="mfp-img",i.img=t(c).on("load.mfploader",o).on("error.mfploader",r),c.src=i.src,l.is("img")&&(i.img=i.img.clone()),c=i.img[0],c.naturalWidth>0?i.hasSize=!0:c.width||(i.hasSize=!1)}return e._parseMarkup(n,{title:F(i),img_replaceWith:i.img},i),e.resizeImage(),i.hasSize?(D&&clearInterval(D),i.loadError?(n.addClass("mfp-loading"),e.updateStatus("error",a.tError.replace("%url%",i.src))):(n.removeClass("mfp-loading"),e.updateStatus("ready")),n):(e.updateStatus("loading"),i.loading=!0,i.hasSize||(i.imgHidden=!0,n.addClass("mfp-loading"),e.findImageSize(i)),n)}}});var B,H=function(){return void 0===B&&(B=void 0!==document.createElement("p").style.MozTransform),B};t.magnificPopup.registerModule("zoom",{options:{enabled:!1,easing:"ease-in-out",duration:300,opener:function(t){return t.is("img")?t:t.find("img")}},proto:{initZoom:function(){var t,i=e.st.zoom,n=".zoom";if(i.enabled&&e.supportsTransition){var s,o,r=i.duration,a=function(t){var e=t.clone().removeAttr("style").removeAttr("class").addClass("mfp-animated-image"),n="all "+i.duration/1e3+"s "+i.easing,s={position:"fixed",zIndex:9999,left:0,top:0,"-webkit-backface-visibility":"hidden"},o="transition";return s["-webkit-"+o]=s["-moz-"+o]=s["-o-"+o]=s[o]=n,e.css(s),e},u=function(){e.content.css("visibility","visible")};k("BuildControls"+n,function(){if(e._allowZoom()){if(clearTimeout(s),e.content.css("visibility","hidden"),t=e._getItemToZoom(),!t)return void u();o=a(t),o.css(e._getOffset()),e.wrap.append(o),s=setTimeout(function(){o.css(e._getOffset(!0)),s=setTimeout(function(){u(),setTimeout(function(){o.remove(),t=o=null,M("ZoomAnimationEnded")},16)},r)},16)}}),k(c+n,function(){if(e._allowZoom()){if(clearTimeout(s),e.st.removalDelay=r,!t){if(t=e._getItemToZoom(),!t)return;o=a(t)}o.css(e._getOffset(!0)),e.wrap.append(o),e.content.css("visibility","hidden"),setTimeout(function(){o.css(e._getOffset())},16)}}),k(l+n,function(){e._allowZoom()&&(u(),o&&o.remove(),t=null)})}},_allowZoom:function(){return"image"===e.currItem.type},_getItemToZoom:function(){return!!e.currItem.hasSize&&e.currItem.img},_getOffset:function(i){var n;n=i?e.currItem.img:e.st.zoom.opener(e.currItem.el||e.currItem);var s=n.offset(),o=parseInt(n.css("padding-top"),10),r=parseInt(n.css("padding-bottom"),10);s.top-=t(window).scrollTop()-o;var a={width:n.width(),height:(C?n.innerHeight():n[0].offsetHeight)-r-o};return H()?a["-moz-transform"]=a.transform="translate("+s.left+"px,"+s.top+"px)":(a.left=s.left,a.top=s.top),a}}});var U="iframe",$="//about:blank",W=function(t){if(e.currTemplate[U]){var i=e.currTemplate[U].find("iframe");i.length&&(t||(i[0].src=$),e.isIE8&&i.css("display",t?"block":"none"))}};t.magnificPopup.registerModule(U,{options:{markup:'<div class="mfp-iframe-scaler"><div class="mfp-close"></div><iframe class="mfp-iframe" src="//about:blank" frameborder="0" allowfullscreen></iframe></div>',srcAction:"iframe_src",patterns:{youtube:{index:"youtube.com",id:"v=",src:"//www.youtube.com/embed/%id%?autoplay=1"},vimeo:{index:"vimeo.com/",id:"/",src:"//player.vimeo.com/video/%id%?autoplay=1"},gmaps:{index:"//maps.google.",src:"%id%&output=embed"}}},proto:{initIframe:function(){e.types.push(U),k("BeforeChange",function(t,e,i){e!==i&&(e===U?W():i===U&&W(!0))}),k(l+"."+U,function(){W()})},getIframe:function(i,n){var s=i.src,o=e.st.iframe;t.each(o.patterns,function(){if(s.indexOf(this.index)>-1)return this.id&&(s="string"==typeof this.id?s.substr(s.lastIndexOf(this.id)+this.id.length,s.length):this.id.call(this,s)),s=this.src.replace("%id%",s),!1});var r={};return o.srcAction&&(r[o.srcAction]=s),e._parseMarkup(n,r,i),e.updateStatus("ready"),n}}});var q=function(t){var i=e.items.length;return t>i-1?t-i:t<0?i+t:t},Q=function(t,e,i){return t.replace(/%curr%/gi,e+1).replace(/%total%/gi,i)};t.magnificPopup.registerModule("gallery",{options:{enabled:!1,arrowMarkup:'<button title="%title%" type="button" class="mfp-arrow mfp-arrow-%dir%"></button>',preload:[0,2],navigateByImgClick:!0,arrows:!0,tPrev:"Previous (Left arrow key)",tNext:"Next (Right arrow key)",tCounter:"%curr% of %total%"},proto:{initGallery:function(){var i=e.st.gallery,n=".mfp-gallery",o=Boolean(t.fn.mfpFastClick);return e.direction=!0,!(!i||!i.enabled)&&(r+=" mfp-gallery",k(f+n,function(){i.navigateByImgClick&&e.wrap.on("click"+n,".mfp-img",function(){if(e.items.length>1)return e.next(),!1}),s.on("keydown"+n,function(t){37===t.keyCode?e.prev():39===t.keyCode&&e.next()})}),k("UpdateStatus"+n,function(t,i){i.text&&(i.text=Q(i.text,e.currItem.index,e.items.length))}),k(d+n,function(t,n,s,o){var r=e.items.length;s.counter=r>1?Q(i.tCounter,o.index,r):""}),k("BuildControls"+n,function(){if(e.items.length>1&&i.arrows&&!e.arrowLeft){var n=i.arrowMarkup,s=e.arrowLeft=t(n.replace(/%title%/gi,i.tPrev).replace(/%dir%/gi,"left")).addClass(w),r=e.arrowRight=t(n.replace(/%title%/gi,i.tNext).replace(/%dir%/gi,"right")).addClass(w),a=o?"mfpFastClick":"click";s[a](function(){e.prev()}),r[a](function(){e.next()}),e.isIE7&&(S("b",s[0],!1,!0),S("a",s[0],!1,!0),S("b",r[0],!1,!0),S("a",r[0],!1,!0)),e.container.append(s.add(r))}}),k(p+n,function(){e._preloadTimeout&&clearTimeout(e._preloadTimeout),e._preloadTimeout=setTimeout(function(){e.preloadNearbyImages(),e._preloadTimeout=null},16)}),void k(l+n,function(){s.off(n),e.wrap.off("click"+n),e.arrowLeft&&o&&e.arrowLeft.add(e.arrowRight).destroyMfpFastClick(),e.arrowRight=e.arrowLeft=null}))},next:function(){e.direction=!0,e.index=q(e.index+1),e.updateItemHTML()},prev:function(){e.direction=!1,e.index=q(e.index-1),e.updateItemHTML()},goTo:function(t){e.direction=t>=e.index,e.index=t,e.updateItemHTML()},preloadNearbyImages:function(){var t,i=e.st.gallery.preload,n=Math.min(i[0],e.items.length),s=Math.min(i[1],e.items.length);for(t=1;t<=(e.direction?s:n);t++)e._preloadItem(e.index+t);for(t=1;t<=(e.direction?n:s);t++)e._preloadItem(e.index-t)},_preloadItem:function(i){if(i=q(i),!e.items[i].preloaded){var n=e.items[i];n.parsed||(n=e.parseEl(i)),M("LazyLoad",n),"image"===n.type&&(n.img=t('<img class="mfp-img" />').on("load.mfploader",function(){n.hasSize=!0}).on("error.mfploader",function(){n.hasSize=!0,n.loadError=!0,M("LazyLoadError",n)}).attr("src",n.src)),n.preloaded=!0}}}});var V="retina";t.magnificPopup.registerModule(V,{options:{replaceSrc:function(t){return t.src.replace(/\.\w+$/,function(t){return"@2x"+t})},ratio:1},proto:{initRetina:function(){if(window.devicePixelRatio>1){var t=e.st.retina,i=t.ratio;i=isNaN(i)?i():i,i>1&&(k("ImageHasSize."+V,function(t,e){e.img.css({"max-width":e.img[0].naturalWidth/i,width:"100%"})}),k("ElementParse."+V,function(e,n){n.src=t.replaceSrc(n,i)}))}}}}),R()}(window.jQuery||window.Zepto)},45:function(t,e,i){var n=i(46);!function(t){t.fn.spin=function(e){return this.each(function(){var i=t(this),s=i.data();s.spinner&&(s.spinner.stop(),delete s.spinner),e!==!1&&(s.spinner=new n(t.extend({color:i.css("color")},e)).spin(this))}),this}}(jQuery)},46:function(t,e,i){!function(e,i){t.exports=i()}(this,function(){"use strict";function t(t,e){var i,n=document.createElement(t||"div");for(i in e)n[i]=e[i];return n}function e(t){for(var e=1,i=arguments.length;e<i;e++)t.appendChild(arguments[e]);return t}function i(t,e,i,n){var s=["opacity",e,~~(100*t),i,n].join("-"),o=.01+i/n*100,r=Math.max(1-(1-t)/e*(100-o),t),a=u.substring(0,u.indexOf("Animation")).toLowerCase(),l=a&&"-"+a+"-"||"";return d[s]||(f.insertRule("@"+l+"keyframes "+s+"{0%{opacity:"+r+"}"+o+"%{opacity:"+t+"}"+(o+.01)+"%{opacity:1}"+(o+e)%100+"%{opacity:"+t+"}100%{opacity:"+r+"}}",f.cssRules.length),d[s]=1),s}function n(t,e){var i,n,s=t.style;for(e=e.charAt(0).toUpperCase()+e.slice(1),n=0;n<h.length;n++)if(i=h[n]+e,void 0!==s[i])return i;if(void 0!==s[e])return e}function s(t,e){for(var i in e)t.style[n(t,i)||i]=e[i];return t}function o(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)void 0===t[n]&&(t[n]=i[n])}return t}function r(t){for(var e={x:t.offsetLeft,y:t.offsetTop};t=t.offsetParent;)e.x+=t.offsetLeft,e.y+=t.offsetTop;return e}function a(t,e){return"string"==typeof t?t:t[e%t.length]}function l(t){return"undefined"==typeof this?new l(t):void(this.opts=o(t||{},l.defaults,p))}function c(){function i(e,i){return t("<"+e+' xmlns="urn:schemas-microsoft.com:vml" class="spin-vml">',i)}f.addRule(".spin-vml","behavior:url(#default#VML)"),l.prototype.lines=function(t,n){function o(){return s(i("group",{coordsize:u+" "+u,coordorigin:-c+" "+-c}),{width:u,height:u})}function r(t,r,l){e(d,e(s(o(),{rotation:360/n.lines*t+"deg",left:~~r}),e(s(i("roundrect",{arcsize:n.corners}),{width:c,height:n.width,left:n.radius,top:-n.width>>1,filter:l}),i("fill",{color:a(n.color,t),opacity:n.opacity}),i("stroke",{opacity:0}))))}var l,c=n.length+n.width,u=2*c,h=2*-(n.width+n.length)+"px",d=s(o(),{position:"absolute",top:h,left:h});if(n.shadow)for(l=1;l<=n.lines;l++)r(l,-2,"progid:DXImageTransform.Microsoft.Blur(pixelradius=2,makeshadow=1,shadowopacity=.3)");for(l=1;l<=n.lines;l++)r(l);return e(t,d)},l.prototype.opacity=function(t,e,i,n){var s=t.firstChild;n=n.shadow&&n.lines||0,s&&e+n<s.childNodes.length&&(s=s.childNodes[e+n],s=s&&s.firstChild,s=s&&s.firstChild,s&&(s.opacity=i))}}var u,h=["webkit","Moz","ms","O"],d={},f=function(){var i=t("style",{type:"text/css"});return e(document.getElementsByTagName("head")[0],i),i.sheet||i.styleSheet}(),p={lines:12,length:7,width:5,radius:10,rotate:0,corners:1,color:"#000",direction:1,speed:1,trail:100,opacity:.25,fps:20,zIndex:2e9,className:"spinner",top:"auto",left:"auto",position:"relative"};l.defaults={},o(l.prototype,{spin:function(e){this.stop();var i,n,o=this,a=o.opts,l=o.el=s(t(0,{className:a.className}),{position:a.position,width:0,zIndex:a.zIndex}),c=a.radius+a.length+a.width;if(e&&(e.insertBefore(l,e.firstChild||null),n=r(e),i=r(l),s(l,{left:("auto"==a.left?n.x-i.x+(e.offsetWidth>>1):parseInt(a.left,10)+c)+"px",top:("auto"==a.top?n.y-i.y+(e.offsetHeight>>1):parseInt(a.top,10)+c)+"px"})),l.setAttribute("role","progressbar"),o.lines(l,o.opts),!u){var h,d=0,f=(a.lines-1)*(1-a.direction)/2,p=a.fps,g=p/a.speed,m=(1-a.opacity)/(g*a.trail/100),v=g/a.lines;!function y(){d++;for(var t=0;t<a.lines;t++)h=Math.max(1-(d+(a.lines-t)*v)%g*m,a.opacity),o.opacity(l,t*a.direction+f,h,a);o.timeout=o.el&&setTimeout(y,~~(1e3/p))}()}return o},stop:function(){var t=this.el;return t&&(clearTimeout(this.timeout),t.parentNode&&t.parentNode.removeChild(t),this.el=void 0),this},lines:function(n,o){function r(e,i){return s(t(),{position:"absolute",width:o.length+o.width+"px",height:o.width+"px",background:e,boxShadow:i,transformOrigin:"left",transform:"rotate("+~~(360/o.lines*c+o.rotate)+"deg) translate("+o.radius+"px,0)",borderRadius:(o.corners*o.width>>1)+"px"})}for(var l,c=0,h=(o.lines-1)*(1-o.direction)/2;c<o.lines;c++)l=s(t(),{position:"absolute",top:1+~(o.width/2)+"px",transform:o.hwaccel?"translate3d(0,0,0)":"",opacity:o.opacity,animation:u&&i(o.opacity,o.trail,h+c*o.direction,o.lines)+" "+1/o.speed+"s linear infinite"}),o.shadow&&e(l,s(r("#000","0 0 4px #000"),{top:"2px"})),e(n,e(l,r(a(o.color,c),"0 0 1px rgba(0,0,0,.1)")));return n},opacity:function(t,e,i){e<t.childNodes.length&&(t.childNodes[e].style.opacity=i)}});var g=s(t("group"),{behavior:"url(#default#VML)"});return!n(g,"transform")&&g.adj?c():u=n(g,"animation"),l})},47:function(t,e,i){"use strict";var n=i(3),s=i(10),o=function(t,e){t.length===t.filter(":checked").length?e.prop("disabled",!1):e.prop("disabled",!0)},r={updateRelativeDates:function(){n(".js-relative-date").each(function(t,e){n(e).text(s.relativeDate(Date.parse(n(e).attr("datetime"))))})},fixSidebarHeight:function(){var t,e,i=n("#body"),s=i.height(),o=parseInt(i.css("padding-bottom"),10),r=n("#wrapper").height()-i.offset().top-o;n("#sidebar").css("width","30%"),t=n("#sidebar #sidebar-content").height()+n("#footer").height()+o,e=Math.max(r,t),n("#sidebar").css("width",""),s<e&&i.css("height",e)},updateInputState:function(t,e){var i=n(t);if(i.length){var s=n(e);o(i,s),i.change(function(){o(i,s)})}}};t.exports=r},72:function(t,e){shortcut={all_shortcuts:{},add:function(t,e,i){var n={type:"keydown",propagate:!1,disable_in_input:!1,target:document,keycode:!1};if(i)for(var s in n)"undefined"==typeof i[s]&&(i[s]=n[s]);else i=n;var o=i.target;"string"==typeof i.target&&(o=document.getElementById(i.target));t=t.toLowerCase();var r=function(n){if(n=n||window.event,i.disable_in_input){var s;if(n.target?s=n.target:n.srcElement&&(s=n.srcElement),3==s.nodeType&&(s=s.parentNode),"INPUT"==s.tagName||"TEXTAREA"==s.tagName)return}n.keyCode?code=n.keyCode:n.which&&(code=n.which);var o=String.fromCharCode(code).toLowerCase();188==code&&(o=","),190==code&&(o=".");var r=t.split("+"),a=0,l={"`":"~",1:"!",2:"@",3:"#",4:"$",5:"%",6:"^",7:"&",8:"*",9:"(",0:")","-":"_","=":"+",";":":","'":'"',",":"<",".":">","/":"?","\\":"|"},c={esc:27,escape:27,tab:9,space:32,"return":13,enter:13,backspace:8,scrolllock:145,scroll_lock:145,scroll:145,capslock:20,caps_lock:20,caps:20,numlock:144,num_lock:144,num:144,pause:19,"break":19,insert:45,home:36,"delete":46,end:35,pageup:33,page_up:33,pu:33,pagedown:34,page_down:34,pd:34,left:37,up:38,right:39,down:40,f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123},u={shift:{wanted:!1,pressed:!1},ctrl:{wanted:!1,pressed:!1},alt:{wanted:!1,pressed:!1},meta:{wanted:!1,pressed:!1}};n.ctrlKey&&(u.ctrl.pressed=!0),n.shiftKey&&(u.shift.pressed=!0),n.altKey&&(u.alt.pressed=!0),n.metaKey&&(u.meta.pressed=!0);for(var h=0;k=r[h],h<r.length;h++)"ctrl"==k||"control"==k?(a++,u.ctrl.wanted=!0):"shift"==k?(a++,u.shift.wanted=!0):"alt"==k?(a++,u.alt.wanted=!0):"meta"==k?(a++,u.meta.wanted=!0):k.length>1?c[k]==code&&a++:i.keycode?i.keycode==code&&a++:o==k?a++:l[o]&&n.shiftKey&&(o=l[o],o==k&&a++);if(a==r.length&&u.ctrl.pressed==u.ctrl.wanted&&u.shift.pressed==u.shift.wanted&&u.alt.pressed==u.alt.wanted&&u.meta.pressed==u.meta.wanted&&(e(n),!i.propagate))return n.cancelBubble=!0,n.returnValue=!1,n.stopPropagation&&(n.stopPropagation(),n.preventDefault()),!1};this.all_shortcuts[t]={callback:r,target:o,event:i.type},o.addEventListener?o.addEventListener(i.type,r,!1):o.attachEvent?o.attachEvent("on"+i.type,r):o["on"+i.type]=r},remove:function(t){t=t.toLowerCase();var e=this.all_shortcuts[t];if(delete this.all_shortcuts[t],e){var i=e.event,n=e.target,s=e.callback;n.detachEvent?n.detachEvent("on"+i,s):n.removeEventListener?n.removeEventListener(i,s,!1):n["on"+i]=!1}}}},75:function(t,e,i){"use strict";var n=i(3);i(44),i(31);var s=i(10),o=function(t){n(document).on("submit","#js-captcha",r),n.magnificPopup.open({items:{src:t,type:"inline"},focus:"#id_captcha_answer"})},r=function(t){t.preventDefault();var e=n(this),i=e.serializeObject(),o=i.sfn,r=i.efn,l=e.attr("action");n.ajax({url:l,type:"POST",data:i,success:function(){s.executeFunctionByName(o,window,t),n.magnificPopup.close()},error:function(t){a(t,r)}})},a=function(t,e){402===t.status?o(t.responseText):s.executeFunctionByName(e,window,t)};t.exports={onError:a}},76:function(t,e,i){"use strict";var n=(i(3),i(8));i(111);var s,o,r=n.Model.extend({validate:function(t){var e=t.value;return void 0===e||null===e?"Not a number":e%1!==0?"Not an integer":void 0}}),a=n.View.extend({el:".js-score",events:{"odometer-digit-added":"updateWidth"},updateWidth:function(t){var e=this.$el.find(".odometer-inside").width(),i=0===e?"auto":e;this.oldWidth!==i&&(this.$el.css("width",i),this.oldWidth=i)},initialize:function(){this.oldWidth=-1,this.updateWidth(),this.listenTo(this.model,"change:value",this.render)},render:function(){return this.$el.text(this.model.get("value")),this}}),l=function(t){s=new r({value:t},{validate:!0}),o=new a({model:s})},c=function(t){return s.set({value:t},{validate:!0}),this},u=function(){return s.get("value")};t.exports={init:l,set:c,get:u}},77:function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var s=i(3),o=n(s),r=i(13),a=n(r);i(72);var l=i(29),c=n(l),u="pootle-search",h={init:function(t){var e=this,i=this;this.state={searchText:"",searchFields:["source","target"],searchOptions:[]},this.$form=(0,o["default"])("#search-form"),this.$container=(0,o["default"])(".js-search-container"),this.$fields=(0,o["default"])(".js-search-fields"),this.$options=(0,o["default"])(".js-search-options"),this.$input=(0,o["default"])("#id_search"),this.settings=(0,a["default"])({onSearch:this.onSearch},t),shortcut.add("ctrl+shift+s",function(){e.$input.focus()}),shortcut.add("escape",function(t){e.$form.hasClass("focused")&&(e.$input.blur(),n(t))}),this.$input.mouseup(function(t){t.preventDefault()}).focus(function(){e.$input.select(),e.$form.addClass("focused")}).blur(function(){""===e.$input.val()&&e.$input.val(e.state.searchText),e.$form.removeClass("focused")});var n=function(t){t.preventDefault(),i.$container.toggle()};this.$input.click(function(t){h.isOpen()||n(t)}),this.$input.on("keypress",function(t){13===t.which&&e.$form.trigger("submit")}),this.$form.on("submit",this.handleSearch.bind(this)),(0,o["default"])(document).mouseup(function(t){e.isOpen()&&t.target!==i.$input.get(0)&&!e.$container.find(t.target).length&&n(t)})},setState:function(t){this.state=(0,a["default"])({},this.state,t),this.updateUI()},isOpen:function(){return this.$container.is(":visible")},buildSearchQuery:function(){var t=this.state,e=t.searchText,i=t.searchFields,n=t.searchOptions,s=encodeURIComponent(e);if(i.length&&(s+="&sfields="+i.join(",")),
n.length&&(s+="&soptions="+n.join(",")),i.length||n.length){var o={};i.length&&(o.sfields=i),n.length&&(o.soptions=n),(0,c["default"])(u,JSON.stringify(o),{path:"/"})}return s},handleSearch:function(t){t.preventDefault();var e=this.$input.val(),i=[],n=[];this.$fields.find("input:checked").each(function(){i.push((0,o["default"])(this).val())}),this.$options.find("input:checked").each(function(){n.push((0,o["default"])(this).val())}),i.length||(i=["source","target"]),this.setState({searchText:e,searchFields:i,searchOptions:n}),this.settings.onSearch.call(this,this.state.searchText)},onSearch:function(t){if(!t)return!1;var e="#search="+this.buildSearchQuery();return window.location=this.$form[0].action+e,!1},updateUI:function(){this.$input.val(this.state.searchText).focus();var t=this.state,e=t.searchFields,i=t.searchOptions;this.$fields.find("input").each(function(){(0,o["default"])(this).prop("checked",e.indexOf(this.value)!==-1)}),this.$options.find("input").each(function(){(0,o["default"])(this).prop("checked",i.indexOf(this.value)!==-1)})}};e["default"]=h},78:function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var s=i(30),o=n(s),r={apiRoot:"/xhr/stats/",getStats:function(t){return(0,o["default"])({body:{path:t},url:this.apiRoot})},getChecks:function(t){return(0,o["default"])({body:{path:t},url:this.apiRoot+"checks/"})}};e["default"]=r},110:function(t,e){!function(t){function e(e){function n(t){return t===!0?function(t){return t}:"string"==typeof t&&(t=s(t.split("")))||"function"==typeof t?function(e){return t(encodeURIComponent(e))}:encodeURIComponent}function s(e){var i=new RegExp(t.map(e,encodeURIComponent).join("|"),"ig");return function(t){return t.replace(i,decodeURIComponent)}}e=t.extend({unescape:!1},e||{}),i.encoder=n(e.unescape)}var i={put:function(t,e){(e||window).location.hash=this.encoder(t)},get:function(t){return(t||window).location.toString().split("#",2)[1]||""},encoder:encodeURIComponent},n={};n.base={callback:void 0,type:void 0,check:function(){},load:function(t){},init:function(t,i){e(i),s.callback=t,s._options=i,s._init()},_init:function(){},_options:{}},n.timer={_appState:void 0,_init:function(){var t=i.get();s._appState=t,s.callback(t),setInterval(s.check,100)},check:function(){var t=i.get();t!=s._appState&&(s._appState=t,s.callback(t))},load:function(t){t!=s._appState&&(i.put(t),s._appState=t,s.callback(t))}},n.hashchangeEvent={_init:function(){s.callback(i.get()),t(window).bind("hashchange",s.check)},check:function(){s.callback(i.get())},load:function(t){i.put(t)}};var s=t.extend({},n.base);"onhashchange"in window?s.type="hashchangeEvent":s.type="timer",t.extend(s,n[s.type]),t.history=s}(jQuery)},111:function(t,e,i){var n,s;(function(){var o,r,a,l,c,u,h,d,f,p,g,m,v,y,w,b,C,x,k,S,M,T,R,I,E,_,O,j,z,P,A,N,L=[].slice;C='<span class="odometer-value"></span>',y='<span class="odometer-ribbon"><span class="odometer-ribbon-inner">'+C+"</span></span>",l='<span class="odometer-digit"><span class="odometer-digit-spacer">8</span><span class="odometer-digit-inner">'+y+"</span></span>",h='<span class="odometer-formatting-mark"></span>',a="(,ddd).dd",d=/^\(?([^)]*)\)?(?:(.)(d+))?$/,f=30,u=2e3,o=20,p=2,c=.5,g=1e3/f,r=1e3/o,w="transitionend webkitTransitionEnd oTransitionEnd otransitionend MSTransitionEnd",E=document.createElement("div").style,b=null!=E.transition||null!=E.webkitTransition||null!=E.mozTransition||null!=E.oTransition,R=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame,m=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver,k=function(t){var e;return e=document.createElement("div"),e.innerHTML=t,e.children[0]},T=function(t,e){return t.className=t.className.replace(new RegExp("(^| )"+e.split(" ").join("|")+"( |$)","gi")," ")},x=function(t,e){return T(t,e),t.className+=" "+e},_=function(t,e){var i;if(null!=document.createEvent)return i=document.createEvent("HTMLEvents"),i.initEvent(e,!0,!0),t.dispatchEvent(i)},M=function(){var t,e;return null!=(t=null!=(e=window.performance)&&"function"==typeof e.now?e.now():void 0)?t:+new Date},I=function(t,e){return null==e&&(e=0),e?(t*=Math.pow(10,e),t+=.5,t=Math.floor(t),t/=Math.pow(10,e)):Math.round(t)},O=function(t){return t<0?Math.ceil(t):Math.floor(t)},S=function(t){return t-I(t)},z=!1,(j=function(){var t,e,i,n,s;if(!z&&null!=window.jQuery){for(z=!0,n=["html","text"],s=[],e=0,i=n.length;e<i;e++)t=n[e],s.push(function(t){var e;return e=window.jQuery.fn[t],window.jQuery.fn[t]=function(t){var i;return null==t||null==(null!=(i=this[0])?i.odometer:void 0)?e.apply(this,arguments):this[0].odometer.update(t)}}(t));return s}})(),setTimeout(j,0),v=function(){function t(e){var i,n,s,o,r,a,l,c,h,d,f=this;if(this.options=e,this.el=this.options.el,null!=this.el.odometer)return this.el.odometer;this.el.odometer=this,c=t.options;for(n in c)o=c[n],null==this.options[n]&&(this.options[n]=o);null==(r=this.options).duration&&(r.duration=u),this.MAX_VALUES=this.options.duration/g/p|0,this.resetFormat(),this.value=this.cleanValue(null!=(h=this.options.value)?h:""),this.renderInside(),this.render();try{for(d=["innerHTML","innerText","textContent"],a=0,l=d.length;a<l;a++)s=d[a],null!=this.el[s]&&!function(t){return Object.defineProperty(f.el,t,{get:function(){var e;return"innerHTML"===t?f.inside.outerHTML:null!=(e=f.inside.innerText)?e:f.inside.textContent},set:function(t){return f.update(t)}})}(s)}catch(m){i=m,this.watchForMutations()}}return t.prototype.renderInside=function(){return this.inside=document.createElement("div"),this.inside.className="odometer-inside",this.el.innerHTML="",this.el.appendChild(this.inside)},t.prototype.watchForMutations=function(){var t,e=this;if(null!=m)try{return null==this.observer&&(this.observer=new m(function(t){var i;return i=e.el.innerText,e.renderInside(),e.render(e.value),e.update(i)})),this.watchMutations=!0,this.startWatchingMutations()}catch(i){t=i}},t.prototype.startWatchingMutations=function(){if(this.watchMutations)return this.observer.observe(this.el,{childList:!0})},t.prototype.stopWatchingMutations=function(){var t;return null!=(t=this.observer)?t.disconnect():void 0},t.prototype.cleanValue=function(t){var e;return"string"==typeof t&&(t=t.replace(null!=(e=this.format.radix)?e:".","<radix>"),t=t.replace(/[.,]/g,""),t=t.replace("<radix>","."),t=parseFloat(t,10)||0),I(t,this.format.precision)},t.prototype.bindTransitionEnd=function(){var t,e,i,n,s,o,r=this;if(!this.transitionEndBound){for(this.transitionEndBound=!0,e=!1,s=w.split(" "),o=[],i=0,n=s.length;i<n;i++)t=s[i],o.push(this.el.addEventListener(t,function(){return!!e||(e=!0,setTimeout(function(){return r.render(),e=!1,_(r.el,"odometerdone")},0),!0)},!1));return o}},t.prototype.resetFormat=function(){var t,e,i,n,s,o,r,l;if(t=null!=(r=this.options.format)?r:a,t||(t="d"),i=d.exec(t),!i)throw new Error("Odometer: Unparsable digit format");return l=i.slice(1,4),o=l[0],s=l[1],e=l[2],n=(null!=e?e.length:void 0)||0,this.format={repeating:o,radix:s,precision:n}},t.prototype.render=function(t){var e,i,n,s,o,r,a,l,c,u,h,d;for(null==t&&(t=this.value),this.stopWatchingMutations(),this.resetFormat(),this.inside.innerHTML="",r=this.options.theme,e=this.el.className.split(" "),o=[],l=0,u=e.length;l<u;l++)i=e[l],i.length&&((s=/^odometer-theme-(.+)$/.exec(i))?r=s[1]:/^odometer(-|$)/.test(i)||o.push(i));for(o.push("odometer"),b||o.push("odometer-no-transitions"),r?o.push("odometer-theme-"+r):o.push("odometer-auto-theme"),this.el.className=o.join(" "),this.ribbons={},this.digits=[],a=!this.format.precision||!S(t)||!1,d=t.toString().split("").reverse(),c=0,h=d.length;c<h;c++)n=d[c],"."===n&&(a=!0),this.addDigit(n,a);return this.startWatchingMutations()},t.prototype.update=function(t){var e,i=this;if(t=this.cleanValue(t),e=t-this.value)return T(this.el,"odometer-animating-up odometer-animating-down odometer-animating"),e>0?x(this.el,"odometer-animating-up"):x(this.el,"odometer-animating-down"),this.stopWatchingMutations(),this.animate(t),this.startWatchingMutations(),setTimeout(function(){return i.el.offsetHeight,x(i.el,"odometer-animating")},0),this.value=t},t.prototype.renderDigit=function(){return k(l)},t.prototype.insertDigit=function(t,e){return null!=e?this.inside.insertBefore(t,e):this.inside.children.length?this.inside.insertBefore(t,this.inside.children[0]):this.inside.appendChild(t)},t.prototype.addSpacer=function(t,e,i){var n;return n=k(h),n.innerHTML=t,i&&x(n,i),this.insertDigit(n,e)},t.prototype.addDigit=function(t,e){var i,n,s,o;if(null==e&&(e=!0),"-"===t)return this.addSpacer(t,null,"odometer-negation-mark");if("."===t)return this.addSpacer(null!=(o=this.format.radix)?o:".",null,"odometer-radix-mark");if(e)for(s=!1;;){if(!this.format.repeating.length){if(s)throw new Error("Bad odometer format without digits");this.resetFormat(),s=!0}if(i=this.format.repeating[this.format.repeating.length-1],this.format.repeating=this.format.repeating.substring(0,this.format.repeating.length-1),"d"===i)break;this.addSpacer(i)}n=this.renderDigit(),n.querySelector(".odometer-value").innerHTML=t,this.digits.push(n);var r=this.insertDigit(n);return _(this.el,"odometer-digit-added"),r},t.prototype.animate=function(t){return b&&"count"!==this.options.animation?this.animateSlide(t):this.animateCount(t)},t.prototype.animateCount=function(t){var e,i,n,s,o,a=this;if(i=+t-this.value)return s=n=M(),e=this.value,(o=function(){var l,c,u;return M()-s>a.options.duration?(a.value=t,a.render(),void _(a.el,"odometerdone")):(l=M()-n,l>r&&(n=M(),u=l/a.options.duration,c=i*u,e+=c,a.render(Math.round(e))),null!=R?R(o):setTimeout(o,r))})()},t.prototype.getDigitCount=function(){var t,e,i,n,s,o;for(n=1<=arguments.length?L.call(arguments,0):[],t=s=0,o=n.length;s<o;t=++s)i=n[t],n[t]=Math.abs(i);return e=Math.max.apply(Math,n),Math.ceil(Math.log(e+1)/Math.log(10))},t.prototype.getFractionalDigitCount=function(){var t,e,i,n,s,o,r;for(s=1<=arguments.length?L.call(arguments,0):[],e=/^\-?\d*\.(\d*?)0*$/,t=o=0,r=s.length;o<r;t=++o)n=s[t],s[t]=n.toString(),i=e.exec(s[t]),null==i?s[t]=0:s[t]=i[1].length;return Math.max.apply(Math,s)},t.prototype.resetDigits=function(){return this.digits=[],this.ribbons=[],this.inside.innerHTML="",this.resetFormat()},t.prototype.animateSlide=function(t){var e,i,n,s,o,r,a,l,u,h,d,f,p,g,m,v,y,w,b,C,k,S,M,T,R,I,E;if(v=this.value,l=this.getFractionalDigitCount(v,t),l&&(t*=Math.pow(10,l),v*=Math.pow(10,l)),n=t-v){for(this.bindTransitionEnd(),s=this.getDigitCount(v,t),o=[],e=0,d=b=0;0<=s?b<s:b>s;d=0<=s?++b:--b){if(y=O(v/Math.pow(10,s-d-1)),a=O(t/Math.pow(10,s-d-1)),r=a-y,Math.abs(r)>this.MAX_VALUES){for(h=[],f=r/(this.MAX_VALUES+this.MAX_VALUES*e*c),i=y;r>0&&i<a||r<0&&i>a;)h.push(Math.round(i)),i+=f;h[h.length-1]!==a&&h.push(a),e++}else h=function(){E=[];for(var t=y;y<=a?t<=a:t>=a;y<=a?t++:t--)E.push(t);return E}.apply(this);for(d=C=0,S=h.length;C<S;d=++C)u=h[d],h[d]=Math.abs(u%10);o.push(h)}for(this.resetDigits(),I=o.reverse(),d=k=0,M=I.length;k<M;d=++k)for(h=I[d],this.digits[d]||this.addDigit(" ",d>=l),null==(w=this.ribbons)[d]&&(w[d]=this.digits[d].querySelector(".odometer-ribbon-inner")),this.ribbons[d].innerHTML="",n<0&&(h=h.reverse()),p=R=0,T=h.length;R<T;p=++R)u=h[p],m=document.createElement("div"),m.className="odometer-value",m.innerHTML=u,this.ribbons[d].appendChild(m),p===h.length-1&&x(m,"odometer-last-value"),0===p&&x(m,"odometer-first-value");return y<0&&this.addDigit("-"),g=this.inside.querySelector(".odometer-radix-mark"),null!=g&&g.parent.removeChild(g),l?this.addSpacer(this.format.radix,this.digits[l-1],"odometer-radix-mark"):void 0}},t}(),v.options=null!=(A=window.odometerOptions)?A:{},setTimeout(function(){var t,e,i,n,s;if(window.odometerOptions){n=window.odometerOptions,s=[];for(t in n)e=n[t],s.push(null!=(i=v.options)[t]?(i=v.options)[t]:i[t]=e);return s}},0),v.init=function(){var t,e,i,n,s,o;if(null!=document.querySelectorAll){for(e=document.querySelectorAll(v.options.selector||".odometer"),o=[],i=0,n=e.length;i<n;i++)t=e[i],o.push(t.odometer=new v({el:t,value:null!=(s=t.innerText)?s:t.textContent}));return o}},null!=(null!=(N=document.documentElement)?N.doScroll:void 0)&&null!=document.createEventObject?(P=document.onreadystatechange,document.onreadystatechange=function(){return"complete"===document.readyState&&v.options.auto!==!1&&v.init(),null!=P?P.apply(this,arguments):void 0}):document.addEventListener("DOMContentLoaded",function(){if(v.options.auto!==!1)return v.init()},!1),n=[i(3)],s=function(){return v}.apply(e,n),!(void 0!==s&&(t.exports=s))}).call(this)},119:function(t,e){"use strict";function i(t){if(!t)return t;var e=t.indexOf("@"),i=t.replace("_","-");return e!==-1&&(i=i.slice(0,e)),i}function n(t){return t.replace(/[!$&(-+\-.:<-?\[-^{-}]/g,"\\$&")}function s(t){return["(",n(t).trim().replace(/ +/g,"|"),")"].join("")}Object.defineProperty(e,"__esModule",{value:!0}),e.normalizeCode=i,e.escapeUnsafeRegexSymbols=n,e.makeRegexForMultipleWords=s},162:function(t,e,i){var n,s,o;/*!
		Autosize 3.0.15
		license: MIT
		http://www.jacklmoore.com/autosize
	*/
!function(i,r){s=[e,t],n=r,o="function"==typeof n?n.apply(e,s):n,!(void 0!==o&&(t.exports=o))}(this,function(t,e){"use strict";function i(t){function e(){var e=window.getComputedStyle(t,null);f=e.overflowY,"vertical"===e.resize?t.style.resize="none":"both"===e.resize&&(t.style.resize="horizontal"),d="content-box"===e.boxSizing?-(parseFloat(e.paddingTop)+parseFloat(e.paddingBottom)):parseFloat(e.borderTopWidth)+parseFloat(e.borderBottomWidth),isNaN(d)&&(d=0),s()}function i(e){var i=t.style.width;t.style.width="0px",t.offsetWidth,t.style.width=i,f=e,h&&(t.style.overflowY=e),n()}function n(){var e=window.pageYOffset,i=document.body.scrollTop,n=t.style.height;t.style.height="auto";var s=t.scrollHeight+d;return 0===t.scrollHeight?void(t.style.height=n):(t.style.height=s+"px",p=t.clientWidth,document.documentElement.scrollTop=e,void(document.body.scrollTop=i))}function s(){var e=t.style.height;n();var s=window.getComputedStyle(t,null);if(s.height!==t.style.height?"visible"!==f&&i("visible"):"hidden"!==f&&i("hidden"),e!==t.style.height){var o=r("autosize:resized");t.dispatchEvent(o)}}var a=void 0===arguments[1]?{}:arguments[1],l=a.setOverflowX,c=void 0===l||l,u=a.setOverflowY,h=void 0===u||u;if(t&&t.nodeName&&"TEXTAREA"===t.nodeName&&!o.has(t)){var d=null,f=null,p=t.clientWidth,g=function(){t.clientWidth!==p&&s()},m=function(e){window.removeEventListener("resize",g,!1),t.removeEventListener("input",s,!1),t.removeEventListener("keyup",s,!1),t.removeEventListener("autosize:destroy",m,!1),t.removeEventListener("autosize:update",s,!1),o["delete"](t),Object.keys(e).forEach(function(i){t.style[i]=e[i]})}.bind(t,{height:t.style.height,resize:t.style.resize,overflowY:t.style.overflowY,overflowX:t.style.overflowX,wordWrap:t.style.wordWrap});t.addEventListener("autosize:destroy",m,!1),"onpropertychange"in t&&"oninput"in t&&t.addEventListener("keyup",s,!1),window.addEventListener("resize",g,!1),t.addEventListener("input",s,!1),t.addEventListener("autosize:update",s,!1),o.add(t),c&&(t.style.overflowX="hidden",t.style.wordWrap="break-word"),e()}}function n(t){if(t&&t.nodeName&&"TEXTAREA"===t.nodeName){var e=r("autosize:destroy");t.dispatchEvent(e)}}function s(t){if(t&&t.nodeName&&"TEXTAREA"===t.nodeName){var e=r("autosize:update");t.dispatchEvent(e)}}var o="function"==typeof Set?new Set:function(){var t=[];return{has:function(e){return Boolean(t.indexOf(e)>-1)},add:function(e){t.push(e)},"delete":function(e){t.splice(t.indexOf(e),1)}}}(),r=function(t){return new Event(t)};try{new Event("test")}catch(a){r=function(t){var e=document.createEvent("Event");return e.initEvent(t,!0,!1),e}}var l=null;"undefined"==typeof window||"function"!=typeof window.getComputedStyle?(l=function(t){return t},l.destroy=function(t){return t},l.update=function(t){return t}):(l=function(t,e){return t&&Array.prototype.forEach.call(t.length?t:[t],function(t){return i(t,e)}),t},l.destroy=function(t){return t&&Array.prototype.forEach.call(t.length?t:[t],n),t},l.update=function(t){return t&&Array.prototype.forEach.call(t.length?t:[t],s),t}),e.exports=l})},203:function(t,e,i){"use strict";var n=i(8),s=i(209).Unit,o={};o.UnitSet=n.Collection.extend({model:s,initialize:function(t,e){this.chunkSize=e.chunkSize,this.uIds=[],this.total=0},comparator:function(t){return this.uIds.indexOf(t.id)},getByUnitId:function(t){return t>0?this.get(t):this.at(0)},getCurrent:function(){return this.activeUnit},setCurrent:function(t){return this.activeUnit=t instanceof this.model?t:this.getByUnitId(t),this.activeUnit},fetchedIds:function(){return this.map(function(t){return t.id})},next:function(){var t=this.indexOf(this.getCurrent());return t+1===this.length?null:this.at(t+1)},hasNext:function(){return null!==this.next()},prev:function(){var t=this.indexOf(this.getCurrent());return 0===t?null:this.at(t-1)},hasPrev:function(){return null!==this.prev()}}),t.exports=o},207:function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function s(t){if(Array.isArray(t)){for(var e=0,i=Array(t.length);e<t.length;e++)i[e]=t[e];return i}return Array.from(t)}function o(t){var e=(0,l["default"])(".js-unit-checks"),i=(0,l["default"])(".focusthis")[0];e.html(t).show(),F["default"].blinkClass(e,"blink",4,200),i.focus()}var r=function(){function t(t,e){var i=[],n=!0,s=!1,o=void 0;try{for(var r,a=t[Symbol.iterator]();!(n=(r=a.next()).done)&&(i.push(r.value),!e||i.length!==e);n=!0);}catch(l){s=!0,o=l}finally{try{!n&&a["return"]&&a["return"]()}finally{if(s)throw o}}return i}return function(e,i){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=i(3),l=n(a),c=i(4),u=n(c);i(347),i(348),i(353),i(110),i(354),i(31),i(45);var h=i(162),d=n(h),f=i(21),p=n(f),g=i(356),m=n(g),v=i(13),y=n(v);i(72);var w=i(78),b=n(w),C=i(212),x=n(C),k=i(29),S=n(k),M=i(220),T=n(M),R=i(75),I=n(R),E=i(203),_=i(47),O=n(_),j=i(32),z=n(j),P=i(76),A=n(P),N=i(77),L=n(N),D=i(10),F=n(D),B=i(119),H=1,U={dropdownAutoWidth:!0,width:"off"},$=(0,y["default"])({minimumResultsForSearch:-1},U),W=[];window.PTL=window.PTL||{},PTL.editor={init:function(t){var e=this;this.settings={mt:[]},t&&(0,y["default"])(this.settings,t),this.backToBrowserEl=document.querySelector(".js-back-to-browser"),this.$editorActivity=(0,l["default"])("#js-editor-act"),this.$editorBody=(0,l["default"])(".js-editor-body"),this.editorTableEl=document.querySelector(".js-editor-table"),this.$filterStatus=(0,l["default"])("#js-filter-status"),this.$filterChecks=(0,l["default"])("#js-filter-checks"),this.$filterChecksWrapper=(0,l["default"])(".js-filter-checks-wrapper"),this.$filterSortBy=(0,l["default"])("#js-filter-sort"),this.$msgOverlay=(0,l["default"])("#js-editor-msg-overlay"),this.$navNext=(0,l["default"])("#js-nav-next"),this.$navPrev=(0,l["default"])("#js-nav-prev"),this.unitCountEl=document.querySelector(".js-unit-count"),this.unitIndexEl=document.querySelector(".js-unit-index"),this.units=new E.UnitSet([],{chunkSize:this.settings.chunkSize}),this.editorRow=null,this.filter="all",this.checks=[],this.sortBy="default",this.modifiedSince=null,this.user=null,this.ctxGap=0,this.ctxQty=parseInt((0,S["default"])("ctxQty"),10)||1,this.preventNavigation=!1,this.isUnitDirty=!1,this.isLoading=!0,this.showActivity(),this.cpRE=/^(<[^>]+>|\[n\|t]|\W$^\n)*(\b|$)/gm,this.tmReq=null,this.wordComparer=new m["default"]({compare:"words"}),this.tmpl={vUnit:u["default"].template((0,l["default"])("#view_unit").html()),tm:u["default"].template((0,l["default"])("#tm_suggestions").html()),editCtx:u["default"].template((0,l["default"])("#editCtx").html()),msg:u["default"].template((0,l["default"])("#js-editor-msg").html())},L["default"].init({onSearch:this.onSearch}),this.$filterStatus.select2(U),this.$filterSortBy.select2($),(0,l["default"])(document).on("click",".js-dev-img",function(t){t.preventDefault(),(0,l["default"])(this).magnificPopup({type:"image",gallery:{enabled:!0}}).magnificPopup("open")}),(0,l["default"])(document).on("input",".js-translation-area",function(t){return e.onTextareaChange(t)}),(0,l["default"])(document).on("change","input.fuzzycheck",function(){return e.onStateChange()}),(0,l["default"])(document).on("click","input.fuzzycheck",function(){return e.onStateClick()}),(0,l["default"])(document).on("input","#id_translator_comment",function(){return e.handleTranslationChange()}),(0,l["default"])(document).on("click",".switch-suggest-mode a",function(t){return e.toggleSuggestMode(t)}),(0,l["default"])(document).on("focus",".focusthis",function(t){PTL.editor.focused=t.target}),(0,l["default"])(document).on("click",".js-editor-reload",function(t){t.preventDefault(),l["default"].history.load("")}),(0,l["default"])(document).on("click",".js-editor-copytext",function(t){return e.copyText(t)}),(0,l["default"])(document).on("click",".js-editor-copy-comment",function(t){var i=t.currentTarget.dataset.string;e.copyComment(i)}),(0,l["default"])(document).on("click",".js-copyoriginal",function(t){var i=t.currentTarget.dataset.uid,n=[].concat(s(document.querySelectorAll("#js-unit-"+i+" .js-translation-text"))).map(function(t){return t.textContent});e.copyOriginal(n)}),(0,l["default"])(document).on("mouseup","tr.view-row, tr.ctx-row",this.gotoUnit),(0,l["default"])(document).on("keypress",".js-unit-index",function(t){return e.gotoIndex(t)}),(0,l["default"])(document).on("dblclick click",".js-unit-index",function(t){return e.unitIndex(t)}),(0,l["default"])(document).on("click","input.submit",function(t){t.preventDefault(),e.handleSubmit()}),(0,l["default"])(document).on("click","input.suggest",function(t){t.preventDefault(),e.handleSuggest()}),(0,l["default"])(document).on("click","#js-nav-prev",function(){return e.gotoPrev()}),(0,l["default"])(document).on("click","#js-nav-next",function(){return e.gotoNext()}),(0,l["default"])(document).on("click",".js-suggestion-reject",function(t){t.stopPropagation(),e.rejectSuggestion(t.currentTarget.dataset.suggId)}),(0,l["default"])(document).on("click",".js-suggestion-accept",function(t){t.stopPropagation(),e.acceptSuggestion(t.currentTarget.dataset.suggId)}),(0,l["default"])(document).on("click","#js-toggle-timeline",function(t){return e.toggleTimeline(t)}),(0,l["default"])(document).on("click",".js-toggle-check",function(t){e.toggleCheck(t.currentTarget.dataset.checkId)}),(0,l["default"])(document).on("change","#js-filter-status",function(){return e.filterStatus()}),(0,l["default"])(document).on("change","#js-filter-checks",function(){return e.filterChecks()}),(0,l["default"])(document).on("change","#js-filter-sort",function(){return e.filterSort()}),(0,l["default"])(document).on("click",".js-more-ctx",function(){return e.moreContext()}),(0,l["default"])(document).on("click",".js-less-ctx",function(){return e.lessContext()}),(0,l["default"])(document).on("click",".js-show-ctx",function(){return e.showContext()}),(0,l["default"])(document).on("click",".js-hide-ctx",function(){return e.hideContext()}),(0,l["default"])(document).on("click",".js-editor-comment",function(t){t.preventDefault();var e=(0,l["default"])(".js-editor-comment-form"),i=(0,l["default"])(".js-editor-comment");i.toggleClass("selected"),i.hasClass("selected")?(e.css("display","inline-block"),(0,l["default"])("#id_translator_comment").focus()):e.css("display","none")}),(0,l["default"])(document).on("submit","#js-comment-form",function(t){return e.addComment(t)}),(0,l["default"])(document).on("click",".js-comment-remove",function(t){return e.removeComment(t)}),(0,l["default"])(document).on("click",".js-editor-msg-hide",function(){return e.hideMsg()}),(0,l["default"])(document).on("click",".js-toggle-raw",function(t){t.preventDefault(),(0,l["default"])(".js-translate-translation").toggleClass("raw"),(0,l["default"])(".js-toggle-raw").toggleClass("selected"),d["default"].update(document.querySelector(".js-translation-area"))}),window.addEventListener("beforeunload",function(t){PTL.editor.isUnitDirty&&(t.returnValue=gettext("You have unsaved changes in this string. Navigating away will discard those changes."))}),shortcut.add("ctrl+return",function(){e.isSuggestMode()?e.handleSuggest():e.handleSubmit()}),shortcut.add("ctrl+space",function(){return e.toggleState()}),shortcut.add("ctrl+shift+space",function(t){return e.toggleSuggestMode(t)}),shortcut.add("ctrl+up",function(){return e.gotoPrev()}),shortcut.add("ctrl+,",function(){return e.gotoPrev()}),shortcut.add("ctrl+down",function(){return e.gotoNext({isSubmission:!1})}),shortcut.add("ctrl+.",function(){return e.gotoNext({isSubmission:!1})}),navigator.platform.toUpperCase().indexOf("MAC")>=0&&(this.$navNext.attr("title",gettext("Go to the next string (Ctrl+.)<br/><br/>Also:<br/>Next page: Ctrl+Shift+.<br/>Last page: Ctrl+Shift+End")),this.$navPrev.attr("title",gettext("Go to the previous string (Ctrl+,)<br/><br/>Also:</br>Previous page: Ctrl+Shift+,<br/>First page: Ctrl+Shift+Home"))),shortcut.add("ctrl+shift+n",function(t){return e.unitIndex(t)}),(0,l["default"])(document).ajaxStart(function(){clearTimeout(e.delayedActivityTimer),e.delayedActivityTimer=setTimeout(function(){e.showActivity()},3e3)}),(0,l["default"])(document).ajaxStop(function(){clearTimeout(e.delayedActivityTimer),e.isLoading||e.hideActivity()}),this.settings.mt.forEach(function(t){i.e(1,function(){var e=t.name.split("_").map(function(t){return t[0]+t.slice(1).toLowerCase()}).join(""),n=i(160)("./"+e)["default"];W.push(new n(t.key))})}),setInterval(O["default"].updateRelativeDates,6e4),l["default"].history.init(function(t){var i=F["default"].getParsedHash(t),n=!0,s=0;if(i.unit){var o=parseInt(i.unit,10);if(o&&!isNaN(o)){var r=e.units.getCurrent(),a=e.units.get(o);if(a&&a!==r)return void e.setUnit(a);s=o,n=!e.units.length}}if(e.filter="all",e.checks=[],e.category=[],e.sortBy="default","filter"in i){var c=i.filter;e.filter=c,"checks"===c&&"checks"in i&&(e.checks=i.checks.split(",")),"checks"===c&&"category"in i&&(e.category=i.category),"sort"in i&&(e.sortBy=i.sort)}if("modified-since"in i?e.modifiedSince=i["modified-since"]:e.modifiedSince=null,"month"in i?e.month=i.month:e.month=null,"user"in i&&0===e.filter.indexOf("user-")){var u;e.user=u=encodeURIComponent(i.user);var h=[],d={"user-suggestions":interpolate(gettext("%s's pending suggestions"),[u]),"user-suggestions-accepted":interpolate(gettext("%s's accepted suggestions"),[u]),"user-suggestions-rejected":interpolate(gettext("%s's rejected suggestions"),[u]),"user-submissions":interpolate(gettext("%s's submissions"),[u]),"user-submissions-overwritten":interpolate(gettext("%s's overwritten submissions"),[u])};for(var f in d)h.push('<option value="'+f+'" data-user="'+u+'" class="js-user-filter">'+d[f]+"</option>");(0,l["default"])(".js-user-filter").remove(),e.$filterStatus.append(h.join(""))}if("search"in i){e.filter="search";var p={searchText:i.search};"sfields"in i&&(p.searchFields=i.sfields.split(",")),"soptions"in i&&(p.searchOptions=i.soptions.split(",")),L["default"].setState(p)}e.preventNavigation=!0;var g="search"===e.filter?"all":e.filter;e.$filterStatus.select2("val",g),"checks"===e.filter&&e.$filterChecks.is(":hidden")&&e.getCheckOptions(),e.$filterSortBy.select2("val",e.sortBy),"search"===e.filter&&e.$filterChecksWrapper.hide(),e.preventNavigation=!1,e.fetchUnits({initial:n,uId:s}).then(function(t){t&&e.setUnit(s)})},{unescape:!0})},ready:function(){var t=this.units.getCurrent();t.get("isObsolete")&&this.displayObsoleteMsg(),(0,d["default"])(document.querySelector("textarea.expanding")),(0,l["default"])(".extra-item-comment").filter(":not([dir])").bidi(),(0,l["default"])(".suggestion-translation-body").filter(":not([dir])").bidi();var e=(0,l["default"])(".focusthis")[0];e&&e.focus();var i=(0,l["default"])(".js-developer-comments");if(i.html((0,T["default"])(i.html())),"search"===this.filter&&this.hlSearch(),""!==this.settings.tmUrl&&this.getTMUnits(),null!==this.tmData){var n=this.getTMUnitsContent(this.tmData);(0,l["default"])("#extras-container").append(n)}this.runHooks(),this.isUnitDirty=!1,this.keepState=!1,this.isLoading=!1,this.hideActivity(),this.updateExportLink(),O["default"].updateRelativeDates()},noResults:function(){this.displayMsg({body:gettext("No results.")}),this.reDraw()},canNavigate:function(){return!this.isUnitDirty||window.confirm(gettext("You have unsaved changes in this string. Navigating away will discard those changes."))},hlSearch:function(){var t=L["default"].state,e=t.searchText,i=t.searchFields,n=t.searchOptions,s={notes:"div.developer-comments",locations:"div.translate-locations",source:"td.translate-original, .original .js-translation-text",target:"td.translate-translation"},o=i.map(function(t){return["tr.edit-row "+s[t],"tr.view-row "+s[t]]}).reduce(function(t,e){return t.concat(e)},[]),r=void 0;r=n.indexOf("exact")>=0?new RegExp("("+(0,B.escapeUnsafeRegexSymbols)(e)+")"):new RegExp((0,B.makeRegexForMultipleWords)(e),"i"),(0,l["default"])(o.join(", ")).highlightRegex(r)},copyText:function(t){var e,i=(0,l["default"])(t.currentTarget),n=i.data("action"),s=i.data("string")||i.data("translation-aid")||i.text(),o=(0,l["default"])(this.focused);"overwrite"===n?(o.val(s).trigger("input"),e=s.length):(e=o.caret().start+s.length,o.val(o.caret().replace(s)).trigger("input")),o.caret(e,e),d["default"].update(this.focused)},copyOriginal:function(t){var e=(0,l["default"])(".js-translation-area");if(e.length){for(var i,n=t.length-1,s=0;s<e.length;s++){var o=t[s]||t[n];(0,l["default"])(e.get(s)).val(o).trigger("input")}i=(0,l["default"])(e)[0],i.focus(),d["default"].update(i),this.goFuzzy(),this.cpRE.exec((0,l["default"])(i).val());var r=this.cpRE.lastIndex;(0,l["default"])(i).caret(r,r),this.cpRE.lastIndex=0}},copyComment:function(t){var e=document.querySelector(".js-editor-comment"),i=document.querySelector(".js-editor-comment-form"),n=document.querySelector("#id_translator_comment");e.classList.contains("selected")||(i.style.display="inline-block",e.classList.add("selected")),n.focus(),n.value=t},doFuzzyStyle:function(){(0,l["default"])("tr.edit-row").addClass("fuzzy-unit")},undoFuzzyStyle:function(){(0,l["default"])("tr.edit-row").removeClass("fuzzy-unit")},doFuzzyBox:function(){var t=(0,l["default"])("input.fuzzycheck");t.prop("checked",!0),this.settings.isAdmin||(this.isSuggestMode()||(0,l["default"])(".js-fuzzy-block").show(),t[0].defaultChecked=!0),t.trigger("change")},undoFuzzyBox:function(){var t=(0,l["default"])("input.fuzzycheck");t.prop("checked",!1),t.trigger("change")},goFuzzy:function(){this.isFuzzy()||(this.doFuzzyStyle(),this.doFuzzyBox())},ungoFuzzy:function(){this.isFuzzy()&&(this.undoFuzzyStyle(),this.undoFuzzyBox())},isFuzzy:function(){return(0,l["default"])("input.fuzzycheck").prop("checked")},toggleFuzzyStyle:function(){this.isFuzzy()?this.doFuzzyStyle():this.undoFuzzyStyle()},toggleState:function(){(0,l["default"])("input.fuzzycheck").blur().click()},updateUnitDefaultProperties:function(){(0,l["default"])(".js-translation-area").each(function(){this.defaultValue=this.value});var t=(0,l["default"])("#id_state")[0];t.defaultChecked=t.checked,this.handleTranslationChange()},updateCommentDefaultProperties:function(){var t=document.querySelector("#id_translator_comment");t.defaultValue=t.value,this.handleTranslationChange()},handleTranslationChange:function(){var t,e,i=document.querySelector("#id_translator_comment"),n=null!==i&&i.value!==i.defaultValue,s=(0,l["default"])(".js-submit")[0],o=(0,l["default"])(".js-suggest")[0],r=(0,l["default"])(".js-translation-area").get(),a=(0,l["default"])(".js-user-suggestion").map(function(){return(0,l["default"])(this).data("translation-aid")}).get(),c=(0,l["default"])("#id_state")[0],u=c.defaultChecked!==c.checked,h=!1,d=!1,f=!1;for(this.settings.isAdmin||(d=c.checked===!0),e=0;e<r.length&&!h;e++)t=r[e],h=t.defaultValue!==t.value;if(a.length)for(e=0;e<r.length&&!f;e++)t=r[e],f=a.indexOf(t.value)!==-1;this.isUnitDirty=h||u||n,void 0!==s&&(s.disabled=!(u||h)||d),void 0!==o&&(o.disabled=!h||f)},onStateChange:function(){this.handleTranslationChange(),this.toggleFuzzyStyle()},onStateClick:function(){this.keepState=!0},onTextareaChange:function(t){this.handleTranslationChange();var e=this,i=t.target,n=i.defaultValue!==i.value;n&&!this.keepState&&this.ungoFuzzy(),clearTimeout(this.similarityTimer),this.similarityTimer=setTimeout(function(){e.checkSimilarTranslations(),e.similarityTimer=null},200)},getSimilarityData:function(){var t=this.units.getCurrent();return{similarity:t.get("similarityHuman"),mt_similarity:t.get("similarityMT")}},calculateSimilarity:function(t,e,i){var n,s,o,r,a=0,l=null;for(r=0;r<e.length;r++)n=e.eq(r),s=n.data(i),o=this.wordComparer.similarity(t,s),o>a&&(a=o,l=n.hasClass("js-translation-area")?null:n.val("id"));return{max:a,boxId:l}},checkSimilarTranslations:function(){var t="translation-aid",e="translation-aid-mt",i=(0,l["default"])("[data-"+e+"]"),n="[data-"+t+"]";this.settings.isAnonymous||(n+="[data-suggestor-id!="+this.settings.userId+"]");var s=(0,l["default"])(n);if(!s.length&&!i.length)return!1;var o,r=this.units.getCurrent(),a=(0,l["default"])(".js-translation-area").val(),c={max:0,boxId:null},u={max:0,boxId:null};s.length&&(c=this.calculateSimilarity(a,s,t)),i.length&&(u=this.calculateSimilarity(a,i,e)),r.set({similarityHuman:c.max,similarityMT:u.max}),o=c.max>u.max?c:u,this.highlightBox(o.boxId,1===o.max)},highlightBox:function(t,e){var i="best-match",n="exact-match";if((0,l["default"])(".translate-table").find("."+i).removeClass(i+" "+n),null===t)return!1;var s=[i];e&&s.push(n),(0,l["default"])(t).addClass(s.join(" "))},doSuggestMode:function(){this.editorTableEl.classList.add("suggest-mode")},undoSuggestMode:function(){this.editorTableEl.classList.remove("suggest-mode")},isSuggestMode:function(){return this.editorTableEl.classList.contains("suggest-mode")},toggleSuggestMode:function(t){t.preventDefault(),this.isSuggestMode()?this.undoSuggestMode():this.doSuggestMode()},updateExportLink:function(){var t=(0,l["default"])(".js-export-view"),e=t.data("export-url"),i=F["default"].getHash().replace(/&?unit=\d+/,""),n=i?e+"?"+i:e;t.data("href",n)},showActivity:function(t){this.hideMsg(),this.$editorActivity.spin().fadeIn(300)},hideActivity:function(){this.$editorActivity.spin(!1).fadeOut(300)},displayMsg:function(t){var e=t.showClose,i=void 0===e||e,n=t.body,s=void 0===n?null:n;this.hideActivity(),O["default"].fixSidebarHeight(),this.$msgOverlay.html(this.tmpl.msg({showClose:i,body:s})).fadeIn(300)},hideMsg:function(){this.$msgOverlay.length&&this.$msgOverlay.fadeOut(300)},displayError:function(t){this.hideActivity(),z["default"].show({text:t,level:"error"})},error:function(t,e){var i="";"abort"!==e&&(0===t.status?i=gettext("Error while connecting to the server"):402===t.status?I["default"].onError(t,"PTL.editor.error"):i=404===t.status?gettext("Not found"):500===t.status?gettext("Server error"):"timeout"===e?gettext("The server seems down. Try again later."):t.hasOwnProperty("responseText")?l["default"].parseJSON(t.responseText).msg:gettext("Unknown error"),PTL.editor.displayError(i))},displayObsoleteMsg:function(){var t=gettext("This string no longer exists."),e=gettext("Go back to browsing"),i=this.backToBrowserEl.getAttribute("href"),n=gettext("Reload page"),s=["<div>",t,"</div>",'<div class="editor-msg-btns">','<a class="btn btn-xs js-editor-reload" href="#">',n,"</a>",'<a class="btn btn-xs" href="',i,'">',e,"</a>","</div>"].join("");this.displayMsg({body:s,showClose:!1})},getReqData:function(){var t={};if("checks"===this.filter&&this.checks.length&&(t.checks=this.checks.join(",")),"checks"===this.filter&&this.category.length&&(t.category=this.category),"search"===this.filter){var e=L["default"].state,i=e.searchText,n=e.searchFields,s=e.searchOptions;t.search=i,t.sfields=n,t.soptions=s}else t.filter=this.filter,"default"!==this.sortBy&&(t.sort=this.sortBy);return null!==this.modifiedSince&&(t["modified-since"]=this.modifiedSince),this.user&&(t.user=this.user),t},renderRow:function(t){return'<tr id="row'+t.id+'" class="view-row">'+this.tmpl.vUnit({unit:t.toJSON()})+"</tr>"},renderEditorRow:function(t){var e=(0,p["default"])("edit-row",{"fuzzy-unit":t.get("isfuzzy"),"with-ctx":"all"!==this.filter}),i=this.renderCtxControls({hasData:!1}),n=r(i,2),s=n[0],o=n[1];return("all"!==this.filter?s:"")+('<tr id="row'+t.id+'" class="'+e+'">')+this.editorRow+"</tr>"+("all"!==this.filter?o:"")},renderRows:function(){var t=this,e=this.getUnitGroups(),i=this.units.getCurrent(),n=[];return e.forEach(function(s){1!==e.length&&n.push('<tr class="delimiter-row"><td colspan="2">'+('<div class="hd"><h2>'+u["default"].escape(s.path)+"</h2></div>")+"</td></tr>");for(var o=0;o<s.units.length;o++){var r=s.units[o];r.id===i.id?n.push(t.renderEditorRow(r)):n.push(t.renderRow(r))}}),n.join("")},renderCtxRows:function(t,e){for(var i=this.units.getCurrent(),n="",s=0;s<t.length;s++){var o=t[s];o=(0,y["default"])({},i.toJSON(),o),n+='<tr id="ctx'+o.id+'" class="ctx-row '+e+'">',n+=this.tmpl.vUnit({unit:o}),n+="</tr>"}return n},getUnitGroups:function(){var t,e=parseInt((this.units.chunkSize-1)/2,10),i=this.units.length,n=this.units.getCurrent(),s=this.units.indexOf(n),o=s-e,r=s+1+e,a=null;return o<0?(r+=-o,o=0):r>i&&(o>r-i?o+=-(r-i):o=0,r=i),this.units.slice(o,r).reduce(function(e,i){return t=i.get("store").get("pootlePath"),t===a?e[e.length-1].units.push(i):e.push({path:t,units:[i]}),a=t,e},[])},renderUnit:function(){this.units.length&&(this.hideMsg(),this.reDraw(this.renderRows()))},reDraw:function(t){var e=this.$editorBody.find("tr");e.remove(),void 0!==t&&(this.$editorBody.append(t),this.ready())},updateNavButton:function(t,e){t.is(":disabled")&&e||t.is(":enabled")&&!e||(e?(t.data("title",t.attr("title")),t.removeAttr("title")):t.attr("title",t.data("title")),t.prop("disabled",e))},updateNavigation:function(){this.updateNavButton(this.$navPrev,!this.units.hasPrev()),this.updateNavButton(this.$navNext,!this.units.hasNext()),this.unitCountEl.textContent=this.units.total;var t=this.units.getCurrent();void 0!==t&&(this.unitIndexEl.textContent=this.units.uIds.indexOf(t.id)+1)},fetchUnits:function(){var t=this,e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],i=e.initial,n=void 0!==i&&i,s=e.uId,o=void 0===s?0:s,r={path:this.settings.pootlePath};if(n)r.initial=n,o>0&&(r.uids=o);else{var a=this.units.fetchedIds(),l=this.units.chunkSize,c=o>0?o:this.units.getCurrent().id,h=this.units.uIds.indexOf(c),d=Math.max(h-l,0),f=Math.min(h+l+1,this.units.total);0===o&&(a.indexOf(this.units.uIds[d])===-1&&(d=Math.max(d-l,0)),a.indexOf(this.units.uIds[f-1])===-1&&(f=Math.min(f+l+1,this.units.total)));var p=this.units.uIds.slice(d,f);if(p=u["default"].difference(p,a),!p.length)return;r.uids=p.join(",")}return(0,y["default"])(r,this.getReqData()),x["default"].fetchUnits(r).then(function(e){return t.storeUnitData(e)},this.error)},storeUnitData:function(t){var e=this;t.uIds&&(this.units.reset(),this.units.uIds=t.uIds,this.units.total=t.uIds.length);var i=t.unitGroups;if(!i.length)return this.noResults(),!1;for(var n=0;n<i.length;n++){var s=i[n],o=function(t){var i=s[t],n=(0,y["default"])({pootlePath:t},i.meta),o=i.units.map(function(t){return(0,y["default"])(t,{store:n})});e.units.set(o,{remove:!1})};for(var r in s)o(r)}return!0},setEditUnit:function(t){var e=this.units.getCurrent();e.set("isObsolete",t.is_obsolete),e.set("sources",t.sources),this.tmData=t.tm_suggestions||null,this.editorRow=t.editor},setUnit:function(t){var e=this,i=this.units.setCurrent(t);this.updateNavigation(),this.fetchUnits();var n={};this.settings.vFolder&&(n.vfolder=this.settings.vFolder),x["default"].fetchUnit(i.id,n).then(function(t){e.setEditUnit(t),e.renderUnit()},this.error)},handleSubmit:function(){var t=this,e=document.querySelector("input.submit"),i=(0,l["default"])(".js-translation-area")[0].value,n=(0,l["default"])(".js-user-suggestion").map(function(){return{text:this.dataset.translationAid,id:this.dataset.suggId}}).get(),s={sfn:"PTL.editor.processSubmission",efn:"PTL.editor.error"},o=(0,l["default"])("#translate").serializeObject();this.updateUnitDefaultProperties();var r=u["default"].pluck(n,"id"),a=u["default"].pluck(n,"text"),c=a.indexOf(i);return c===-1||this.isFuzzy()?(null!==this.similarityTimer&&(clearTimeout(this.similarityTimer),this.checkSimilarTranslations()),(0,y["default"])(o,this.getReqData(),this.getSimilarityData(),s),e.disabled=!0,void x["default"].addTranslation(this.units.getCurrent().id,o).then(function(e){return t.processSubmission(e)},this.error)):void this.acceptSuggestion(r[c],{skipToNext:!0})},processSubmission:function(t){var e=(0,l["default"])(".js-translation-area").map(function(t,e){return(0,l["default"])(e).val()}).get(),i=this.units.getCurrent();i.setTranslation(e),i.set("isfuzzy",this.isFuzzy());var n=!!t.checks;(0,l["default"])(".translate-container").toggleClass("error",n),t.user_score&&A["default"].set(t.user_score),n?o(t.checks):this.gotoNext()},handleSuggest:function(){var t=this,e={sfn:"PTL.editor.processSuggestion",efn:"PTL.editor.error"},i=(0,l["default"])("#translate").serializeObject();this.updateUnitDefaultProperties(),delete i.state,(0,y["default"])(i,this.getReqData(),this.getSimilarityData(),e),x["default"].addSuggestion(this.units.getCurrent().id,i).then(function(e){return t.processSuggestion(e)},this.error)},processSuggestion:function(t){t.user_score&&A["default"].set(t.user_score),this.gotoNext()},gotoPrev:function(){if(!this.canNavigate())return!1;var t=this.units.prev();if(t){var e=F["default"].updateHashPart("unit",t.id);l["default"].history.load(e)}},gotoNext:function(){var t=arguments.length<=0||void 0===arguments[0]?{isSubmission:!0}:arguments[0];if(!this.canNavigate())return!1;var e=this.units.next();if(e){var i=F["default"].updateHashPart("unit",e.id);l["default"].history.load(i)}else t.isSubmission&&((0,S["default"])("finished","1",{path:"/"}),window.location.href=this.backToBrowserEl.getAttribute("href"))},gotoUnit:function(t){if(t.preventDefault(),!PTL.editor.canNavigate())return!1;if(t.ctrlKey||t.altKey||t.metaKey||2===t.which){var e="TD"!==t.target.nodeName?(0,l["default"])(t.target).parents("td"):(0,l["default"])(t.target);return void window.open(e.data("target"),"_blank")}if(""===window.getSelection().toString()){var i=this.id.match(/(row|ctx)([0-9]+)/);if(i){var n,s=i[1],o=parseInt(i[2],10);n="row"===s?F["default"].updateHashPart("unit",o):"unit="+encodeURIComponent(o),l["default"].history.load(n)}}},unitIndex:function(t){t.preventDefault();var e=window.getSelection(),i=document.createRange();i.selectNodeContents(this.unitIndexEl),e.removeAllRanges(),e.addRange(i),this.unitIndexEl.focus()},gotoIndex:function(t){if(13===t.which){t.preventDefault();var e=parseInt(this.unitIndexEl.textContent,10);if(e&&!isNaN(e)&&e>0&&e<=this.units.total){var i=this.units.uIds[e-1],n=F["default"].updateHashPart("unit",i);l["default"].history.load(n)}}},getCheckOptions:function(){var t=this;b["default"].getChecks(this.settings.pootlePath).then(function(e){return t.appendChecks(e)},this.error)},filterChecks:function q(){if(!this.preventNavigation){if(!this.canNavigate())return!1;var q=this.$filterChecks.val();if("none"!==q){var t=this.$filterSortBy.val(),e={filter:"checks",checks:q};"default"!==t&&(e.sort=t),l["default"].history.load(l["default"].param(e))}}},appendChecks:function(t){if(Object.keys(t).length){var e=this.$filterChecks,i=this.checks[0]||"none";e.find("optgroup").each(function(e){var i=!0,n=(0,l["default"])(this);n.find("option").each(function(e){var n=(0,l["default"])(this),s=n.val();s in t?(i=!1,n.text(n.data("title")+"("+t[s]+")")):n.remove()}),i&&n.hide()}),e.select2(U).select2("val",i),this.$filterChecksWrapper.css("display","inline-block")}else this.displayMsg({body:gettext("No results.")}),this.$filterStatus.select2("val",this.filter)},filterSort:function(){var t=this.$filterStatus.val(),e=this.$filterChecks.val()||this.checks.join(","),i=this.$filterSortBy.val(),n=this.user||null,s={filter:t};this.category.length?s.category=this.category:"none"!==e&&(s.checks=e),"default"!==i&&(s.sort=i),null!==n&&(s.user=n),l["default"].history.load(l["default"].param(s))},filterStatus:function(){if(!this.canNavigate())return!1;var t=this.$filterStatus.find("option:selected"),e=t.val(),i=t.data("user");if("checks"===e)this.getCheckOptions();else if(this.$filterChecksWrapper.hide(),!this.preventNavigation){var n={filter:e};this.user&&i?n.user=this.user:(this.user=null,(0,l["default"])(".js-user-filter").remove(),"default"!==this.sortBy&&(n.sort=this.sortBy)),l["default"].history.load(l["default"].param(n))}},renderCtxControls:function(t){var e=t.hasData,i=void 0!==e&&e,n=this.tmpl.editCtx({hasData:i,extraCls:"before"}),s=this.tmpl.editCtx({hasData:i,extraCls:"after"});return[n,s]},replaceCtxControls:function(t){var e=r(t,2),i=e[0],n=e[1];(0,l["default"])("tr.edit-ctx.before").replaceWith(i),(0,l["default"])("tr.edit-ctx.after").replaceWith(n)},handleContextSuccess:function(t){if(t.ctx.before.length||t.ctx.after.length){this.ctxGap+=Math.max(t.ctx.before.length,t.ctx.after.length),
(0,S["default"])("ctxQty",this.ctxGap,{path:"/"});var e=this.renderCtxRows(t.ctx.before,"before"),i=this.renderCtxRows(t.ctx.after,"after"),n=(0,l["default"])("tr.edit-ctx");n.first().after(e),n.last().before(i)}},moreContext:function(){var t=this,e=arguments.length<=0||void 0===arguments[0]?H:arguments[0];return x["default"].getContext(this.units.getCurrent().id,{gap:this.ctxGap,qty:e}).then(function(e){return t.handleContextSuccess(e)},this.error)},lessContext:function(){var t=(0,l["default"])(".ctx-row.before"),e=(0,l["default"])(".ctx-row.after");(t.length||e.length)&&(t.length===this.ctxGap&&t.slice(0,H).remove(),e.length===this.ctxGap&&e.slice(-H).remove(),this.ctxGap-=H,this.ctxGap>=0&&(0===this.ctxGap&&this.replaceCtxControls(this.renderCtxControls({hasData:!1})),(0,S["default"])("ctxQty",this.ctxGap,{path:"/"})))},showContext:function(){var t=this,e=(0,l["default"])(".ctx-row.before"),i=(0,l["default"])(".ctx-row.after");e.length||i.length?(e.show(),i.show(),this.replaceCtxControls(this.renderCtxControls({hasData:!0}))):this.ctxQty>0&&(this.ctxGap=0,this.moreContext(this.ctxQty).then(function(){t.replaceCtxControls(t.renderCtxControls({hasData:!0}))}))},hideContext:function(){var t=(0,l["default"])(".ctx-row.before"),e=(0,l["default"])(".ctx-row.after");t.hide(),e.hide(),this.replaceCtxControls(this.renderCtxControls({hasData:!1}))},onSearch:function(t){if(!PTL.editor.canNavigate())return!1;var e;if(t){var i=this.buildSearchQuery();e="search="+i}else e=F["default"].updateHashPart("filter","all",["search","sfields","soptions"]);l["default"].history.load(e)},addComment:function(t){var e=this;t.preventDefault(),this.updateCommentDefaultProperties(),x["default"].addComment(this.units.getCurrent().id,(0,l["default"])(t.target).serializeObject()).then(function(t){return e.processAddComment(t)},this.error)},processAddComment:function(t){(0,l["default"])(".js-editor-comment").removeClass("selected"),(0,l["default"])("#editor-comment").fadeOut(200),(0,l["default"])("#translator-comment").length?(0,l["default"])(t.comment).hide().prependTo("#translator-comment").delay(200).animate({height:"show"},1e3,"easeOutQuad"):(0,l["default"])('<div id="translator-comment">'+t.comment+"</div>").prependTo("#extras-container").delay(200).hide().animate({height:"show"},1e3,"easeOutQuad"),O["default"].updateRelativeDates()},removeComment:function(t){t.preventDefault(),x["default"].removeComment(this.units.getCurrent().id).then(function(){return(0,l["default"])(".js-comment-first").fadeOut(200)},this.error)},showTimeline:function(){var t=this,e=(0,l["default"])("#timeline-results");if(e.length)return void e.slideDown(1e3,"easeOutQuad");var i=(0,l["default"])(".translate-container");i.spin(),x["default"].getTimeline(this.units.getCurrent().id).then(function(e){return t.renderTimeline(e)},this.error).always(function(){return i.spin(!1)})},renderTimeline:function(t){var e=t.uid;t.timeline&&e===this.units.getCurrent().id&&((0,l["default"])("#translator-comment").length?(0,l["default"])(t.timeline).hide().insertAfter("#translator-comment").slideDown(1e3,"easeOutQuad"):(0,l["default"])(t.timeline).hide().prependTo("#extras-container").slideDown(1e3,"easeOutQuad"),O["default"].updateRelativeDates(),(0,l["default"])(".timeline-field-body").filter(":not([dir])").bidi(),(0,l["default"])("#js-show-timeline").addClass("selected"))},toggleTimeline:function(t){t.preventDefault();var e=(0,l["default"])("#js-toggle-timeline");e.toggleClass("selected"),e.hasClass("selected")?this.showTimeline():(0,l["default"])("#timeline-results").slideUp(1e3,"easeOutQuad")},filterTMResults:function(t,e){var i=[];if(t.length>0&&t[0].source===e){var n=(0,l["default"])(this.focused);if(""===n.val()){var s=t[0].target;n.val(s).trigger("input"),n.caret(s.length,s.length),this.goFuzzy()}}for(var o=0;o<t.length&&o<3;o++)"nobody"===t[o].username?t[o].fullname=gettext("some anonymous user"):t[o].fullname||(t[o].fullname=gettext("someone")),t[o].fullname=u["default"].escape(t[o].fullname),i.push(t[o]);return i},getTMUnitsContent:function(t){var e=this.units.getCurrent(),i=e.get("store"),n=(i.get("source_lang"),i.get("target_lang"),e.get("source")[0]),s=this.filterTMResults(t,n),o=gettext("Similar translations");return s.length?this.tmpl.tm({store:i.toJSON(),unit:e.toJSON(),suggs:s,name:o}):""},getTMUnits:function(){var t=this.units.getCurrent(),e=t.get("store"),i=e.get("source_lang"),n=e.get("target_lang"),s=t.get("source")[0],o=e.get("project_style"),r=this.settings.tmUrl+i+"/"+n+"/unit/?source="+encodeURIComponent(s)+"&jsoncallback=?";s.length&&(o.length&&"standard"!=o&&(r+="&style="+o),null!==this.tmReq&&this.tmReq.abort(),this.tmReq=l["default"].jsonp({url:r,callback:"_jsonp"+t.id,dataType:"jsonp",cache:!0,success:function(i){if(i.length){var n=t.get("source")[0],s=PTL.editor.filterTMResults(i,n),o=gettext("Similar translations"),r=PTL.editor.tmpl.tm({store:e.toJSON(),unit:t.toJSON(),suggs:s,name:o});(0,l["default"])(r).hide().appendTo("#extras-container").slideDown(1e3,"easeOutQuad")}},error:PTL.editor.error}))},rejectSuggestion:function(t){var e=this;x["default"].rejectSuggestion(this.units.getCurrent().id,t).then(function(i){return e.processRejectSuggestion(i,t)},this.error)},processRejectSuggestion:function(t,e){t.user_score&&A["default"].set(t.user_score),(0,l["default"])("#suggestion-"+e).fadeOut(200,function(){(0,l["default"])(this).remove(),(0,l["default"])(".js-user-suggestion").length||PTL.editor.gotoNext()})},acceptSuggestion:function(t){var e=this,i=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],n=i.skipToNext,s=void 0!==n&&n;x["default"].acceptSuggestion(this.units.getCurrent().id,t).then(function(i){return e.processAcceptSuggestion(i,t,s)},this.error)},processAcceptSuggestion:function(t,e,i){l["default"].each(t.newtargets,function(t,e){(0,l["default"])("#id_target_f_"+t).val(e).focus()}),l["default"].each(t.newdiffs,function(t,e){l["default"].each(e,function(e,i){(0,l["default"])("#suggdiff-"+t+"-"+e).html(i)})});var n=(0,l["default"])(".js-translation-area").map(function(t,e){return(0,l["default"])(e).val()}).get(),s=this.units.getCurrent();s.setTranslation(n),s.set("isfuzzy",!1),t.user_score&&A["default"].set(t.user_score);var r=!!t.checks;(0,l["default"])(".translate-container").toggleClass("error",r),r&&o(t.checks),(0,l["default"])("#suggestion-"+e).fadeOut(200,function(){(0,l["default"])(this).remove(),r||!i&&(0,l["default"])(".js-user-suggestion").length||PTL.editor.gotoNext()})},toggleCheck:function(t){var e=this,i=(0,l["default"])(".js-check-"+t),n=!i.hasClass("false-positive");x["default"].toggleCheck(this.units.getCurrent().id,t,{mute:n}).then(function(){return e.processToggleCheck(t,n)},this.error)},processToggleCheck:function(t,e){(0,l["default"])(".js-check-"+t).toggleClass("false-positive",e);var i=(0,l["default"])("#translate-checks-block .check").not(".false-positive").size()>0;(0,l["default"])(".translate-container").toggleClass("error",i)},runHooks:function(){var t=this;W.forEach(function(e){return e.init({unit:t.units.getCurrent().toJSON()})})},setTranslation:function(t){var e=t.translation;if(void 0===e&&t.msg)return that.displayError(t.msg),!1;var i=document.querySelector(".js-translation-area");return i.value=e,d["default"].update(i),i.dataset.translationAidMt=e,i.dispatchEvent(new Event("input")),i.focus(),this.goFuzzy(),!0}}},209:function(t,e,i){"use strict";var n=i(4),s=i(8);i(344);var o=i(10),r=s.RelationalModel.extend({}),a=s.RelationalModel.extend({relations:[{type:"HasOne",key:"store",relatedModel:r,reverseRelation:{key:"units"}}],setTranslation:function(t){n.isArray(t)||(t=[t]),this.set("target",n.map(t,function(t){return o.cleanEscape(t)}))}});t.exports={Store:r,Unit:a}},212:function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var s=i(30),o=n(s),r={apiRoot:"/xhr/units/",fetchUnits:function(t){return(0,o["default"])({body:t,url:this.apiRoot})},fetchUnit:function(t){var e=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return(0,o["default"])({body:e,queue:"unitWidget",url:""+this.apiRoot+t+"/edit/"})},addTranslation:function(t,e){return(0,o["default"])({body:e,method:"POST",url:""+this.apiRoot+t})},getContext:function(t,e){return(0,o["default"])({body:e,url:""+this.apiRoot+t+"/context/"})},getTimeline:function(t){return(0,o["default"])({url:""+this.apiRoot+t+"/timeline/"})},addComment:function(t,e){return(0,o["default"])({body:e,method:"POST",url:""+this.apiRoot+t+"/comment/"})},removeComment:function(t){return(0,o["default"])({method:"DELETE",url:""+this.apiRoot+t+"/comment/"})},addSuggestion:function(t,e){return(0,o["default"])({body:e,method:"POST",url:""+this.apiRoot+t+"/suggestions/"})},acceptSuggestion:function(t,e){return(0,o["default"])({method:"POST",url:""+this.apiRoot+t+"/suggestions/"+e+"/"})},rejectSuggestion:function(t,e){return(0,o["default"])({method:"DELETE",url:""+this.apiRoot+t+"/suggestions/"+e+"/"})},toggleCheck:function(t,e,i){var n=i.mute,s=void 0!==n&&n;return(0,o["default"])({body:{mute:s},method:"POST",url:""+this.apiRoot+t+"/checks/"+e+"/toggle/"})}};e["default"]=r},220:function(t,e){"use strict";function i(t){var e=window.location.toString().split("#",2)[0],i=encodeURIComponent(t);return e+"#search="+i+"&sfields=notes"}function n(t){return t?t.replace(s,function(t,e,n,s,o){return e+'<a href="'+i(n)+'">'+n+"</a>"}):""}Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=n;var s=/(^|\s+|>)(#[0-9a-z_\-]+)/gi},344:function(t,e,i){var n,s,o;!function(r,a){s=[e,i(8),i(4)],n=a,o="function"==typeof n?n.apply(e,s):n,!(void 0!==o&&(t.exports=o))}(this,function(t,e,i){"use strict";e.Relational={showWarnings:!0},e.Semaphore={_permitsAvailable:null,_permitsUsed:0,acquire:function(){if(this._permitsAvailable&&this._permitsUsed>=this._permitsAvailable)throw new Error("Max permits acquired");this._permitsUsed++},release:function(){if(0===this._permitsUsed)throw new Error("All permits released");this._permitsUsed--},isLocked:function(){return this._permitsUsed>0},setAvailablePermits:function(t){if(this._permitsUsed>t)throw new Error("Available permits cannot be less than used permits");this._permitsAvailable=t}},e.BlockingQueue=function(){this._queue=[]},i.extend(e.BlockingQueue.prototype,e.Semaphore,{_queue:null,add:function(t){this.isBlocked()?this._queue.push(t):t()},process:function(){var t=this._queue;for(this._queue=[];t&&t.length;)t.shift()()},block:function(){this.acquire()},unblock:function(){this.release(),this.isBlocked()||this.process()},isBlocked:function(){return this.isLocked()}}),e.Relational.eventQueue=new e.BlockingQueue,e.Store=function(){this._collections=[],this._reverseRelations=[],this._orphanRelations=[],this._subModels=[],this._modelScopes=[t]},i.extend(e.Store.prototype,e.Events,{initializeRelation:function(t,n,s){var o=i.isString(n.type)?e[n.type]||this.getObjectByName(n.type):n.type;o&&o.prototype instanceof e.Relation?new o(t,n,s):e.Relational.showWarnings&&"undefined"!=typeof console&&console.warn("Relation=%o; missing or invalid relation type!",n)},addModelScope:function(t){this._modelScopes.push(t)},removeModelScope:function(t){this._modelScopes=i.without(this._modelScopes,t)},addSubModels:function(t,e){this._subModels.push({superModelType:e,subModels:t})},setupSuperModel:function(t){i.find(this._subModels,function(e){return i.filter(e.subModels||[],function(i,n){var s=this.getObjectByName(i);if(t===s)return e.superModelType._subModels[n]=t,t._superModel=e.superModelType,t._subModelTypeValue=n,t._subModelTypeAttribute=e.superModelType.prototype.subModelTypeAttribute,!0},this).length},this)},addReverseRelation:function(t){var e=i.any(this._reverseRelations,function(e){return i.all(t||[],function(t,i){return t===e[i]})});!e&&t.model&&t.type&&(this._reverseRelations.push(t),this._addRelation(t.model,t),this.retroFitRelation(t))},addOrphanRelation:function(t){var e=i.any(this._orphanRelations,function(e){return i.all(t||[],function(t,i){return t===e[i]})});!e&&t.model&&t.type&&this._orphanRelations.push(t)},processOrphanRelations:function(){i.each(this._orphanRelations.slice(0),function(t){var n=e.Relational.store.getObjectByName(t.relatedModel);n&&(this.initializeRelation(null,t),this._orphanRelations=i.without(this._orphanRelations,t))},this)},_addRelation:function(t,e){t.prototype.relations||(t.prototype.relations=[]),t.prototype.relations.push(e),i.each(t._subModels||[],function(t){this._addRelation(t,e)},this)},retroFitRelation:function(t){var e=this.getCollection(t.model,!1);e&&e.each(function(e){e instanceof t.model&&new t.type(e,t)},this)},getCollection:function(t,n){t instanceof e.RelationalModel&&(t=t.constructor);for(var s=t;s._superModel;)s=s._superModel;var o=i.find(this._collections,function(t){return t.model===s});return o||n===!1||(o=this._createCollection(s)),o},getObjectByName:function(t){var e=t.split("."),n=null;return i.find(this._modelScopes,function(t){if(n=i.reduce(e||[],function(t,e){return t?t[e]:void 0},t),n&&n!==t)return!0},this),n},_createCollection:function(t){var i;return t instanceof e.RelationalModel&&(t=t.constructor),t.prototype instanceof e.RelationalModel&&(i=new e.Collection,i.model=t,this._collections.push(i)),i},resolveIdForItem:function(t,n){var s=i.isString(n)||i.isNumber(n)?n:null;return null===s&&(n instanceof e.RelationalModel?s=n.id:i.isObject(n)&&(s=n[t.prototype.idAttribute])),s||0===s||(s=null),s},find:function(t,e){var i=this.resolveIdForItem(t,e),n=this.getCollection(t);if(n){var s=n.get(i);if(s instanceof t)return s}return null},register:function(t){var e=this.getCollection(t);if(e){var i=t.collection;e.add(t),t.collection=i}},checkId:function(t,i){var n=this.getCollection(t),s=n&&n.get(i);if(s&&t!==s)throw e.Relational.showWarnings&&"undefined"!=typeof console&&console.warn("Duplicate id! Old RelationalModel=%o, new RelationalModel=%o",s,t),new Error("Cannot instantiate more than one Backbone.RelationalModel with the same id per type!")},update:function(t){var e=this.getCollection(t);e.contains(t)||this.register(t),e._onModelEvent("change:"+t.idAttribute,t,e),t.trigger("relational:change:id",t,e)},unregister:function(t){var n,s;t instanceof e.Model?(n=this.getCollection(t),s=[t]):t instanceof e.Collection?(n=this.getCollection(t.model),s=i.clone(t.models)):(n=this.getCollection(t),s=i.clone(n.models)),i.each(s,function(t){this.stopListening(t),i.invoke(t.getRelations(),"stopListening")},this),i.contains(this._collections,t)?n.reset([]):i.each(s,function(t){n.get(t)?n.remove(t):n.trigger("relational:remove",t,n)},this)},reset:function(){this.stopListening(),i.each(this._collections,function(t){this.unregister(t)},this),this._collections=[],this._subModels=[],this._modelScopes=[t]}}),e.Relational.store=new e.Store,e.Relation=function(t,n,s){if(this.instance=t,n=i.isObject(n)?n:{},this.reverseRelation=i.defaults(n.reverseRelation||{},this.options.reverseRelation),this.options=i.defaults(n,this.options,e.Relation.prototype.options),this.reverseRelation.type=i.isString(this.reverseRelation.type)?e[this.reverseRelation.type]||e.Relational.store.getObjectByName(this.reverseRelation.type):this.reverseRelation.type,this.key=this.options.key,this.keySource=this.options.keySource||this.key,this.keyDestination=this.options.keyDestination||this.keySource||this.key,this.model=this.options.model||this.instance.constructor,this.relatedModel=this.options.relatedModel,!i.isFunction(this.relatedModel)||this.relatedModel.prototype instanceof e.RelationalModel||(this.relatedModel=i.result(this,"relatedModel")),i.isString(this.relatedModel)&&(this.relatedModel=e.Relational.store.getObjectByName(this.relatedModel)),this.checkPreconditions()&&(!this.options.isAutoRelation&&this.reverseRelation.type&&this.reverseRelation.key&&e.Relational.store.addReverseRelation(i.defaults({isAutoRelation:!0,model:this.relatedModel,relatedModel:this.model,reverseRelation:this.options},this.reverseRelation)),t)){var o=this.keySource;o!==this.key&&"object"==typeof this.instance.get(this.key)&&(o=this.key),this.setKeyContents(this.instance.get(o)),this.relatedCollection=e.Relational.store.getCollection(this.relatedModel),this.keySource!==this.key&&delete this.instance.attributes[this.keySource],this.instance._relations[this.key]=this,this.initialize(s),this.options.autoFetch&&this.instance.fetchRelated(this.key,i.isObject(this.options.autoFetch)?this.options.autoFetch:{}),this.listenTo(this.instance,"destroy",this.destroy).listenTo(this.relatedCollection,"relational:add relational:change:id",this.tryAddRelated).listenTo(this.relatedCollection,"relational:remove",this.removeRelated)}},e.Relation.extend=e.Model.extend,i.extend(e.Relation.prototype,e.Events,e.Semaphore,{options:{createModels:!0,includeInJSON:!0,isAutoRelation:!1,autoFetch:!1,parse:!1},instance:null,key:null,keyContents:null,relatedModel:null,relatedCollection:null,reverseRelation:null,related:null,checkPreconditions:function(){var t=this.instance,n=this.key,s=this.model,o=this.relatedModel,r=e.Relational.showWarnings&&"undefined"!=typeof console;if(!s||!n||!o)return r&&console.warn("Relation=%o: missing model, key or relatedModel (%o, %o, %o).",this,s,n,o),!1;if(!(s.prototype instanceof e.RelationalModel))return r&&console.warn("Relation=%o: model does not inherit from Backbone.RelationalModel (%o).",this,t),!1;if(!(o.prototype instanceof e.RelationalModel))return r&&console.warn("Relation=%o: relatedModel does not inherit from Backbone.RelationalModel (%o).",this,o),!1;if(this instanceof e.HasMany&&this.reverseRelation.type===e.HasMany)return r&&console.warn("Relation=%o: relation is a HasMany, and the reverseRelation is HasMany as well.",this),!1;if(t&&i.keys(t._relations).length){var a=i.find(t._relations,function(t){return t.key===n},this);if(a)return r&&console.warn("Cannot create relation=%o on %o for model=%o: already taken by relation=%o.",this,n,t,a),!1}return!0},setRelated:function(t){this.related=t,this.instance.attributes[this.key]=t},_isReverseRelation:function(t){return t.instance instanceof this.relatedModel&&this.reverseRelation.key===t.key&&this.key===t.reverseRelation.key},getReverseRelations:function(t){var e=[],n=i.isUndefined(t)?this.related&&(this.related.models||[this.related]):[t];return i.each(n||[],function(t){i.each(t.getRelations()||[],function(t){this._isReverseRelation(t)&&e.push(t)},this)},this),e},destroy:function(){this.stopListening(),this instanceof e.HasOne?this.setRelated(null):this instanceof e.HasMany&&this.setRelated(this._prepareCollection()),i.each(this.getReverseRelations(),function(t){t.removeRelated(this.instance)},this)}}),e.HasOne=e.Relation.extend({options:{reverseRelation:{type:"HasMany"}},initialize:function(t){this.listenTo(this.instance,"relational:change:"+this.key,this.onChange);var e=this.findRelated(t);this.setRelated(e),i.each(this.getReverseRelations(),function(e){e.addRelated(this.instance,t)},this)},findRelated:function(t){var e=null;if(t=i.defaults({parse:this.options.parse},t),this.keyContents instanceof this.relatedModel)e=this.keyContents;else if(this.keyContents||0===this.keyContents){var n=i.defaults({create:this.options.createModels},t);e=this.relatedModel.findOrCreate(this.keyContents,n)}return e&&(this.keyId=null),e},setKeyContents:function(t){this.keyContents=t,this.keyId=e.Relational.store.resolveIdForItem(this.relatedModel,this.keyContents)},onChange:function(t,n,s){if(!this.isLocked()){this.acquire(),s=s?i.clone(s):{};var o=i.isUndefined(s.__related),r=o?this.related:s.__related;if(o){this.setKeyContents(n);var a=this.findRelated(s);this.setRelated(a)}if(r&&this.related!==r&&i.each(this.getReverseRelations(r),function(t){t.removeRelated(this.instance,null,s)},this),i.each(this.getReverseRelations(),function(t){t.addRelated(this.instance,s)},this),!s.silent&&this.related!==r){var l=this;this.changed=!0,e.Relational.eventQueue.add(function(){l.instance.trigger("change:"+l.key,l.instance,l.related,s,!0),l.changed=!1})}this.release()}},tryAddRelated:function(t,e,i){!this.keyId&&0!==this.keyId||t.id!==this.keyId||(this.addRelated(t,i),this.keyId=null)},addRelated:function(t,e){var n=this;t.queue(function(){if(t!==n.related){var s=n.related||null;n.setRelated(t),n.onChange(n.instance,t,i.defaults({__related:s},e))}})},removeRelated:function(t,e,n){if(this.related&&t===this.related){var s=this.related||null;this.setRelated(null),this.onChange(this.instance,t,i.defaults({__related:s},n))}}}),e.HasMany=e.Relation.extend({collectionType:null,options:{reverseRelation:{type:"HasOne"},collectionType:e.Collection,collectionKey:!0,collectionOptions:{}},initialize:function(t){if(this.listenTo(this.instance,"relational:change:"+this.key,this.onChange),this.collectionType=this.options.collectionType,!i.isFunction(this.collectionType)||this.collectionType===e.Collection||this.collectionType.prototype instanceof e.Collection||(this.collectionType=i.result(this,"collectionType")),i.isString(this.collectionType)&&(this.collectionType=e.Relational.store.getObjectByName(this.collectionType)),this.collectionType!==e.Collection&&!(this.collectionType.prototype instanceof e.Collection))throw new Error("`collectionType` must inherit from Backbone.Collection");var n=this.findRelated(t);this.setRelated(n)},_prepareCollection:function(t){if(this.related&&this.stopListening(this.related),!(t&&t instanceof e.Collection)){var n=i.isFunction(this.options.collectionOptions)?this.options.collectionOptions(this.instance):this.options.collectionOptions;t=new this.collectionType(null,n)}if(t.model=this.relatedModel,this.options.collectionKey){var s=this.options.collectionKey===!0?this.options.reverseRelation.key:this.options.collectionKey;t[s]&&t[s]!==this.instance?e.Relational.showWarnings&&"undefined"!=typeof console&&console.warn("Relation=%o; collectionKey=%s already exists on collection=%o",this,s,this.options.collectionKey):s&&(t[s]=this.instance)}return this.listenTo(t,"relational:add",this.handleAddition).listenTo(t,"relational:remove",this.handleRemoval).listenTo(t,"relational:reset",this.handleReset),t},findRelated:function(t){var n=null;if(t=i.defaults({parse:this.options.parse},t),this.keyContents instanceof e.Collection)this._prepareCollection(this.keyContents),n=this.keyContents;else{var s=[];i.each(this.keyContents,function(e){if(e instanceof this.relatedModel)var n=e;else n=this.relatedModel.findOrCreate(e,i.extend({merge:!0},t,{create:this.options.createModels}));n&&s.push(n)},this),n=this.related instanceof e.Collection?this.related:this._prepareCollection(),n.set(s,i.defaults({merge:!1,parse:!1},t))}return this.keyIds=i.difference(this.keyIds,i.pluck(n.models,"id")),n},setKeyContents:function(t){this.keyContents=t instanceof e.Collection?t:null,this.keyIds=[],this.keyContents||!t&&0!==t||(this.keyContents=i.isArray(t)?t:[t],i.each(this.keyContents,function(t){var i=e.Relational.store.resolveIdForItem(this.relatedModel,t);(i||0===i)&&this.keyIds.push(i)},this))},onChange:function(t,n,s){s=s?i.clone(s):{},this.setKeyContents(n),this.changed=!1;var o=this.findRelated(s);if(this.setRelated(o),!s.silent){var r=this;e.Relational.eventQueue.add(function(){r.changed&&(r.instance.trigger("change:"+r.key,r.instance,r.related,s,!0),r.changed=!1)})}},handleAddition:function(t,n,s){s=s?i.clone(s):{},this.changed=!0,i.each(this.getReverseRelations(t),function(t){t.addRelated(this.instance,s)},this);var o=this;!s.silent&&e.Relational.eventQueue.add(function(){o.instance.trigger("add:"+o.key,t,o.related,s)})},handleRemoval:function(t,n,s){s=s?i.clone(s):{},this.changed=!0,i.each(this.getReverseRelations(t),function(t){t.removeRelated(this.instance,null,s)},this);var o=this;!s.silent&&e.Relational.eventQueue.add(function(){o.instance.trigger("remove:"+o.key,t,o.related,s)})},handleReset:function(t,n){var s=this;n=n?i.clone(n):{},!n.silent&&e.Relational.eventQueue.add(function(){s.instance.trigger("reset:"+s.key,s.related,n)})},tryAddRelated:function(t,e,n){var s=i.contains(this.keyIds,t.id);s&&(this.addRelated(t,n),this.keyIds=i.without(this.keyIds,t.id))},addRelated:function(t,e){var n=this;t.queue(function(){n.related&&!n.related.get(t)&&n.related.add(t,i.defaults({parse:!1},e))})},removeRelated:function(t,e,i){this.related.get(t)&&this.related.remove(t,i)}}),e.RelationalModel=e.Model.extend({relations:null,_relations:null,_isInitialized:!1,_deferProcessing:!1,_queue:null,_attributeChangeFired:!1,subModelTypeAttribute:"type",subModelTypes:null,constructor:function(t,n){if(n&&n.collection){var s=this,o=this.collection=n.collection;delete n.collection,this._deferProcessing=!0;var r=function(t){t===s&&(s._deferProcessing=!1,s.processQueue(),o.off("relational:add",r))};o.on("relational:add",r),i.defer(function(){r(s)})}e.Relational.store.processOrphanRelations(),e.Relational.store.listenTo(this,"relational:unregister",e.Relational.store.unregister),this._queue=new e.BlockingQueue,this._queue.block(),e.Relational.eventQueue.block();try{e.Model.apply(this,arguments)}finally{e.Relational.eventQueue.unblock()}},trigger:function(t){if(t.length>5&&0===t.indexOf("change")){var i=this,n=arguments;e.Relational.eventQueue.isLocked()?e.Relational.eventQueue.add(function(){var s=!0;if("change"===t)s=i.hasChanged()||i._attributeChangeFired,i._attributeChangeFired=!1;else{var o=t.slice(7),r=i.getRelation(o);r?(s=n[4]===!0,s?i.changed[o]=n[2]:r.changed||delete i.changed[o]):s&&(i._attributeChangeFired=!0)}s&&e.Model.prototype.trigger.apply(i,n)}):e.Model.prototype.trigger.apply(i,n)}else"destroy"===t?(e.Model.prototype.trigger.apply(this,arguments),e.Relational.store.unregister(this)):e.Model.prototype.trigger.apply(this,arguments);return this},initializeRelations:function(t){this.acquire(),this._relations={},i.each(this.relations||[],function(i){e.Relational.store.initializeRelation(this,i,t)},this),this._isInitialized=!0,this.release(),this.processQueue()},updateRelations:function(t,e){this._isInitialized&&!this.isLocked()&&i.each(this._relations,function(i){if(!t||i.keySource in t||i.key in t){var n=this.attributes[i.keySource]||this.attributes[i.key],s=t&&(t[i.keySource]||t[i.key]);(i.related!==n||null===n&&null===s)&&this.trigger("relational:change:"+i.key,this,n,e||{})}i.keySource!==i.key&&delete this.attributes[i.keySource]},this)},queue:function(t){this._queue.add(t)},processQueue:function(){this._isInitialized&&!this._deferProcessing&&this._queue.isBlocked()&&this._queue.unblock()},getRelation:function(t){return this._relations[t]},getRelations:function(){return i.values(this._relations)},fetchRelated:function(t,n,s){n=i.extend({update:!0,remove:!1},n);var o,r,a=[],l=this.getRelation(t),c=l&&(l.keyIds&&l.keyIds.slice(0)||(l.keyId||0===l.keyId?[l.keyId]:[]));if(s&&(o=l.related instanceof e.Collection?l.related.models:[l.related],i.each(o,function(t){(t.id||0===t.id)&&c.push(t.id)})),c&&c.length){var u=[];if(o=i.map(c,function(t){var e=l.relatedModel.findModel(t);if(!e){var i={};i[l.relatedModel.prototype.idAttribute]=t,e=l.relatedModel.findOrCreate(i,n),u.push(e)}return e},this),l.related instanceof e.Collection&&i.isFunction(l.related.url)&&(r=l.related.url(o)),r&&r!==l.related.url()){var h=i.defaults({error:function(){var t=arguments;i.each(u,function(e){e.trigger("destroy",e,e.collection,n),n.error&&n.error.apply(e,t)})},url:r},n);a=[l.related.fetch(h)]}else a=i.map(o,function(t){var e=i.defaults({error:function(){i.contains(u,t)&&(t.trigger("destroy",t,t.collection,n),n.error&&n.error.apply(t,arguments))}},n);return t.fetch(e)},this)}return a},get:function(t){var n=e.Model.prototype.get.call(this,t);if(!this.dotNotation||t.indexOf(".")===-1)return n;var s=t.split("."),o=i.reduce(s,function(t,n){if(!i.isNull(t)&&!i.isUndefined(t)){if(t instanceof e.Model)return e.Model.prototype.get.call(t,n);if(t instanceof e.Collection)return e.Collection.prototype.at.call(t,n);throw new Error("Attribute must be an instanceof Backbone.Model or Backbone.Collection. Is: "+t+", currentSplit: "+n)}},this);if(void 0!==n&&void 0!==o)throw new Error("Ambiguous result for '"+t+"'. direct result: "+n+", dotNotation: "+o);return n||o},set:function(t,n,s){e.Relational.eventQueue.block();var o;i.isObject(t)||null==t?(o=t,s=n):(o={},o[t]=n);try{var r=this.id,a=o&&this.idAttribute in o&&o[this.idAttribute];e.Relational.store.checkId(this,a);var l=e.Model.prototype.set.apply(this,arguments);this._isInitialized||this.isLocked()?a&&a!==r&&e.Relational.store.update(this):(this.constructor.initializeModelHierarchy(),(a||0===a)&&e.Relational.store.register(this),this.initializeRelations(s)),o&&this.updateRelations(o,s)}finally{e.Relational.eventQueue.unblock()}return l},clone:function(){var t=i.clone(this.attributes);return i.isUndefined(t[this.idAttribute])||(t[this.idAttribute]=null),i.each(this.getRelations(),function(e){delete t[e.key]}),new this.constructor(t)},toJSON:function(t){if(this.isLocked())return this.id;this.acquire();var n=e.Model.prototype.toJSON.call(this,t);return!this.constructor._superModel||this.constructor._subModelTypeAttribute in n||(n[this.constructor._subModelTypeAttribute]=this.constructor._subModelTypeValue),i.each(this._relations,function(s){var o=n[s.key],r=s.options.includeInJSON,a=null;r===!0?o&&i.isFunction(o.toJSON)&&(a=o.toJSON(t)):i.isString(r)?(o instanceof e.Collection?a=o.pluck(r):o instanceof e.Model&&(a=o.get(r)),r===s.relatedModel.prototype.idAttribute&&(s instanceof e.HasMany?a=a.concat(s.keyIds):s instanceof e.HasOne&&(a=a||s.keyId,a||i.isObject(s.keyContents)||(a=s.keyContents||null)))):i.isArray(r)?o instanceof e.Collection?(a=[],o.each(function(t){var e={};i.each(r,function(i){e[i]=t.get(i)}),a.push(e)})):o instanceof e.Model&&(a={},i.each(r,function(t){a[t]=o.get(t)})):delete n[s.key],r&&(n[s.keyDestination]=a),s.keyDestination!==s.key&&delete n[s.key]}),this.release(),n}},{setup:function(t){return this.prototype.relations=(this.prototype.relations||[]).slice(0),this._subModels={},this._superModel=null,this.prototype.hasOwnProperty("subModelTypes")?e.Relational.store.addSubModels(this.prototype.subModelTypes,this):this.prototype.subModelTypes=null,i.each(this.prototype.relations||[],function(t){if(t.model||(t.model=this),t.reverseRelation&&t.model===this){var n=!0;if(i.isString(t.relatedModel)){var s=e.Relational.store.getObjectByName(t.relatedModel);n=s&&s.prototype instanceof e.RelationalModel}n?e.Relational.store.initializeRelation(null,t):i.isString(t.relatedModel)&&e.Relational.store.addOrphanRelation(t)}},this),this},build:function(t,e){this.initializeModelHierarchy();var i=this._findSubModelType(this,t)||this;return new i(t,e)},_findSubModelType:function(t,e){if(t._subModels&&t.prototype.subModelTypeAttribute in e){var i=e[t.prototype.subModelTypeAttribute],n=t._subModels[i];if(n)return n;for(i in t._subModels)if(n=this._findSubModelType(t._subModels[i],e))return n}return null},initializeModelHierarchy:function(){if(this.inheritRelations(),this.prototype.subModelTypes){var t=i.keys(this._subModels),n=i.omit(this.prototype.subModelTypes,t);i.each(n,function(t){var i=e.Relational.store.getObjectByName(t);i&&i.initializeModelHierarchy()})}},inheritRelations:function(){if(i.isUndefined(this._superModel)||i.isNull(this._superModel))if(e.Relational.store.setupSuperModel(this),this._superModel){if(this._superModel.inheritRelations(),this._superModel.prototype.relations){var t=i.filter(this._superModel.prototype.relations||[],function(t){return!i.any(this.prototype.relations||[],function(e){return t.relatedModel===e.relatedModel&&t.key===e.key},this)},this);this.prototype.relations=t.concat(this.prototype.relations)}}else this._superModel=!1},findOrCreate:function(t,e){e||(e={});var n=i.isObject(t)&&e.parse&&this.prototype.parse?this.prototype.parse(i.clone(t)):t,s=this.findModel(n);return i.isObject(t)&&(s&&e.merge!==!1?(delete e.collection,delete e.url,s.set(n,e)):s||e.create===!1||(s=this.build(n,i.defaults({parse:!1},e)))),s},find:function(t,e){return e||(e={}),e.create=!1,this.findOrCreate(t,e)},findModel:function(t){return e.Relational.store.find(this,t);
}}),i.extend(e.RelationalModel.prototype,e.Semaphore),e.Collection.prototype.__prepareModel=e.Collection.prototype._prepareModel,e.Collection.prototype._prepareModel=function(t,n){var s;return t instanceof e.Model?(t.collection||(t.collection=this),s=t):(n=n?i.clone(n):{},n.collection=this,s="undefined"!=typeof this.model.findOrCreate?this.model.findOrCreate(t,n):new this.model(t,n),s&&s.validationError&&(this.trigger("invalid",this,t,n),s=!1)),s};var n=e.Collection.prototype.__set=e.Collection.prototype.set;e.Collection.prototype.set=function(t,s){if(!(this.model.prototype instanceof e.RelationalModel))return n.apply(this,arguments);s&&s.parse&&(t=this.parse(t,s));var o=!i.isArray(t),r=[],a=[];t=o?t?[t]:[]:i.clone(t),i.each(t,function(t){t instanceof e.Model||(t=e.Collection.prototype._prepareModel.call(this,t,s)),t&&(a.push(t),this.get(t)||this.get(t.cid)?null!=t.id&&(this._byId[t.id]=t):r.push(t))},this),a=o?a.length?a[0]:null:a;var l=n.call(this,a,i.defaults({parse:!1},s));return i.each(r,function(t){(this.get(t)||this.get(t.cid))&&this.trigger("relational:add",t,this,s)},this),l};var s=e.Collection.prototype.__remove=e.Collection.prototype.remove;e.Collection.prototype.remove=function(t,n){if(!(this.model.prototype instanceof e.RelationalModel))return s.apply(this,arguments);var o=!i.isArray(t),r=[];t=o?t?[t]:[]:i.clone(t),n||(n={}),i.each(t,function(t){t=this.get(t)||t&&this.get(t.cid),t&&r.push(t)},this);var a=s.call(this,o?r.length?r[0]:null:r,n);return i.each(r,function(t){this.trigger("relational:remove",t,this,n)},this),a};var o=e.Collection.prototype.__reset=e.Collection.prototype.reset;e.Collection.prototype.reset=function(t,n){n=i.extend({merge:!0},n);var s=o.call(this,t,n);return this.model.prototype instanceof e.RelationalModel&&this.trigger("relational:reset",this,n),s};var r=e.Collection.prototype.__sort=e.Collection.prototype.sort;e.Collection.prototype.sort=function(t){var i=r.call(this,t);return this.model.prototype instanceof e.RelationalModel&&this.trigger("relational:reset",this,t),i};var a=e.Collection.prototype.__trigger=e.Collection.prototype.trigger;e.Collection.prototype.trigger=function(t){if(!(this.model.prototype instanceof e.RelationalModel))return a.apply(this,arguments);if("add"===t||"remove"===t||"reset"===t||"sort"===t){var n=this,s=arguments;i.isObject(s[3])&&(s=i.toArray(s),s[3]=i.clone(s[3])),e.Relational.eventQueue.add(function(){a.apply(n,s)})}else a.apply(this,arguments);return this},e.RelationalModel.extend=function(t,i){var n=e.Model.extend.apply(this,arguments);return n.setup(this),n}})},347:function(t,e){!function(t,e,i,n){t.fn.caret=function(t,i){var n,s,o=this[0];if("object"==typeof t&&"number"==typeof t.start&&"number"==typeof t.end)n=t.start,s=t.end;else if("number"==typeof t&&"number"==typeof i)n=t,s=i;else if("string"==typeof t)(n=o.value.indexOf(t))>-1?s=n+t[e]:n=null;else if("[object RegExp]"===Object.prototype.toString.call(t)){var r=t.exec(o.value);null!=r&&(n=r.index,s=n+r[0][e])}if("undefined"!=typeof n)return this[0].selectionStart=n,this[0].selectionEnd=s,this[0].focus(),this;var a=o.selectionStart,l=o.selectionEnd,c=o.value.substring(a,l);return{start:a,end:l,text:c,replace:function(t){return o.value.substring(0,a)+t+o.value.substring(l,o.value[e])}}}}(jQuery,"length","createRange","duplicate")},348:function(t,e){jQuery.easing.jswing=jQuery.easing.swing,jQuery.extend(jQuery.easing,{def:"easeOutQuad",swing:function(t,e,i,n,s){return jQuery.easing[jQuery.easing.def](t,e,i,n,s)},easeInQuad:function(t,e,i,n,s){return n*(e/=s)*e+i},easeOutQuad:function(t,e,i,n,s){return-n*(e/=s)*(e-2)+i},easeInOutQuad:function(t,e,i,n,s){return(e/=s/2)<1?n/2*e*e+i:-n/2*(--e*(e-2)-1)+i},easeInCubic:function(t,e,i,n,s){return n*(e/=s)*e*e+i},easeOutCubic:function(t,e,i,n,s){return n*((e=e/s-1)*e*e+1)+i},easeInOutCubic:function(t,e,i,n,s){return(e/=s/2)<1?n/2*e*e*e+i:n/2*((e-=2)*e*e+2)+i},easeInQuart:function(t,e,i,n,s){return n*(e/=s)*e*e*e+i},easeOutQuart:function(t,e,i,n,s){return-n*((e=e/s-1)*e*e*e-1)+i},easeInOutQuart:function(t,e,i,n,s){return(e/=s/2)<1?n/2*e*e*e*e+i:-n/2*((e-=2)*e*e*e-2)+i},easeInQuint:function(t,e,i,n,s){return n*(e/=s)*e*e*e*e+i},easeOutQuint:function(t,e,i,n,s){return n*((e=e/s-1)*e*e*e*e+1)+i},easeInOutQuint:function(t,e,i,n,s){return(e/=s/2)<1?n/2*e*e*e*e*e+i:n/2*((e-=2)*e*e*e*e+2)+i},easeInSine:function(t,e,i,n,s){return-n*Math.cos(e/s*(Math.PI/2))+n+i},easeOutSine:function(t,e,i,n,s){return n*Math.sin(e/s*(Math.PI/2))+i},easeInOutSine:function(t,e,i,n,s){return-n/2*(Math.cos(Math.PI*e/s)-1)+i},easeInExpo:function(t,e,i,n,s){return 0==e?i:n*Math.pow(2,10*(e/s-1))+i},easeOutExpo:function(t,e,i,n,s){return e==s?i+n:n*(-Math.pow(2,-10*e/s)+1)+i},easeInOutExpo:function(t,e,i,n,s){return 0==e?i:e==s?i+n:(e/=s/2)<1?n/2*Math.pow(2,10*(e-1))+i:n/2*(-Math.pow(2,-10*--e)+2)+i},easeInCirc:function(t,e,i,n,s){return-n*(Math.sqrt(1-(e/=s)*e)-1)+i},easeOutCirc:function(t,e,i,n,s){return n*Math.sqrt(1-(e=e/s-1)*e)+i},easeInOutCirc:function(t,e,i,n,s){return(e/=s/2)<1?-n/2*(Math.sqrt(1-e*e)-1)+i:n/2*(Math.sqrt(1-(e-=2)*e)+1)+i},easeInElastic:function(t,e,i,n,s){var o=1.70158,r=0,a=n;if(0==e)return i;if(1==(e/=s))return i+n;if(r||(r=.3*s),a<Math.abs(n)){a=n;var o=r/4}else var o=r/(2*Math.PI)*Math.asin(n/a);return-(a*Math.pow(2,10*(e-=1))*Math.sin((e*s-o)*(2*Math.PI)/r))+i},easeOutElastic:function(t,e,i,n,s){var o=1.70158,r=0,a=n;if(0==e)return i;if(1==(e/=s))return i+n;if(r||(r=.3*s),a<Math.abs(n)){a=n;var o=r/4}else var o=r/(2*Math.PI)*Math.asin(n/a);return a*Math.pow(2,-10*e)*Math.sin((e*s-o)*(2*Math.PI)/r)+n+i},easeInOutElastic:function(t,e,i,n,s){var o=1.70158,r=0,a=n;if(0==e)return i;if(2==(e/=s/2))return i+n;if(r||(r=s*(.3*1.5)),a<Math.abs(n)){a=n;var o=r/4}else var o=r/(2*Math.PI)*Math.asin(n/a);return e<1?-.5*(a*Math.pow(2,10*(e-=1))*Math.sin((e*s-o)*(2*Math.PI)/r))+i:a*Math.pow(2,-10*(e-=1))*Math.sin((e*s-o)*(2*Math.PI)/r)*.5+n+i},easeInBack:function(t,e,i,n,s,o){return void 0==o&&(o=1.70158),n*(e/=s)*e*((o+1)*e-o)+i},easeOutBack:function(t,e,i,n,s,o){return void 0==o&&(o=1.70158),n*((e=e/s-1)*e*((o+1)*e+o)+1)+i},easeInOutBack:function(t,e,i,n,s,o){return void 0==o&&(o=1.70158),(e/=s/2)<1?n/2*(e*e*(((o*=1.525)+1)*e-o))+i:n/2*((e-=2)*e*(((o*=1.525)+1)*e+o)+2)+i},easeInBounce:function(t,e,i,n,s){return n-jQuery.easing.easeOutBounce(t,s-e,0,n,s)+i},easeOutBounce:function(t,e,i,n,s){return(e/=s)<1/2.75?n*(7.5625*e*e)+i:e<2/2.75?n*(7.5625*(e-=1.5/2.75)*e+.75)+i:e<2.5/2.75?n*(7.5625*(e-=2.25/2.75)*e+.9375)+i:n*(7.5625*(e-=2.625/2.75)*e+.984375)+i},easeInOutBounce:function(t,e,i,n,s){return e<s/2?.5*jQuery.easing.easeInBounce(t,2*e,0,n,s)+i:.5*jQuery.easing.easeOutBounce(t,2*e-s,0,n,s)+.5*n+i}})},353:function(t,e){!function(t){t.fn.highlightRegex=function(e){return void 0==e||""==e.source?t(this).find("span.highlight").each(function(){t(this).replaceWith(t(this).text()),t(this).parent().each(function(){node=t(this).get(0),node.normalize&&node.normalize()})}):t(this).each(function(){elt=t(this).get(0),elt.normalize(),t.each(t.makeArray(elt.childNodes),function(i,n){if(3==n.nodeType)for(var s=n;(pos=s.data.search(e))>=0&&(match=s.data.slice(pos).match(e)[0],0!=match.length);){var o=document.createElement("span");o.className="highlight";var r=s.splitText(pos),s=r.splitText(match.length),a=r.cloneNode(!0);o.appendChild(a),s.parentNode.replaceChild(o,r)}else t(n).highlightRegex(e)})}),t(this)}}(jQuery)},354:function(t,e){!function(t){function e(){}function i(t){r=[t]}function n(t,e,i){return t&&t.apply&&t.apply(e.context||e,i)}function s(t){return/\?/.test(t)?"&":"?"}function o(o){function f(t){G++||(J(),W&&(T[Q]={s:[t]}),B&&(t=B.apply(o,[t])),n(L,o,[t,C,o]),n(F,o,[o,C]))}function O(t){G++||(J(),W&&t!=x&&(T[Q]=t),n(D,o,[o,t]),n(F,o,[o,t]))}o=t.extend({},I,o);var j,z,P,A,N,L=o.success,D=o.error,F=o.complete,B=o.dataFilter,H=o.callbackParameter,U=o.callback,$=o.cache,W=o.pageCache,q=o.charset,Q=o.url,V=o.data,K=o.timeout,G=0,J=e;return S&&S(function(t){t.done(L).fail(D),L=t.resolve,D=t.reject}).promise(o),o.abort=function(){!G++&&J()},n(o.beforeSend,o,[o])===!1||G?o:(Q=Q||c,V=V?"string"==typeof V?V:t.param(V,o.traditional):c,Q+=V?s(Q)+V:c,H&&(Q+=s(Q)+encodeURIComponent(H)+"=?"),!$&&!W&&(Q+=s(Q)+"_"+(new Date).getTime()+"="),Q=Q.replace(/=\?(&|$)/,"="+U+"$1"),W&&(j=T[Q])?j.s?f(j.s[0]):O(j):(k[U]=i,P=t(b)[0],P.id=d+R++,q&&(P[l]=q),E&&E.version()<11.6?(A=t(b)[0]).text="document.getElementById('"+P.id+"')."+g+"()":P[a]=a,_&&(P.htmlFor=P.id,P.event=p),P[m]=P[g]=P[v]=function(t){if(!P[y]||!/i/.test(P[y])){try{P[p]&&P[p]()}catch(e){}t=r,r=0,t?f(t[0]):O(u)}},P.src=Q,J=function(t){N&&clearTimeout(N),P[v]=P[m]=P[g]=null,M[w](P),A&&M[w](A)},M[h](P,z=M.firstChild),A&&M[h](A,z),N=K>0&&setTimeout(function(){O(x)},K)),o)}var r,a="async",l="charset",c="",u="error",h="insertBefore",d="_jqjsp",f="on",p=f+"click",g=f+u,m=f+"load",v=f+"readystatechange",y="readyState",w="removeChild",b="<script>",C="success",x="timeout",k=window,S=t.Deferred,M=t("head")[0]||document.documentElement,T={},R=0,I={callback:d,url:location.href},E=k.opera,_=!!t("<div>").html("<!--[if IE]><i><![endif]-->").find("i").length;o.setup=function(e){t.extend(I,e)},t.jsonp=o}(jQuery)},356:function(t,e,i){var n,s,o;!function(i,r){s=[],n=r,o="function"==typeof n?n.apply(e,s):n,!(void 0!==o&&(t.exports=o))}(this,function(){"use strict";var t=function(t){return t.replace(/\s+/g," ").split(" ")},e=function(e,i){return null===e||void 0===e?e="":("string"!=typeof e||!e instanceof String)&&(e=e.toString()),"words"===i?t(e):e},i=function(t,e){return 1-t/e},n=function(t,e){if(0===t.length)return e.length;if(0===e.length)return t.length;var i,n,s,o=[],r=[];for(i=0;i<e.length+1;++i)o[i]=i;for(i=0;i<t.length;i++){for(r[0]=i+1,n=0;n<e.length;n++)s=t[i]===e[n]?0:1,r[n+1]=Math.min(r[n]+1,o[n+1]+1,o[n]+s);for(n=0;n<r.length;n++)o[n]=r[n]}return r[e.length]},s=function(t){t=t||{},this.opts={compare:t.compare||"strings"}};return s.fn=s.prototype,s.fn.prepareInput=e,s.fn.distance=function(t,i){var t=e(t,this.opts.compare),i=e(i,this.opts.compare);return n(t,i)},s.fn.similarity=function(t,s){var t=e(t,this.opts.compare),s=e(s,this.opts.compare);return i(n(t,s),Math.max(t.length,s.length))},s})}});